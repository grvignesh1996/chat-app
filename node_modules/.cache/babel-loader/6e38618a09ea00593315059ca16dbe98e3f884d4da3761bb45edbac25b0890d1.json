{"ast":null,"code":"import axios from 'axios';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { setConfiguration, Row, Col } from 'react-grid-system';\nimport _ from 'lodash-es';\nimport { CloseOutlined, UnorderedListOutlined, SettingOutlined } from '@ant-design/icons';\nimport { animateScroll } from 'react-scroll';\nimport { WebSocket } from 'nextjs-websocket';\nvar getMessages = function getMessages(host, headers, chatId, messageCount, callback) {\n  axios.get(host + \"/chats/\" + chatId + \"/messages/latest/\" + messageCount + \"/\", {\n    headers: headers\n  }).then(function (response) {\n    // props.onGetMessages && props.onGetMessages(chatId, response.data)\n    callback(chatId, response.data);\n  })[\"catch\"](function (error) {\n    console.log('Fetch Latest Messages Error', error);\n  });\n};\nvar newMessage = function newMessage(host, headers, chatId, message, callback) {\n  if (!chatId) return;\n  var formdata = new FormData();\n  if (message.attachments.length > 0) {\n    for (var i = 0; i < message.attachments.length; i++) {\n      formdata.append('attachments', message.attachments[i].blob, message.attachments[i].file);\n    }\n  }\n  message.text !== null && formdata.append('text', message.text);\n  formdata.append('created', message.created);\n  formdata.append('sender_username', message.sender_username);\n  formdata.append('custom_json', JSON.stringify({}));\n  axios.post(host + \"/chats/\" + chatId + \"/messages/\", formdata, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('New Message Error', error);\n  });\n};\nvar readMessage = function readMessage(host, headers, chatId, messageId, callback) {\n  axios.patch(host + \"/chats/\" + chatId + \"/people/\", {\n    last_read: messageId\n  }, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Read Message Error', error);\n  });\n};\nvar getChat = function getChat(host, headers, chatId, callback) {\n  axios.get(host + \"/chats/\" + chatId + \"/\", {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Get Chat Error', error);\n  });\n};\nvar deleteChat = function deleteChat(host, headers, chatId, callback) {\n  axios[\"delete\"](host + \"/chats/\" + chatId + \"/\", {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Delete Chat Error', error);\n  });\n};\nvar getChatsBefore = function getChatsBefore(host, headers, before, chatCount, callback) {\n  axios.put(host + \"/chats/latest/\" + chatCount + \"/\", {\n    before: before\n  }, {\n    headers: headers\n  }).then(function (response) {\n    // props.onGetChats && props.onGetChats(response.data);\n    callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Fetch Chats Before Error', error);\n  });\n};\nvar getOrCreateChat = function getOrCreateChat(host, headers, data, callback) {\n  if (host === void 0) {\n    host = 'https://api.chatengine.io';\n  }\n  axios.put(host + \"/chats/\", data, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Get or Create Chat Error', error);\n  });\n};\nvar newChat = function newChat(host, headers, title, callback) {\n  if (!title) return;\n  axios.post(host + \"/chats/\", {\n    title: title\n  }, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('New Chat Error', error);\n  });\n};\nvar getPeopleToInvite = function getPeopleToInvite(host, headers, chatId, callback) {\n  axios.get(host + \"/chats/\" + chatId + \"/others/\", {\n    headers: headers\n  }).then(function (response) {\n    // props.onGetOtherPeople && props.onGetOtherPeople(chatId, response.data)\n    callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Fetch People to Invite Error', error);\n  });\n};\nvar invitePerson = function invitePerson(host, headers, chatId, username, callback) {\n  axios.post(host + \"/chats/\" + chatId + \"/people/\", {\n    username: username\n  }, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Invite Person Error', error);\n  });\n};\nvar removePerson = function removePerson(host, headers, chatId, username, callback) {\n  axios.put(host + \"/chats/\" + chatId + \"/people/\", {\n    username: username\n  }, {\n    headers: headers\n  }).then(function (response) {\n    callback && callback(response.data);\n  })[\"catch\"](function (error) {\n    console.log('Remove Person Error', error);\n  });\n};\nfunction _regeneratorRuntime() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n      return ContinueSentinel;\n    }\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nvar styles = {\n  style: {\n    position: 'relative',\n    height: '100%'\n  },\n  chatListColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll'\n  },\n  chatFeedColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll',\n    borderRight: '1px solid #afafaf',\n    borderLeft: '1px solid #afafaf'\n  },\n  chatSettingsColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll'\n  },\n  chatListMobileButtonStyle: {\n    position: 'absolute',\n    top: '12px',\n    left: '12px'\n  },\n  chatSettingsMobileButtonStyle: {\n    position: 'absolute',\n    top: '12px',\n    right: '12px'\n  }\n};\nvar styles$1 = {\n  style: {\n    width: '100%',\n    height: '100%',\n    maxHeight: '100vh',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    backgroundColor: 'white'\n  },\n  loadingMoreChatsStyle: {\n    fontFamily: 'Avenir',\n    textAlign: 'center',\n    backgroundColor: '#e2e2e2',\n    margin: '4px',\n    paddingTop: '14px',\n    paddingBottom: '14px',\n    borderRadius: '4px'\n  }\n};\nvar styles$2 = {\n  style: {\n    position: 'relative',\n    height: '64px',\n    width: '100%',\n    backgroundColor: 'white'\n  },\n  titleStyle: {\n    // Position\n    position: 'absolute',\n    top: '16px',\n    left: '14px',\n    // Size\n    fontSize: '26px',\n    // Style\n    fontFamily: 'Avenir',\n    fontWeight: 600\n  },\n  inputStyle: {\n    // Position\n    position: 'absolute',\n    top: '15px',\n    left: '14px',\n    // Size\n    width: 'calc(100% - 28px)'\n  },\n  buttonStyle: {\n    // Position\n    position: 'absolute',\n    top: '15px',\n    right: '14px',\n    // Style\n    fontFamily: 'Avenir',\n    fontWeight: 600\n  }\n};\nvar styles$3 = {\n  style: {\n    fontFamily: 'Avenir',\n    color: '#1890ff',\n    border: '1px solid #1890ff',\n    outline: 'none',\n    height: '36px',\n    fontSize: '15px',\n    cursor: 'pointer',\n    padding: '8px 16px',\n    borderRadius: '33px',\n    backgroundColor: 'white',\n    transition: 'all .44s ease',\n    WebkitTransition: 'all .44s ease',\n    MozTransition: 'all .44s ease'\n  },\n  hoveredStyle: {\n    opacity: '0.73'\n  }\n};\nvar Button = function Button(props) {\n  var _props$type = props.type,\n    type = _props$type === void 0 ? 'default' : _props$type;\n  var _useState = useState(false),\n    hovered = _useState[0],\n    setHovered = _useState[1];\n  var getTypeStyle = function getTypeStyle() {\n    if (type == 'primary') {\n      return primaryStyle;\n    } else if (type === 'danger') {\n      return dangerStyle;\n    } else {\n      return {};\n    }\n  };\n  var typeStyle = getTypeStyle();\n  return React.createElement(\"button\", {\n    onClick: props.onClick,\n    className: \"ce-\" + type + \"-button \" + props.className,\n    onMouseEnter: function onMouseEnter() {\n      return setHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(false);\n    },\n    style: _extends({}, styles$3.style, typeStyle, hovered ? styles$3.hoveredStyle : {}, props.style, hovered ? props.hoveredStyle : {})\n  }, props.children);\n};\nvar primaryStyle = {\n  color: 'white',\n  border: 'none',\n  backgroundColor: '#1890ff'\n};\nvar dangerStyle = {\n  color: '#f5222d',\n  backgroundColor: 'white',\n  border: '1px solid #f5222d'\n};\nvar styles$4 = {\n  style: {\n    fontFamily: 'Avenir',\n    height: '36px',\n    fontSize: '15px',\n    outline: 'none',\n    borderRadius: '24px',\n    border: '1px solid #d9d9d9',\n    padding: '0px 12px',\n    boxSizing: 'border-box',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  focusStyle: {\n    border: '1px solid #1890ff'\n  }\n};\nvar Input = function Input(props) {\n  var didMountRef = useRef(false);\n  var _useState = useState(''),\n    currentValue = _useState[0],\n    setCurrentValue = _useState[1];\n  var _useState2 = useState(false),\n    focused = _useState2[0],\n    setFocused = _useState2[1];\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      if (props.defaultValue) {\n        var event = {\n          target: {\n            value: currentValue\n          }\n        };\n        props.onChange && props.onChange(event);\n        setCurrentValue(props.defaultValue);\n      }\n    }\n  });\n  return React.createElement(\"input\", {\n    autoFocus: props.autoFocus,\n    className: \"ce-input ce-text-input \" + props.className,\n    placeholder: props.label,\n    value: typeof props.value === 'string' ? props.value : currentValue,\n    onChange: function onChange(e) {\n      setCurrentValue(e.target.value);\n      props.onChange && props.onChange(e);\n    },\n    onFocus: function onFocus(e) {\n      setFocused(true);\n      props.onFocus && props.onFocus(e);\n    },\n    onBlur: function onBlur(e) {\n      setFocused(false);\n      props.onBlur && props.onBlur(e);\n    },\n    style: _extends({}, styles$4.style, focused ? styles$4.focusStyle : {}, props.style, focused ? props.focusStyle : {})\n  });\n};\nvar ChatForm = function ChatForm(props) {\n  var _useState = useState(false),\n    selected = _useState[0],\n    setSelected = _useState[1];\n  var _useState2 = useState(''),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var onSubmit = function onSubmit(event) {\n    event.preventDefault();\n    props.onFormSubmit && props.onFormSubmit(value);\n    setValue('');\n  };\n  var onChange = function onChange(event) {\n    setValue(event.target.value);\n  };\n  if (props.renderChatForm) {\n    return React.createElement(React.Fragment, null, props.renderChatForm(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-chat-form\",\n    style: _extends({}, styles$2.style, props.style)\n  }, React.createElement(\"span\", {\n    className: \"ce-chat-form-title\",\n    style: _extends({}, styles$2.titleStyle, props.titleStyle)\n  }, \"My Chats\"), React.createElement(Button, {\n    style: _extends({}, styles$2.buttonStyle, props.buttonStyle),\n    className: \"ce-chat-form-button\",\n    onClick: function onClick() {\n      return setSelected(true);\n    }\n  }, \"+\"), React.createElement(\"form\", {\n    className: \"ce-chat-form-html-form\",\n    onSubmit: onSubmit\n  }, React.createElement(Input, {\n    autoFocus: true,\n    value: value,\n    label: \"Chat Title\",\n    className: \"ce-chat-form-input\",\n    style: _extends({}, styles$2.inputStyle, {\n      visibility: selected ? 'visible' : 'hidden'\n    }, props.inputStyle),\n    onChange: onChange,\n    onBlur: function onBlur() {\n      return setSelected(false);\n    }\n  })));\n};\nvar colors = ['#D64045', '#5B3000', '#00CC99', '#467599', '#1D3354', '#8F250C', '#6153CC', '#961D4E', '#A29F15', '#0CAADC', '#FF5154', '#FA7921', '#688E26', '#550527', '#A10702', '#FF1053', '#6C6EA0', '#100B00'];\nvar stringToNumber = function stringToNumber(str) {\n  var sum = 0;\n  for (var i = 0; i < str.length; i++) {\n    sum += str.charCodeAt(i);\n  }\n  return sum;\n};\nvar stringToColor = function stringToColor(str) {\n  if (!str) {\n    return 'black';\n  } else {\n    return colors[stringToNumber(str) % colors.length];\n  }\n};\nvar styles$5 = {\n  style: {\n    // Position\n    position: 'relative',\n    // Size\n    width: '44px',\n    height: '44px',\n    // Style\n    borderRadius: '50%',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center',\n    backgroundSize: '48px',\n    // Text Style\n    color: 'white',\n    textAlign: 'center',\n    fontFamily: 'Avenir',\n    fontSize: '15px',\n    lineHeight: '44px',\n    fontWeight: 600\n  },\n  statusStyle: {\n    // Position\n    position: 'absolute',\n    top: '0px',\n    right: '0px',\n    // Style\n    width: '8px',\n    height: '8px',\n    borderRadius: '100%',\n    border: '2px solid white'\n  }\n};\nvar Avatar = function Avatar(props) {\n  // Save Copy of URL to avoid flickering\n  var _useState = useState(''),\n    localAvatar = _useState[0],\n    setLocalAvatar = _useState[1];\n  var _props$username = props.username,\n    username = _props$username === void 0 ? '' : _props$username,\n    _props$avatarUrl = props.avatarUrl,\n    avatarUrl = _props$avatarUrl === void 0 ? '' : _props$avatarUrl;\n  var text = username ? username.substring(0, 2).toUpperCase() : '';\n  var color = stringToColor(username);\n  useEffect(function () {\n    var newAvatar = avatarUrl !== null ? avatarUrl : '';\n    if (newAvatar.split('?')[0] !== localAvatar.split('?')[0]) {\n      setLocalAvatar(newAvatar);\n    }\n  });\n  var avatarUrlStyle = {\n    backgroundColor: localAvatar.length > 0 ? '#FFFFFF' : color,\n    backgroundImage: localAvatar.length > 0 && \"url(\" + localAvatar + \")\"\n  };\n  return React.createElement(\"div\", {\n    className: \"ce-avatar \" + props.className,\n    onClick: props.onClick,\n    style: _extends({}, styles$5.style, avatarUrlStyle, props.style)\n  }, localAvatar.length === 0 && text, React.createElement(\"div\", {\n    className: \"ce-avatar-status\",\n    style: _extends({}, styles$5.statusStyle, {\n      display: props.isOnline === undefined ? 'none' : 'auto',\n      backgroundColor: props.isOnline ? '#52c41a' : '#f5222d'\n    }, props.statusStyle)\n  }));\n};\nvar styles$6 = {\n  style: {\n    position: 'relative',\n    height: '76px',\n    borderRadius: '12px',\n    cursor: 'pointer',\n    transition: 'all .44s ease',\n    WebkitTransition: 'all .44s ease',\n    MozTransition: 'all .44s ease'\n  },\n  hoveredStyle: {\n    backgroundColor: '#f5f5f5',\n    border: '0px solid white'\n  },\n  activeStyle: {\n    backgroundColor: '#d9d9d9',\n    border: '0px solid white'\n  },\n  avatarStyle: {\n    position: 'absolute',\n    top: '16px',\n    left: '12px'\n  },\n  titleStyle: {\n    // Position\n    position: 'absolute',\n    top: '12px',\n    left: '68px',\n    // Size\n    width: 'calc(100% - 68px - 32px)',\n    // Font\n    fontWeight: 500,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir'\n  },\n  notificationStyle: {\n    // Position\n    position: 'absolute',\n    top: 'calc(12px + 6px)',\n    right: '12px',\n    // Style\n    width: '12px',\n    height: '12px',\n    borderRadius: '6px',\n    backgroundColor: '#1890ff',\n    \"float\": 'right'\n  },\n  subtitleStyle: {\n    // Position\n    position: 'absolute',\n    bottom: '12px',\n    left: '68px',\n    // Size\n    width: 'calc(70% - 68px)',\n    // Style\n    color: 'rgba(153, 153, 153, 1)',\n    fontSize: '14px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir'\n  },\n  timeStampStyle: {\n    // Position\n    position: 'absolute',\n    bottom: '12px',\n    right: '12px',\n    // Size\n    width: '20%',\n    // Style\n    textAlign: 'right',\n    color: 'rgba(153, 153, 153, 1)',\n    fontSize: '14px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir'\n  },\n  loadingBarStyle: {\n    borderRadius: '4px',\n    backgroundColor: '#e2e2e2',\n    color: '#e2e2e2'\n  }\n};\nvar ChatCard = function ChatCard(props) {\n  var _props$title = props.title,\n    title = _props$title === void 0 ? '' : _props$title,\n    _props$description = props.description,\n    description = _props$description === void 0 ? '' : _props$description,\n    _props$timeStamp = props.timeStamp,\n    timeStamp = _props$timeStamp === void 0 ? '' : _props$timeStamp;\n  var _useState = useState(false),\n    hovered = _useState[0],\n    setHovered = _useState[1];\n  var loadingBarStyle = props.isLoading ? _extends({}, styles$6.loadingBarStyle, props.loadingBarStyle) : {};\n  var hasNotificationStyle = props.hasNotification ? {} : {\n    display: 'none'\n  };\n  if (props.renderChatCard) {\n    return React.createElement(React.Fragment, null, props.renderChatCard(props));\n  }\n  return React.createElement(\"div\", {\n    onClick: props.onClick,\n    onMouseEnter: function onMouseEnter() {\n      return setHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(false);\n    },\n    style: _extends({}, styles$6.style, hovered ? styles$6.hoveredStyle : {}, props.isActive ? styles$6.activeStyle : {}, props.style, hovered ? props.hoveredStyle : {}, props.isActive ? props.activeStyle : {}),\n    className: \"\\n        ce-chat-card \\n        \" + (props.isActive && 'ce-active-chat-card') + \" \\n        \" + (hovered && 'ce-hovered-chat-card') + \"\\n      \"\n  }, props.renderAvatar ? props.renderAvatar(props) : React.createElement(Avatar, {\n    username: props.avatarUsername,\n    avatarUrl: props.avatarUrl,\n    className: \"ce-chat-card-avatar\",\n    style: _extends({}, styles$6.avatarStyle, {\n      backgroundColor: props.isLoading ? '#e2e2e2' : stringToColor(props.avatarUsername)\n    }, props.avatarStyle)\n  }), React.createElement(\"div\", {\n    className: \"ce-chat-card-title \" + (props.isLoading && 'ce-chat-card-title-loading ce-chat-card-loading'),\n    style: _extends({}, styles$6.titleStyle, loadingBarStyle, props.titleStyle),\n    id: \"ce-chat-card-title-\" + title\n  }, props.isLoading ? '.' : title), React.createElement(\"div\", {\n    className: \"ce-chat-card-unread \" + (props.isLoading && 'ce-chat-card-unread-loading ce-chat-card-loading'),\n    style: _extends({}, styles$6.notificationStyle, hasNotificationStyle, loadingBarStyle, props.notificationStyle)\n  }), React.createElement(\"div\", {\n    className: \"ce-chat-card-subtitle \" + (props.isLoading && 'ce-chat-card-subtitle-loading ce-chat-card-loading'),\n    style: _extends({}, styles$6.subtitleStyle, loadingBarStyle, props.subtitleStyle)\n  }, React.createElement(\"div\", {\n    className: \"ce-chat-card-subtitle-html \" + (props.isLoading && 'ce-chat-card-subtitle-html-loading ce-chat-card-loading'),\n    dangerouslySetInnerHTML: {\n      __html: props.isLoading ? '.' : description\n    }\n  }), React.createElement(\"style\", null, \"p {margin-block-start: 0px; margin-block-end: 0px;}\")), React.createElement(\"div\", {\n    className: \"ce-chat-card-time-stamp \" + (props.isLoading && 'ce-chat-card-time-stamp-loading ce-chat-card-loading'),\n    style: _extends({}, styles$6.timeStampStyle, loadingBarStyle, props.timeStampStyle)\n  }, props.isLoading ? '.' : timeStamp));\n};\nvar styles$7 = {\n  style: {\n    fontFamily: 'Avenir'\n  }\n};\nvar RenderTrigger = function RenderTrigger(props) {\n  var _props$children = props.children,\n    children = _props$children === void 0 ? 'Loading...' : _props$children;\n  var useOnScreen = function useOnScreen(ref) {\n    var _useState = useState(false),\n      isIntersecting = _useState[0],\n      setIntersecting = _useState[1];\n    var observer = new IntersectionObserver(function (_ref) {\n      var entry = _ref[0];\n      setIntersecting(entry.isIntersecting);\n      if (entry.isIntersecting) {\n        props.onShow && props.onShow();\n      } else {\n        props.onHide && props.onHide();\n      }\n    });\n    useEffect(function () {\n      observer.observe(ref.current);\n      return function () {\n        return observer.disconnect();\n      };\n    }, []);\n    return isIntersecting;\n  };\n  var ref = useRef(null);\n  ref !== null && useOnScreen(ref);\n  return React.createElement(\"div\", {\n    ref: ref,\n    style: _extends({}, styles$7.style, props.style),\n    className: \"ce-chat-loader\"\n  }, children);\n};\nvar getDateTime = function getDateTime(date, timezoneOffset) {\n  if (timezoneOffset === void 0) {\n    timezoneOffset = 0;\n  }\n  date = date.replace(/ /g, 'T');\n  var year = date.substr(0, 4);\n  var month = date.substr(5, 2);\n  var day = date.substr(8, 2);\n  var hour = date.substr(11, 2);\n  var minute = date.substr(14, 2);\n  var second = date.substr(17, 2);\n  var d = new Date(year + \"-\" + month + \"-\" + day + \"T\" + hour + \":\" + minute + \":\" + second);\n  d.setHours(d.getHours() + timezoneOffset);\n  return d;\n};\nfunction formatTime(dateTime) {\n  var time = dateTime.toLocaleString('en-US');\n  return time.split(' ')[1].slice(0, -3) + ' ' + time.slice(-2);\n}\nfunction formatDateTime(dateTime) {\n  return dateTime.toLocaleString('en-US');\n}\nvar styles$8 = {\n  style: {\n    width: '1em',\n    height: '1em'\n  }\n};\nvar Spinner = function Spinner(props) {\n  return React.createElement(\"svg\", {\n    viewBox: \"0 0 1024 1024\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    className: \"ce-spinner\",\n    style: _extends({}, styles$8.style, props.style)\n  }, React.createElement(\"path\", {\n    d: \"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"\n  }), React.createElement(\"style\", null, \"\\n      .ce-spinner {\\n        animation-name: spin;\\n        animation-duration: 950ms;\\n        animation-iteration-count: infinite;\\n        animation-timing-function: linear; \\n      }\\n      @keyframes spin {\\n        from { transform:rotate(0deg); }\\n        to { transform:rotate(360deg); }\\n      }\\n      \"));\n};\nvar readLastMessage = function readLastMessage(username, chat) {\n  return chat.people.some(function (chatPerson) {\n    return chatPerson.person.username === username && chatPerson.last_read === chat.last_message.id;\n  });\n};\nvar renderLoading = function renderLoading() {\n  return [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1].map(function (_, i) {\n    return React.createElement(ChatCard, {\n      key: \"chat_\" + i,\n      isLoading: true\n    });\n  });\n};\nvar getDescription = function getDescription(chat) {\n  if (!chat.last_message.id) {\n    return 'Say hello!';\n  }\n  if (chat.last_message.text === null) {\n    return chat.last_message.attachments.length + \" attachments\";\n  }\n  return chat.last_message.text;\n};\nvar ChatList = function ChatList(props) {\n  var _props$activeChatId = props.activeChatId,\n    activeChatId = _props$activeChatId === void 0 ? -1 : _props$activeChatId;\n  var renderChats = function renderChats(chats) {\n    return chats.map(function (chat, index) {\n      var _chat$last_message$se;\n      var otherPerson = chat && chat.people.find(function (person) {\n        return person.person.username !== props.username;\n      });\n      var title = !chat ? '' : chat.is_direct_chat && otherPerson ? otherPerson.person.username : chat.title;\n      var timeStamp = getDateTime(chat.created, props.timezoneOffset).toString().substr(4, 6);\n      var hasNotification = props.username ? !readLastMessage(props.username, chat) : false;\n      return React.createElement(ChatCard, {\n        key: \"chat_\" + index,\n        chat: chat,\n        title: title,\n        description: getDescription(chat),\n        timeStamp: timeStamp,\n        isActive: activeChatId === chat.id,\n        hasNotification: hasNotification,\n        onClick: function onClick() {\n          return props.onChatCardClick && props.onChatCardClick(chat.id);\n        },\n        avatarUsername: (_chat$last_message$se = chat.last_message.sender) == null ? void 0 : _chat$last_message$se.username,\n        avatarUrl: chat.last_message.sender ? chat.last_message.sender.avatar : 'https://chat-engine-assets.s3.amazonaws.com/empty-chat-thumb.png',\n        renderChatCard: props.renderChatCard\n      });\n    });\n  };\n  if (props.renderChatList) {\n    return React.createElement(React.Fragment, null, props.renderChatList(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-chat-list\",\n    style: _extends({}, styles$1.style, props.isLoading ? {\n      overflowY: 'hidden'\n    } : {}, props.style)\n  }, React.createElement(ChatForm, {\n    onFormSubmit: props.onChatFormSubmit,\n    renderChatForm: props.renderChatForm\n  }), props.isLoading ? renderLoading() : renderChats(props.chats), props.hasMoreChats && React.createElement(RenderTrigger, {\n    onShow: props.onChatLoaderShow,\n    style: _extends({}, styles$1.loadingMoreChatsStyle, props.loadingMoreChatsStyle),\n    children: React.createElement(Spinner, null)\n  }));\n};\nvar styles$9 = {\n  style: {\n    height: '100%',\n    position: 'relative',\n    backgroundColor: 'white'\n  },\n  chatHeaderStyle: {},\n  messageListStyle: {\n    height: 'calc(100% - 85px - 48px)',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    position: 'relative',\n    backgroundColor: 'white'\n  },\n  messageFormStyle: {\n    width: '100%',\n    position: 'absolute',\n    bottom: '0px'\n  }\n};\nvar styles$a = {\n  style: {\n    width: '100%',\n    zIndex: 1,\n    backgroundColor: 'rgb(256, 256, 256, 0.92)',\n    padding: '18px 0px',\n    textAlign: 'center',\n    color: 'rgb(24, 144, 255)',\n    overflowX: 'hidden'\n  },\n  titleStyle: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    fontSize: '24px',\n    fontWeight: 600\n  },\n  subtitleStyle: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    fontSize: '12px'\n  },\n  mobileOptionStyle: {\n    width: '100%',\n    top: '32px',\n    textAlign: 'center',\n    color: 'rgb(24, 144, 255)',\n    overflow: 'hidden'\n  }\n};\nsetConfiguration({\n  maxScreenClass: 'xl',\n  gutterWidth: 0\n});\nvar ChatHeader = function ChatHeader(props) {\n  var _props$id = props.id,\n    id = _props$id === void 0 ? '' : _props$id,\n    _props$title = props.title,\n    title = _props$title === void 0 ? '' : _props$title,\n    _props$description = props.description,\n    description = _props$description === void 0 ? '' : _props$description;\n  if (props.renderChatHeader) {\n    return React.createElement(React.Fragment, null, props.renderChatHeader(props));\n  }\n  return React.createElement(Row, {\n    className: \"ce-chat-header\",\n    style: _extends({}, styles$a.style, props.style)\n  }, React.createElement(Col, {\n    xs: 2,\n    sm: 0,\n    className: \"ce-chat-header-mobile-option\",\n    style: _extends({}, styles$a.mobileOptionStyle, {\n      left: '6px'\n    }, props.mobileOptionStyle)\n  }), React.createElement(\"div\", {\n    id: \"ce-chat-feed-title-\" + id,\n    className: \"ce-chat-header-title\",\n    style: _extends({}, styles$a.titleStyle, props.titleStyle)\n  }, title), React.createElement(\"div\", {\n    className: \"ce-chat-header-subtitle\",\n    style: _extends({}, styles$a.subtitleStyle, props.subtitleStyle)\n  }, description), React.createElement(Col, {\n    xs: 2,\n    sm: 0,\n    className: \"ce-chat-header-mobile-option\",\n    style: _extends({}, styles$a.mobileOptionStyle, {\n      right: '6px'\n    }, props.mobileOptionStyle)\n  }));\n};\nvar styles$b = {\n  style: {},\n  messageStyle: {}\n};\nvar theirStyles = {\n  style: {\n    width: '100%',\n    position: 'relative'\n  },\n  senderUsernameStyle: {\n    width: 'calc(100% - 64px)',\n    fontFamily: 'Avenir',\n    paddingLeft: '62px',\n    paddingBottom: '2px',\n    color: 'rgba(0, 0, 0, .40)',\n    fontSize: '15px'\n  },\n  attachmentsStyle: {\n    display: 'auto',\n    paddingLeft: '48px',\n    width: 'calc(100% - 48px)'\n  },\n  bodyStyle: {\n    position: 'relative',\n    width: 'calc(100% - 2px)'\n  },\n  timeTagStyle: {\n    marginLeft: '4px',\n    fontSize: '14px',\n    fontFamily: 'Avenir',\n    color: 'rgba(0, 0, 0, 0.4)',\n    // CSS Transitions\n    transition: 'all .15s ease',\n    WebkitTransition: 'all .15s ease',\n    MozTransition: 'all .15s ease'\n  },\n  bubbleStyle: {\n    cursor: 'pointer',\n    display: 'inline-block',\n    color: 'black',\n    padding: '12px',\n    marginLeft: '48px',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    whiteSpace: 'pre-line',\n    backgroundColor: '#f1f0f0',\n    overflowWrap: 'anywhere',\n    maxWidth: 'calc(100% - 100px - 48px)',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  readsStyle: {\n    marginLeft: '48px',\n    width: 'calc(100% - 50px)'\n  },\n  readStyle: {\n    marginLeft: '4px',\n    \"float\": 'left'\n  },\n  avatarStyle: {\n    position: 'absolute',\n    bottom: '0px',\n    left: '2px'\n  }\n};\nvar myStyles = {\n  style: {\n    width: '100%',\n    textAlign: 'right'\n  },\n  senderUsernameStyle: {\n    display: 'none'\n  },\n  attachmentsStyle: {\n    display: 'auto',\n    marginLeft: '48px',\n    width: 'calc(100% - 48px)'\n  },\n  bodyStyle: {\n    position: 'relative',\n    width: 'calc(100% - 2px)'\n  },\n  timeTagStyle: {\n    marginRight: '4px',\n    fontSize: '14px',\n    fontFamily: 'Avenir',\n    color: 'rgb(24, 144, 255)',\n    // CSS Transitions\n    transition: 'all .15s ease',\n    WebkitTransition: 'all .15s ease',\n    MozTransition: 'all .15s ease'\n  },\n  bubbleStyle: {\n    color: 'white',\n    display: 'inline-block',\n    backgroundColor: '#1890ff',\n    cursor: 'pointer',\n    textAlign: 'left',\n    // Stay right but render text\n    padding: '12px',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    whiteSpace: 'pre-line',\n    overflowWrap: 'anywhere',\n    maxWidth: 'calc(100% - 100px)',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  readsStyle: {\n    width: '100%'\n  },\n  readStyle: {\n    \"float\": 'right',\n    marginLeft: '4px'\n  },\n  avatarStyle: {\n    display: 'none'\n  }\n};\nvar styles$c = {\n  style: {\n    borderRadius: '13px',\n    textAlign: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center',\n    backgroundSize: '14px',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  }\n};\nvar Dot = function Dot(props) {\n  var _useState = useState(''),\n    localAvatar = _useState[0],\n    setLocalAvatar = _useState[1];\n  var _props$username = props.username,\n    username = _props$username === void 0 ? '' : _props$username,\n    _props$isVisible = props.isVisible,\n    isVisible = _props$isVisible === void 0 ? true : _props$isVisible,\n    _props$avatarUrl = props.avatarUrl,\n    avatarUrl = _props$avatarUrl === void 0 ? '' : _props$avatarUrl;\n  var color = stringToColor(username);\n  useEffect(function () {\n    var newAvatar = avatarUrl !== null ? avatarUrl : '';\n    if (newAvatar.split('?')[0] !== localAvatar.split('?')[0]) {\n      setLocalAvatar(newAvatar);\n    }\n  });\n  return React.createElement(\"div\", {\n    className: \"ce-avatar-dot\",\n    style: _extends({}, styles$c.style, {\n      backgroundColor: localAvatar.length > 0 ? 'white' : color,\n      backgroundImage: localAvatar.length > 0 ? \"url(\" + localAvatar + \")\" : '',\n      width: isVisible ? '13px' : '0px',\n      height: isVisible ? '13px' : '0px'\n    }, props.style)\n  });\n};\nvar styles$d = {\n  style: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    textAlign: 'center',\n    paddingTop: '4px',\n    paddingBottom: '10px',\n    fontSize: '15px',\n    color: 'rgba(0, 0, 0, .40)'\n  }\n};\nvar DateTime = function DateTime(props) {\n  var _props$offset = props.offset,\n    offset = _props$offset === void 0 ? 0 : _props$offset;\n  return React.createElement(\"div\", {\n    className: \"ce-message-date-text\",\n    style: _extends({}, styles$d.style, props.style)\n  }, formatDateTime(getDateTime(props.created, offset)));\n};\nvar styles$e = {\n  style: {\n    cursor: 'pointer',\n    fontFamily: 'Avenir',\n    padding: '12px',\n    borderRadius: '14px',\n    display: 'inline-block',\n    marginRight: '2px',\n    marginBottom: '4px',\n    color: '#434343',\n    backgroundColor: 'white',\n    border: '1px solid #434343',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  hoveredStyle: {\n    border: '1px solid #1890ff'\n  }\n};\nvar images = ['jpg', 'jpeg', 'png', 'gif', 'tiff'];\nvar isImage = function isImage(fileName) {\n  var dotSplit = fileName.split('.');\n  return dotSplit.length > 0 && images.indexOf(dotSplit[dotSplit.length - 1].toLowerCase()) !== -1;\n};\nvar getFileName = function getFileName(fileUrl) {\n  var slashSplit = fileUrl.split('/');\n  var nameAndHash = slashSplit[slashSplit.length - 1];\n  return nameAndHash.split('?')[0];\n};\nvar urlOrLoading = function urlOrLoading(url) {\n  return url ? getFileName(url) : 'Loading...';\n};\nvar File = function File(props) {\n  var _useState = useState(false),\n    isHovered = _useState[0],\n    setIsHovered = _useState[1];\n  return React.createElement(\"div\", {\n    onMouseEnter: function onMouseEnter() {\n      return setIsHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setIsHovered(false);\n    },\n    onClick: function onClick() {\n      return props.url && window.open(props.url);\n    },\n    style: _extends({}, styles$e.style, !props.url ? {\n      border: '1px solid grey'\n    } : {}, isHovered ? styles$e.hoveredStyle : {}, props.style, isHovered ? props.hoveredStyle : {}),\n    className: \"ce-file \" + props.className\n  }, props.fileName ? props.fileName : \"\\uD83D\\uDCC4 \" + urlOrLoading(props.url));\n};\nvar styles$f = {\n  style: {\n    cursor: 'pointer',\n    height: '30vw',\n    width: '30vw',\n    maxHeight: '200px',\n    maxWidth: '200px',\n    minHeight: '100px',\n    minWidth: '100px',\n    padding: '2px',\n    objectFit: 'cover',\n    borderRadius: '0.3em',\n    backgroundColor: 'white',\n    border: '1px solid #434343',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  hoveredStyle: {\n    border: '1px solid #1890ff'\n  }\n};\nvar Image = function Image(props) {\n  var url = props.url;\n  var _useState = useState(false),\n    isHovered = _useState[0],\n    setIsHovered = _useState[1];\n  var loadingUrl = 'https://chat-engine-assets.s3.amazonaws.com/loading.gif';\n  return React.createElement(\"img\", {\n    onMouseEnter: function onMouseEnter() {\n      return setIsHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setIsHovered(false);\n    },\n    src: url ? url : loadingUrl,\n    alt: url ? url : loadingUrl,\n    onClick: function onClick() {\n      return url && window.open(url);\n    },\n    style: _extends({}, styles$f.style, isHovered ? styles$f.hoveredStyle : {}, props.style, isHovered ? props.hoveredStyle : {}),\n    className: \"ce-image \" + props.className\n  });\n};\nvar Message = function Message(props) {\n  var _props$lastMessage = props.lastMessage,\n    lastMessage = _props$lastMessage === void 0 ? null : _props$lastMessage,\n    message = props.message,\n    _props$nextMessage = props.nextMessage,\n    nextMessage = _props$nextMessage === void 0 ? null : _props$nextMessage,\n    _props$chat = props.chat,\n    chat = _props$chat === void 0 ? null : _props$chat,\n    _props$isSending = props.isSending,\n    isSending = _props$isSending === void 0 ? false : _props$isSending,\n    _props$isMyMessage = props.isMyMessage,\n    isMyMessage = _props$isMyMessage === void 0 ? false : _props$isMyMessage,\n    _props$showDateTime = props.showDateTime,\n    showDateTime = _props$showDateTime === void 0 ? false : _props$showDateTime;\n  var _useState = useState(false),\n    hovered = _useState[0],\n    setHovered = _useState[1];\n  var styles = isMyMessage ? myStyles : theirStyles;\n  var topRadius = !lastMessage || lastMessage.sender_username !== message.sender_username ? '1.3em' : '0.3em';\n  var bottomRadius = !nextMessage || nextMessage.sender_username !== message.sender_username ? '1.3em' : '0.3em';\n  var borderStyle = {\n    borderRadius: isMyMessage ? \"1.3em \" + topRadius + \" \" + bottomRadius + \" 1.3em\" : topRadius + \" 1.3em 1.3em \" + bottomRadius\n  };\n  var sendingStyle = isSending ? {\n    backgroundColor: '#40a9ff'\n  } : {};\n  var isLastMessage = !nextMessage || nextMessage.sender_username !== message.sender_username;\n  var paddingBottom = !nextMessage || nextMessage.sender_username !== message.sender_username ? '12px' : '2px';\n  var text = message.text !== null ? message.text.replace(/<a /g, \"<a style=\\\"color: 'white';\\\" \") : '';\n  var renderAttachments = function renderAttachments(renderImage) {\n    var attachments = message && message.attachments ? message.attachments : [];\n    return attachments.map(function (attachment, index) {\n      var fileName = getFileName(attachment.file);\n      if (renderImage && isImage(fileName)) {\n        return React.createElement(Image, {\n          key: \"attachment_\" + index,\n          url: attachment.file !== null && !props.isSending ? attachment.file : undefined,\n          style: _extends({}, styles.attachmentsImageStyle, props.attachmentsImageStyle),\n          className: \"ce-message-image\"\n        });\n      } else if (!renderImage && !isImage(fileName)) {\n        return React.createElement(File, {\n          key: \"attachment_\" + index,\n          url: attachment.file !== null && !props.isSending ? attachment.file : undefined,\n          style: _extends({}, styles.attachmentsFileStyle, props.attachmentsFileStyle),\n          className: \"ce-message-file\"\n        });\n      } else {\n        return React.createElement(\"div\", {\n          key: \"attachment_\" + index\n        });\n      }\n    });\n  };\n  var renderReads = function renderReads() {\n    var chatPeople = chat !== null ? chat.people : [];\n    return chatPeople.map(function (chatPerson, index) {\n      return React.createElement(Dot, {\n        key: \"read_\" + index,\n        avatarUrl: chatPerson.person.avatar,\n        username: chatPerson.person.username,\n        isVisible: message.id === chatPerson.last_read,\n        style: _extends({}, styles.readStyle, props.readStyle)\n      });\n    });\n  };\n  if (props.renderMessage) {\n    return React.createElement(React.Fragment, null, props.renderMessage(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-\" + (isMyMessage ? 'my' : 'their') + \"-message\",\n    style: _extends({}, styles.style, {\n      paddingBottom: paddingBottom\n    }, props.style)\n  }, showDateTime && React.createElement(DateTime, {\n    created: message.created,\n    style: _extends({}, styles.dateTimeStyle, props.dateTimeStyle)\n  }), (lastMessage === null || lastMessage.sender_username !== message.sender_username) && React.createElement(\"div\", {\n    style: _extends({}, styles.senderUsernameStyle, props.senderUsernameStyle),\n    className: \"ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-sender-username\"\n  }, message.sender_username), React.createElement(\"div\", {\n    style: _extends({}, styles.attachmentsStyle, props.attachmentsStyle),\n    className: \"\\n          ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-attachments \\n          ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-images\\n        \"\n  }, renderAttachments(true)), React.createElement(\"div\", {\n    style: _extends({}, styles.attachmentsStyle, props.attachmentsStyle),\n    className: \"\\n            ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-attachments \\n            ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-files\\n          \"\n  }, renderAttachments(false)), message.text !== null && React.createElement(\"div\", {\n    onMouseEnter: function onMouseEnter() {\n      return setHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(false);\n    },\n    style: _extends({}, styles.bodyStyle, props.bodyStyle)\n  }, isMyMessage && React.createElement(\"span\", {\n    className: \"ce-my-message-timestamp\",\n    style: _extends({}, styles.timeTagStyle, {\n      opacity: hovered ? '1' : '0'\n    }, props.timeTagStyle)\n  }, formatTime(getDateTime(message.created, props.timezoneOffset))), React.createElement(\"div\", {\n    className: \"\\n              ce-\" + (isMyMessage ? 'my' : 'their') + \"-message-body\\n              \" + (isSending && 'ce-my-message-sending-body') + \"\\n            \",\n    style: _extends({}, styles.bubbleStyle, borderStyle, sendingStyle, props.bubbleStyle),\n    dangerouslySetInnerHTML: {\n      __html: text\n    }\n  }), React.createElement(\"style\", null, \"p {margin-block-start: 0px; margin-block-end: 0px;}\"), !isMyMessage && React.createElement(\"span\", {\n    className: \"ce-their-message-timestamp\",\n    style: _extends({}, styles.timeTagStyle, {\n      opacity: hovered ? '1' : '0'\n    }, props.timeTagStyle)\n  }, formatTime(getDateTime(message.created, props.timezoneOffset))), React.createElement(Avatar, {\n    username: message.sender_username,\n    style: _extends({}, styles.avatarStyle, isLastMessage ? {} : {\n      display: 'none'\n    }, props.avatarStyle),\n    avatarUrl: message.sender && message.sender !== null && message.sender.avatar !== null ? message.sender.avatar : undefined\n  })), React.createElement(\"div\", {\n    style: _extends({}, styles.readsStyle, props.readsStyle),\n    className: \"ce-\" + (isMyMessage ? 'my' : 'their') + \"-reads-row\"\n  }, renderReads()));\n};\nvar MessageList = function MessageList(props) {\n  var _props$chat, _props$chat2;\n  var _props$messages = props.messages,\n    messages = _props$messages === void 0 ? [] : _props$messages;\n  var messagesObject = _.mapKeys(messages, 'created');\n  var keys = Object.keys(messagesObject).sort();\n  var date = function date(_date) {\n    return _date ? _date.substr(0, 10) : null;\n  };\n  var renderMessages = function renderMessages(keys) {\n    return keys.map(function (key, index) {\n      var message = messagesObject[key];\n      var lastKey = index === 0 ? '' : keys[index - 1];\n      var nextKey = index === keys.length - 1 ? '' : keys[index + 1];\n      var lastDate = lastKey !== '' ? date(lastKey) : undefined;\n      var thisDate = key !== '' ? date(key) : undefined;\n      var showDateTime = !lastDate || lastDate !== thisDate;\n      var isMyMessage = props.username === message.sender_username;\n      return React.createElement(\"div\", {\n        key: \"message_\" + index,\n        id: \"ce-message-\" + message.id\n      }, index === keys.length - 1 && React.createElement(RenderTrigger, {\n        onShow: props.onBottomMessageShow,\n        onHide: props.onBottomMessageHide,\n        children: \"\"\n      }), React.createElement(Message, {\n        chat: props.chat,\n        message: message,\n        lastMessage: messagesObject[lastKey],\n        nextMessage: messagesObject[nextKey],\n        timezoneOffset: props.timezoneOffset,\n        isMyMessage: isMyMessage,\n        isSending: !message.id,\n        showDateTime: showDateTime,\n        renderMessage: props.renderMessage,\n        style: _extends({}, styles$b.messageStyle, props.messageStyle)\n      }));\n    });\n  };\n  if (props.renderMessageList) {\n    return React.createElement(React.Fragment, null, props.renderMessageList(props));\n  }\n  return (\n    // Used for scrolling\n    React.createElement(\"div\", {\n      className: \"ce-message-list\",\n      id: \"ce-message-list-\" + ((_props$chat = props.chat) == null ? void 0 : _props$chat.id),\n      style: _extends({}, styles$b.style, props.style)\n    }, React.createElement(\"div\", {\n      className: \"ce-message-list-content\",\n      id: \"ce-message-list-content-\" + ((_props$chat2 = props.chat) == null ? void 0 : _props$chat2.id)\n    }, props.hasMoreMessages && React.createElement(RenderTrigger, {\n      onShow: props.onMessageLoaderShow,\n      onHide: props.onMessageLoaderHide,\n      children: React.createElement(Spinner, {\n        style: {\n          position: 'relative',\n          left: 'calc(50% - 0.625em)',\n          width: '1.25em',\n          height: '1.25em',\n          font: 'red'\n        }\n      })\n    }), renderMessages(keys)))\n  );\n};\nvar styles$g = {\n  style: {\n    paddingTop: '4px'\n  },\n  inputStyle: {\n    border: '1px solid white',\n    width: 'calc(100% - 24px - 116px)',\n    outline: 'none',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    paddingLeft: '12px',\n    paddingRight: '12px',\n    resize: 'none',\n    overflowX: 'hidden',\n    // Tweak Position\n    position: 'relative',\n    top: '6px'\n  },\n  sendButtonStyle: {\n    cursor: 'pointer',\n    fontFamily: 'Avenir',\n    display: 'inline-block',\n    borderRadius: '8px',\n    padding: '6px 12px',\n    color: 'white',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n    // Tweak Position\n    position: 'relative',\n    bottom: '6px'\n  },\n  draftAttachmentStyle: {\n    padding: '6px',\n    display: 'inline-block',\n    position: 'relative'\n  },\n  draftAttachmentRemoveStyle: {\n    position: 'absolute',\n    top: '-6px',\n    right: '-6px',\n    width: '30px',\n    height: '30px',\n    color: '#40a9ff',\n    backgroundColor: 'white',\n    border: '1px solid rgb(67, 67, 67)',\n    borderRadius: '50%',\n    cursor: 'pointer',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease'\n  },\n  draftImageStyle: {\n    padding: '6px',\n    height: '60px',\n    width: '60px'\n  },\n  draftFileStyle: {}\n};\nvar styles$h = {\n  style: {\n    height: '0px',\n    display: 'inline',\n    padding: '6px 12px',\n    position: 'relative',\n    bottom: '6px'\n  },\n  iconStyle: {\n    backgroundColor: 'white',\n    border: '1px solid white',\n    cursor: 'pointer'\n  }\n};\nvar AttachmentInput = function AttachmentInput(props) {\n  var _useState = useState(false),\n    hovered = _useState[0],\n    setHovered = _useState[1];\n  var hoverStyle = {\n    color: hovered ? '#06c' : '#444'\n  };\n  var onSelect = function onSelect(e) {\n    e.preventDefault();\n    var target = e.target;\n    var files = target.files;\n    props.onSelectFiles && props.onSelectFiles(files);\n  };\n  return React.createElement(\"form\", {\n    className: \"ce-attachment-input\",\n    encType: \"multipart/form-data\",\n    style: _extends({}, styles$h.style, props.style)\n  }, React.createElement(\"label\", {\n    htmlFor: \"files\",\n    id: \"ce-upload-document-button\"\n  }, React.createElement(\"span\", {\n    className: \"ce-attachment-icon\",\n    onMouseEnter: function onMouseEnter() {\n      return setHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(false);\n    },\n    style: _extends({}, styles$h.iconStyle, hoverStyle, props.iconStyle),\n    onClick: function onClick() {}\n  }, \"\\uD83D\\uDCCE\")), React.createElement(\"input\", {\n    multiple: true,\n    id: \"files\",\n    style: {\n      visibility: 'hidden',\n      height: '0px',\n      width: '0px'\n    },\n    type: \"file\",\n    onChange: onSelect\n  }));\n};\nvar MessageForm = function MessageForm(props) {\n  var _props$label = props.label,\n    label = _props$label === void 0 ? '' : _props$label;\n  var _useState = useState(0),\n    iter = _useState[0],\n    setIter = _useState[1]; // Forces attachments update\n\n  var _useState2 = useState(''),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var _useState3 = useState(0),\n    height = _useState3[0],\n    setHeight = _useState3[1];\n  var _useState4 = useState(false),\n    buttonHover = _useState4[0],\n    setButtonHover = _useState4[1];\n  var _useState5 = useState([]),\n    attachments = _useState5[0],\n    setAttachments = _useState5[1];\n  useEffect(function () {\n    return resize();\n  }, []);\n  var resize = function resize() {\n    var textarea = document.getElementById('msg-textarea');\n    if (textarea !== null) {\n      textarea.style.height = '';\n      textarea.style.height = Math.min(textarea.scrollHeight, 150) + 'px';\n      setHeight(Math.min(textarea.scrollHeight, 150));\n    }\n  };\n  var onChange = function onChange(e) {\n    setValue(e.target.value);\n    props.onChange && props.onChange(e);\n    resize();\n  };\n  var onSubmit = function onSubmit() {\n    var created = new Date().toISOString().replace('T', ' ').replace('Z', Math.floor(Math.random() * 1000) + \"+00:00\");\n    var localAttachments = attachments.map(function (attachment) {\n      return {\n        id: -1,\n        created: new Date().toString(),\n        file: attachment.name,\n        blob: attachment\n      };\n    });\n    var message = {\n      attachments: localAttachments,\n      text: value,\n      sender_username: props.username ? props.username : '',\n      custom_json: {},\n      created: created\n    };\n    props.onSubmit && props.onSubmit(message);\n    setValue('');\n    setAttachments([]);\n    resize();\n  };\n  var onKeyDown = function onKeyDown(e) {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      if (value.length > 0) {\n        onSubmit();\n      }\n    }\n  };\n  var onRemove = function onRemove(index) {\n    if (attachments && attachments !== null) {\n      var newAttachments = attachments;\n      newAttachments.splice(index, 1);\n      setAttachments(newAttachments);\n      setIter(iter + 1);\n    }\n  };\n  var renderAttachments = function renderAttachments(renderImage) {\n    if (!attachments || attachments === null) return React.createElement(\"div\", null);\n    return Array.from(attachments).map(function (attachment, index) {\n      var url = URL.createObjectURL(attachment);\n      return React.createElement(\"span\", {\n        key: \"draft-\" + index,\n        className: \"ce-draft-attachment-wrapper\",\n        style: _extends({}, styles$g.draftAttachmentStyle, props.draftAttachmentStyle)\n      }, renderImage && isImage(attachment.name) && React.createElement(Image, {\n        url: url,\n        style: _extends({}, styles$g.draftImageStyle, props.draftImageStyle),\n        className: \"ce-draft-image\"\n      }), !renderImage && !isImage(attachment.name) && React.createElement(File, {\n        url: url,\n        fileName: \"\\uD83D\\uDCC4 \" + attachment.name,\n        style: _extends({}, styles$g.draftFileStyle, props.draftFileStyle),\n        className: \"ce-draft-file\"\n      }), (!renderImage && !isImage(attachment.name) || renderImage && isImage(attachment.name)) && React.createElement(\"button\", {\n        className: \"ce-message-attachment-remove-btn\",\n        onClick: function onClick() {\n          return onRemove(index);\n        },\n        style: _extends({}, styles$g.draftAttachmentRemoveStyle, props.draftAttachmentRemoveStyle)\n      }, \"\\u274C\"));\n    });\n  };\n  if (props.renderMessageForm) {\n    return React.createElement(React.Fragment, null, props.renderMessageForm(props));\n  }\n  return React.createElement(\"div\", {\n    id: \"ce-message-form\",\n    style: _extends({}, styles$g.style, props.style),\n    className: \"ce-message-form\"\n  }, React.createElement(\"div\", {\n    className: \"ce-message-form-attachments-row\"\n  }, renderAttachments(true)), React.createElement(\"div\", {\n    className: \"ce-message-form-attachments-row\"\n  }, renderAttachments(false)), React.createElement(\"textarea\", {\n    id: \"msg-textarea\",\n    className: \"ce-message-form-input\",\n    value: value,\n    placeholder: label,\n    rows: 1,\n    onKeyDown: onKeyDown,\n    onChange: onChange,\n    style: _extends({}, styles$g.inputStyle, {\n      overflowY: height === 150 ? 'scroll' : 'hidden'\n    }, props.inputStyle)\n  }), React.createElement(AttachmentInput, {\n    onSelectFiles: function onSelectFiles(files) {\n      files !== null && setAttachments(Array.from(files));\n    },\n    style: _extends({}, styles$g.attachmentInputStyle, props.attachmentInputStyle),\n    iconStyle: _extends({}, styles$g.attachmentInputIconStyle, props.attachmentInputIconStyle)\n  }), React.createElement(\"div\", {\n    id: \"ce-send-message-button\",\n    onMouseEnter: function onMouseEnter() {\n      return setButtonHover(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setButtonHover(false);\n    },\n    onClick: onSubmit,\n    style: _extends({}, styles$g.sendButtonStyle, {\n      backgroundColor: buttonHover ? '#40a9ff' : '#1890ff'\n    }, props.sendButtonStyle)\n  }, \"Send\"));\n};\nvar styles$i = {\n  style: {\n    width: '100%',\n    textAlign: 'center'\n  },\n  gifStyle: {\n    width: '50%',\n    maxWidth: '200px'\n  },\n  textStyle: {\n    color: '#afafaf',\n    fontWeight: 600,\n    fontSize: '14px',\n    fontFamily: 'Avenir'\n  }\n};\nvar WelcomeGif = function WelcomeGif(props) {\n  if (props.renderWelcomeGif) {\n    return React.createElement(React.Fragment, null, props.renderWelcomeGif(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-ice-breaker-wrapper\",\n    style: _extends({}, styles$i.style, props.style)\n  }, React.createElement(\"img\", {\n    className: \"ce-ice-breaker-gif\",\n    style: _extends({}, styles$i.gifStyle, props.gifStyle),\n    src: \"https://chat-engine-assets.s3.amazonaws.com/welcome_gifs/peace.gif\",\n    alt: \"chat-engine-ice-breaker\"\n  }), React.createElement(\"div\", {\n    className: \"ce-ice-breaker-text\",\n    style: _extends({}, styles$i.textStyle, props.textStyle)\n  }, \"No messages here yet...\"));\n};\nvar getDescription$1 = function getDescription(chat, timezoneOffset) {\n  if (timezoneOffset === void 0) {\n    timezoneOffset = 0;\n  }\n  if (!chat) {\n    return '⬅️ ⬅️ ⬅️';\n  } else if (chat.last_message.created && chat.last_message.created.length > 0) {\n    var dateTime = getDateTime(chat.last_message.created, timezoneOffset);\n    var formattedDateTime = formatDateTime(dateTime);\n    return \"Active \" + formattedDateTime;\n  } else {\n    return 'Say hello!';\n  }\n};\nvar ChatFeed = function ChatFeed(props) {\n  var chat = props.chat;\n  var otherPerson = chat && chat.people.find(function (person) {\n    return person.person.username !== props.username;\n  });\n  var title = props.isLoading ? React.createElement(Spinner, null) : !chat ? 'Create a chat!' : chat.is_direct_chat && otherPerson ? otherPerson.person.username : chat.title;\n  if (props.renderChatFeed) {\n    return React.createElement(React.Fragment, null, props.renderChatFeed(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-chat-feed\",\n    style: _extends({}, styles$9.style, props.style)\n  }, React.createElement(ChatHeader, {\n    title: title,\n    description: props.isLoading ? 'Loading...' : getDescription$1(chat, props.timezoneOffset),\n    renderChatHeader: props.renderChatHeader,\n    style: _extends({}, styles$9.chatHeaderStyle, props.chatHeaderStyle)\n  }), React.createElement(MessageList, {\n    chat: chat,\n    messages: props.messages,\n    username: props.username,\n    timezoneOffset: props.timezoneOffset,\n    hasMoreMessages: props.hasMoreMessages,\n    onMessageLoaderShow: props.onMessageLoaderShow,\n    onMessageLoaderHide: props.onMessageLoaderHide,\n    onBottomMessageShow: props.onBottomMessageShow,\n    onBottomMessageHide: props.onBottomMessageHide,\n    renderMessageList: props.renderMessageList,\n    renderMessage: props.renderMessage,\n    style: _extends({}, styles$9.messageListStyle, props.messageListStyle)\n  }), props.messages.length === 0 && !props.isLoading && React.createElement(WelcomeGif, {\n    style: {\n      position: 'absolute',\n      top: 'calc(50% - 112px)'\n    }\n  }), React.createElement(MessageForm, {\n    label: \"Send a message...\",\n    username: props.username,\n    onSubmit: props.onMessageFormSubmit,\n    renderMessageForm: props.renderMessageForm,\n    style: _extends({}, styles$9.messageFormStyle, props.messageFormStyle)\n  }));\n};\nvar styles$j = {\n  style: {\n    backgroundColor: 'white',\n    width: '100%',\n    height: '100%'\n  },\n  chatTitleStyle: {\n    width: '100%',\n    textAlign: 'center',\n    fontFamily: 'Avenir',\n    fontSize: '18px',\n    fontWeight: 600\n  }\n};\nvar styles$k = {\n  style: {\n    width: '100%',\n    paddingTop: '12px',\n    height: 'calc(44px + 14px)'\n  },\n  oneAvatarStyle: {\n    avatarOne: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px)'\n    }\n  },\n  twoAvatarsStyle: {\n    avatarOne: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 15px)'\n    },\n    avatarTwo: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 44px - 22px + 15px)'\n    }\n  },\n  threeAvatarsStyle: {\n    avatarOne: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 24px)'\n    },\n    avatarTwo: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 24px - 44px)'\n    },\n    avatarThree: {\n      \"float\": 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 44px - 44px + 24px)'\n    }\n  }\n};\nvar ChatAvatars = function ChatAvatars(props) {\n  var _props$users = props.users,\n    users = _props$users === void 0 ? [] : _props$users;\n  var getStyle = function getStyle(people, styles) {\n    if (people.length === 1) {\n      return styles.oneAvatarStyle ? styles.oneAvatarStyle : {};\n    } else if (people.length === 2) {\n      return styles.twoAvatarsStyle ? styles.twoAvatarsStyle : {};\n    } else {\n      return styles.threeAvatarsStyle ? styles.threeAvatarsStyle : {};\n    }\n  };\n  var getPeopleToRender = function getPeopleToRender(people) {\n    if (props.isDirectChat) {\n      var otherPerson = users.find(function (person) {\n        return person.username !== props.username;\n      });\n      return otherPerson ? [otherPerson] : [];\n    }\n    return people.slice(0, 3);\n  };\n  var topPeople = getPeopleToRender(users);\n  var style = getStyle(users, styles$k);\n  var propsStyle = getStyle(users, props);\n  if (props.renderChatAvatars) {\n    return React.createElement(React.Fragment, null, props.renderChatAvatars(props));\n  }\n  return React.createElement(\"div\", {\n    className: \"ce-chat-avatars\",\n    style: _extends({}, styles$k.style, props.style)\n  }, React.createElement(Avatar, {\n    className: \"ce-chat-avatar-1\",\n    username: topPeople[0] ? topPeople[0].username : undefined,\n    avatarUrl: topPeople[0] ? topPeople[0].avatar : undefined,\n    style: _extends({}, style.avatarOne, {\n      display: topPeople[0] ? 'inherit' : 'none'\n    }, propsStyle.avatarOne)\n  }), React.createElement(Avatar, {\n    className: \"ce-chat-avatar-2\",\n    username: topPeople[1] ? topPeople[1].username : undefined,\n    avatarUrl: topPeople[1] ? topPeople[1].avatar : undefined,\n    style: _extends({}, style.avatarTwo, {\n      display: topPeople[1] ? 'inherit' : 'none'\n    }, propsStyle.avatarTwo)\n  }), React.createElement(Avatar, {\n    className: \"ce-chat-avatar-3\",\n    username: topPeople[2] ? topPeople[2].username : undefined,\n    avatarUrl: topPeople[2] ? topPeople[2].avatar : undefined,\n    style: _extends({}, style.avatarThree, {\n      display: topPeople[2] ? 'inherit' : 'none'\n    }, propsStyle.avatarThree)\n  }));\n};\nvar styles$l = {\n  style: {},\n  avatarStyle: {\n    position: 'absolute',\n    left: '12px',\n    top: '2px'\n  },\n  usernameStyle: {\n    fontFamily: 'Avenir',\n    position: 'absolute',\n    left: '72px',\n    top: '12px',\n    width: 'calc(100% - 84px - 52px - 12px)'\n  },\n  deleteButtonStyle: {\n    position: 'absolute',\n    right: '12px',\n    top: '8px'\n  },\n  optionStyle: {\n    fontFamily: 'Avenir',\n    padding: '8px 12px',\n    cursor: 'pointer'\n  },\n  addMemberStyle: {\n    width: 'calc(100% - 12px - 12px)',\n    position: 'relative',\n    left: '12px'\n  },\n  addMemberInputStyle: {\n    border: '1px solid rgb(24, 144, 255)'\n  }\n};\nvar styles$m = {\n  style: {\n    position: 'relative'\n  },\n  inputStyle: {\n    width: '100%',\n    height: '36px',\n    padding: '0px 12px',\n    boxSizing: 'border-box',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    outline: 'none',\n    borderRadius: '24px'\n  },\n  closeStyle: {\n    cursor: 'pointer',\n    position: 'absolute',\n    top: '5px',\n    right: '12px'\n  },\n  optionsStyle: {\n    overflow: 'hidden'\n  }\n};\nvar emptyEvent = {\n  target: {\n    value: ''\n  }\n};\nvar getOptions = function getOptions(value, options, maxVisibleOptions) {\n  return options.filter(function (option) {\n    return JSON.stringify(option).toLowerCase().indexOf(value.toLowerCase()) !== -1;\n  }).slice(0, maxVisibleOptions);\n};\nvar Autocomplete = function Autocomplete(props) {\n  var ref = useRef(null);\n  var didMountRef = useRef(false);\n  var _useState = useState(''),\n    value = _useState[0],\n    setValue = _useState[1];\n  var _useState2 = useState(false),\n    showOptions = _useState2[0],\n    setShowOptions = _useState2[1];\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return function () {\n      return document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  var handleClickOutside = function handleClickOutside(event) {\n    if (event.target !== null && ref && ref.current !== null && !ref.current.contains(event.target)) {\n      setShowOptions(false);\n    }\n  };\n  var _onChange = function onChange(event, showOptions) {\n    setValue(event.target.value);\n    setShowOptions(showOptions);\n    props.onChange && props.onChange(event);\n  };\n  var renderOptions = function renderOptions(value) {\n    var max = props.maxVisibleOptions ? props.maxVisibleOptions : 3;\n    return getOptions(value, props.options, max).map(function (option, index) {\n      return React.createElement(\"div\", {\n        key: \"option-\" + index\n      }, props.renderOption ? props.renderOption(option) : option.toString());\n    });\n  };\n  return React.createElement(\"div\", {\n    ref: ref,\n    className: \"ce-autocomplete\",\n    style: _extends({}, styles$m.style, props.style)\n  }, React.createElement(\"input\", {\n    className: \"ce-autocomplete-input\",\n    value: value,\n    placeholder: props.label,\n    style: _extends({}, styles$m.inputStyle, props.inputStyle),\n    onChange: function onChange(e) {\n      return _onChange(e, true);\n    },\n    onFocus: function onFocus(e) {\n      setShowOptions(true);\n      props.onFocus && props.onFocus(e);\n    }\n  }), React.createElement(\"div\", {\n    className: \"ce-autocomplete-close\",\n    onClick: function onClick() {\n      return _onChange(emptyEvent, true);\n    },\n    style: _extends({}, styles$m.closeStyle, {\n      display: value.length > 0 ? 'inline-block' : 'none'\n    }, props.closeStyle)\n  }, \"\\u274C\"), React.createElement(\"div\", {\n    style: _extends({}, styles$m.optionsStyle, {\n      height: showOptions ? 'auto' : '0px'\n    }, props.optionsStyle)\n  }, renderOptions(value)));\n};\nvar styles$n = {\n  style: {\n    borderTop: '1px solid #f0f0f0'\n  },\n  barStyle: {\n    position: 'relative',\n    cursor: 'pointer',\n    backgroundColor: 'white',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n    fontFamily: 'Avenir',\n    fontSize: '17px',\n    padding: '12px',\n    fontWeight: 600\n  },\n  barHoveredStyle: {\n    backgroundColor: '#f0f0f0'\n  },\n  iconStyle: {\n    position: 'absolute',\n    right: '12px',\n    bottom: '15px',\n    width: '1em',\n    height: '1em',\n    transition: \"transform 100ms\"\n  },\n  bodyStyle: {\n    height: '0px',\n    overflow: 'hidden',\n    transition: 'all 1.33s ease',\n    WebkitTransition: 'all 1.33s ease',\n    MozTransition: 'all 1.33s ease'\n  },\n  bodyExpandedStyle: {\n    height: 'auto'\n  }\n};\nvar Dropdown = function Dropdown(props) {\n  var _useState = useState(false),\n    hovered = _useState[0],\n    setHovered = _useState[1];\n  var _useState2 = useState(false),\n    expanded = _useState2[0],\n    setExpanded = _useState2[1];\n  return React.createElement(\"div\", {\n    id: props.id,\n    className: \"ce-dropdown \" + props.className,\n    style: _extends({}, styles$n.style, props.style)\n  }, React.createElement(\"div\", {\n    className: \"ce-dropdown-label\",\n    onMouseEnter: function onMouseEnter() {\n      return setHovered(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      return setHovered(false);\n    },\n    onClick: function onClick() {\n      return setExpanded(!expanded);\n    },\n    style: _extends({}, styles$n.barStyle, hovered && styles$n.barHoveredStyle, props.barStyle, hovered && props.barHoveredStyle)\n  }, props.label, React.createElement(\"svg\", {\n    className: \"ce-dropdown-icon\",\n    style: _extends({}, styles$n.iconStyle, expanded ? {\n      transform: \"rotate(-90deg)\"\n    } : {\n      transform: \"rotate(0deg)\"\n    }, props.iconStyle),\n    viewBox: \"64 64 896 896\",\n    focusable: \"false\",\n    \"data-icon\": \"left\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\"\n  }, React.createElement(\"path\", {\n    d: \"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"\n  }))), React.createElement(\"div\", {\n    className: \"ce-dropdown-children\",\n    style: _extends({}, styles$n.bodyStyle, expanded && styles$n.bodyExpandedStyle, props.bodyStyle, expanded && props.bodyExpandedStyle)\n  }, props.children));\n};\nvar PeopleSettings = function PeopleSettings(props) {\n  var _props$chat = props.chat,\n    chat = _props$chat === void 0 ? {\n      people: []\n    } : _props$chat,\n    _props$peopleToInvite = props.peopleToInvite,\n    peopleToInvite = _props$peopleToInvite === void 0 ? [] : _props$peopleToInvite;\n  var renderChatPeople = function renderChatPeople(chatPeople) {\n    return chatPeople.map(function (chatPerson, index) {\n      var person = chatPerson.person;\n      return React.createElement(\"div\", {\n        key: \"member-\" + index,\n        style: {\n          height: '52px',\n          position: 'relative'\n        }\n      }, React.createElement(Avatar, {\n        username: person.username,\n        avatarUrl: person.avatar,\n        isOnline: person.is_online,\n        style: _extends({}, styles$l.avatarStyle, props.avatarStyle)\n      }), React.createElement(\"div\", {\n        style: _extends({}, styles$l.usernameStyle, props.usernameStyle)\n      }, person.username), props.canDelete && React.createElement(Button, {\n        type: \"danger\",\n        className: \"ce-member-delete-button\",\n        onClick: function onClick() {\n          return props.onRemovePersonClick && props.onRemovePersonClick(person);\n        },\n        style: _extends({}, styles$l.deleteButtonStyle, props.deleteButtonStyle)\n      }, React.createElement(\"svg\", {\n        viewBox: \"64 64 896 896\",\n        focusable: \"false\",\n        \"data-icon\": \"close\",\n        width: \"1em\",\n        height: \"1em\",\n        fill: \"currentColor\",\n        \"aria-hidden\": \"true\"\n      }, React.createElement(\"path\", {\n        d: \"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z\"\n      }))));\n    });\n  };\n  var renderChatPeopleOption = function renderChatPeopleOption(option) {\n    var person = option;\n    var onInvitePersonClick = props.onInvitePersonClick;\n    return React.createElement(\"div\", {\n      className: \"ce-add-member-option\",\n      style: _extends({}, styles$l.optionStyle, props.optionStyle),\n      onClick: function onClick() {\n        return onInvitePersonClick && onInvitePersonClick(person);\n      }\n    }, person.username);\n  };\n  if (props.renderPeopleSettings) {\n    return React.createElement(React.Fragment, null, props.renderPeopleSettings(props));\n  }\n  return React.createElement(Dropdown, {\n    id: \"ce-settings-people-dropdown\",\n    label: \"Members\",\n    style: _extends({}, styles$l.style, props.style)\n  }, renderChatPeople(chat.people), React.createElement(Autocomplete, {\n    label: \"Add Member\",\n    options: peopleToInvite,\n    renderOption: renderChatPeopleOption,\n    style: _extends({}, styles$l.addMemberStyle, props.addMemberStyle),\n    inputStyle: _extends({}, styles$l.addMemberInputStyle, props.addMemberInputStyle)\n  }));\n};\nvar styles$o = {\n  style: {},\n  imageWrapperStyle: {\n    position: 'relative',\n    width: '33.3%',\n    display: 'inline-block',\n    cursor: 'pointer'\n  },\n  imagePaddingStyle: {\n    paddingTop: '100%'\n  },\n  imageStyle: {\n    top: '0px',\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    objectFit: 'cover',\n    padding: '0px',\n    borderRadius: '0px'\n  }\n};\nvar PhotosSettings = function PhotosSettings(props) {\n  var _props$chat = props.chat,\n    chat = _props$chat === void 0 ? {\n      attachments: []\n    } : _props$chat;\n  var renderImages = function renderImages(attachments) {\n    return attachments.map(function (attachment, index) {\n      var fileName = getFileName(attachment.file);\n      if (isImage(fileName)) {\n        return React.createElement(\"div\", {\n          key: \"photo-\" + index,\n          style: _extends({}, styles$o.imageWrapperStyle, props.imageWrapperStyle)\n        }, React.createElement(\"div\", {\n          style: _extends({}, styles$o.imagePaddingStyle, props.imagePaddingStyle)\n        }), React.createElement(Image, {\n          key: \"attachment_\" + index,\n          className: \"ce-settings-image\",\n          url: attachment.file !== null ? attachment.file : undefined,\n          style: _extends({}, styles$o.imageStyle, props.imageStyle)\n        }));\n      }\n      return React.createElement(\"span\", {\n        key: \"photo-\" + index\n      });\n    });\n  };\n  if (props.renderPhotosSettings) {\n    return React.createElement(React.Fragment, null, props.renderPhotosSettings(props));\n  }\n  return React.createElement(Dropdown, {\n    id: \"ce-settings-photos-dropdown\",\n    label: \"Photos\",\n    style: _extends({}, styles$o.style, props.style)\n  }, renderImages(chat.attachments));\n};\nvar styles$p = {\n  style: {},\n  deleteChatButtonStyle: {\n    width: 'calc(100% - 24px)',\n    position: 'relative',\n    left: '12px'\n  }\n};\nvar OptionsSettings = function OptionsSettings(props) {\n  if (props.renderOptionsSettings) {\n    return React.createElement(React.Fragment, null, props.renderOptionsSettings(props));\n  }\n  return React.createElement(Dropdown, {\n    id: \"ce-settings-options-dropdown\",\n    label: \"Options\",\n    style: _extends({}, styles$p.style, props.style)\n  }, React.createElement(Button, {\n    type: \"danger\",\n    onClick: function onClick() {\n      return props.onDeleteChatClick && props.chat && props.onDeleteChatClick(props.chat);\n    },\n    style: _extends({}, styles$p.deleteChatButtonStyle, props.deleteChatButtonStyle)\n  }, \"Delete this Chat\"));\n};\nvar ChatSettings = function ChatSettings(props) {\n  var chat = props.chat;\n  if (props.renderChatSettings) {\n    return React.createElement(React.Fragment, null, props.renderChatSettings(props));\n  }\n  var people = chat ? chat.people.map(function (chatPerson) {\n    return chatPerson.person;\n  }) : [];\n  var otherPerson = chat && chat.people.find(function (person) {\n    return person.person.username !== props.username;\n  });\n  var title = props.isLoading || !chat ? '' : chat.is_direct_chat && otherPerson ? otherPerson.person.username : chat.title;\n  return React.createElement(\"div\", {\n    className: \"ce-chat-settings\",\n    style: _extends({}, styles$j.style, props.style)\n  }, React.createElement(ChatAvatars, {\n    users: people,\n    username: props.username,\n    renderChatAvatars: props.renderChatAvatars\n  }), React.createElement(\"div\", {\n    className: \"ce-chat-settings-title\",\n    style: _extends({}, styles$j.chatTitleStyle, props.chatTitleStyle)\n  }, title), React.createElement(PeopleSettings, {\n    chat: chat,\n    peopleToInvite: props.peopleToInvite,\n    canDelete: chat && props.username === chat.admin.username,\n    onInvitePersonClick: props.onInvitePersonClick,\n    onRemovePersonClick: props.onRemovePersonClick,\n    renderPeopleSettings: props.renderPeopleSettings,\n    style: _extends({}, styles$j.peopleSettingsStyle, props.peopleSettingsStyle)\n  }), React.createElement(PhotosSettings, {\n    chat: chat,\n    renderPhotosSettings: props.renderPhotosSettings,\n    style: _extends({}, styles$j.photosSettingsStyle, props.photosSettingsStyle)\n  }), React.createElement(OptionsSettings, {\n    chat: chat,\n    onDeleteChatClick: props.onDeleteChatClick,\n    renderOptionsSettings: props.renderOptionsSettings,\n    style: _extends({}, styles$j.optionsSettingsStyle, props.optionsSettingsStyle)\n  }));\n};\nsetConfiguration({\n  maxScreenClass: 'xl',\n  gutterWidth: 0\n});\nvar MultiChatWindow = function MultiChatWindow(props) {\n  var _props$chats = props.chats,\n    chats = _props$chats === void 0 ? [] : _props$chats,\n    _props$activeChatId = props.activeChatId,\n    activeChatId = _props$activeChatId === void 0 ? -1 : _props$activeChatId,\n    _props$messages = props.messages,\n    messages = _props$messages === void 0 ? [] : _props$messages;\n  var _useState = useState(window.innerWidth < 575),\n    isMobile = _useState[0],\n    setIsMobile = _useState[1];\n  var chat = chats.find(function (chat) {\n    return chat.id === activeChatId;\n  });\n  useEffect(function () {\n    function handleResize() {\n      setIsMobile(window.innerWidth < 575);\n    }\n    window.addEventListener('resize', handleResize);\n  });\n  var renderChatList = function renderChatList() {\n    return React.createElement(ChatList, {\n      chats: chats,\n      activeChatId: activeChatId,\n      username: props.username,\n      timezoneOffset: props.timezoneOffset,\n      isLoading: props.isChatListLoading,\n      hasMoreChats: props.hasMoreChats,\n      onChatFormSubmit: props.onChatFormSubmit,\n      onChatCardClick: props.onChatCardClick,\n      onChatLoaderShow: props.onChatLoaderShow,\n      renderChatList: props.renderChatList,\n      renderChatForm: props.renderChatForm,\n      renderChatCard: props.renderChatCard,\n      style: {\n        position: isMobile ? 'absolute' : 'inherit',\n        zIndex: isMobile ? 1 : 'inherit'\n      }\n    });\n  };\n  var renderChatSettings = function renderChatSettings() {\n    return React.createElement(ChatSettings, {\n      chat: chat,\n      username: props.username,\n      peopleToInvite: props.peopleToInvite,\n      isLoading: props.isChatSettingsLoading,\n      onInvitePersonClick: props.onInvitePersonClick,\n      onRemovePersonClick: props.onRemovePersonClick,\n      onDeleteChatClick: props.onDeleteChatClick,\n      renderChatSettings: props.renderChatSettings,\n      renderChatAvatars: function renderChatAvatars(chatAvatarsProps) {\n        return React.createElement(React.Fragment, null, React.createElement(ChatAvatars, Object.assign({}, chatAvatarsProps, {\n          renderChatAvatars: props.renderChatAvatars\n        })), isMobile && React.createElement(Button, {\n          onClick: props.onCloseMobileChatSettingsClick,\n          style: {\n            position: 'absolute',\n            top: '12px',\n            right: '12px'\n          }\n        }, React.createElement(CloseOutlined, null)));\n      },\n      renderPeopleSettings: props.renderPeopleSettings,\n      renderPhotosSettings: props.renderPhotosSettings,\n      renderOptionsSettings: props.renderOptionsSettings,\n      style: {\n        position: isMobile ? 'absolute' : 'inherit',\n        zIndex: isMobile ? 1 : 'inherit'\n      }\n    });\n  };\n  return React.createElement(Row, {\n    className: \"ce-chat-engine\",\n    style: _extends({}, styles.style, props.style)\n  }, React.createElement(Col, {\n    xs: 0,\n    sm: 3,\n    className: \"ce-chat-list-column\",\n    style: _extends({}, styles.chatListColumnStyle, props.chatListColumnStyle)\n  }, renderChatList()), React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    className: \"ce-chat-feed-column\",\n    style: _extends({}, styles.chatFeedColumnStyle, props.chatFeedColumnStyle)\n  }, React.createElement(ChatFeed, {\n    chat: chat,\n    messages: messages,\n    username: props.username,\n    timezoneOffset: props.timezoneOffset,\n    isLoading: props.isChatFeedLoading,\n    hasMoreMessages: props.hasMoreMessages,\n    onMessageLoaderShow: props.onMessageLoaderShow,\n    onMessageLoaderHide: props.onMessageLoaderHide,\n    onBottomMessageShow: props.onBottomMessageShow,\n    onBottomMessageHide: props.onBottomMessageHide,\n    onMessageFormSubmit: props.onMessageFormSubmit,\n    renderChatFeed: props.renderChatFeed,\n    renderChatHeader: props.renderChatHeader,\n    renderMessageList: props.renderMessageList,\n    renderMessage: props.renderMessage,\n    renderWelcomeGif: props.renderWelcomeGif,\n    renderMessageForm: props.renderMessageForm\n  })), React.createElement(Col, {\n    xs: 0,\n    sm: 3,\n    className: \"ce-chat-settings-column\",\n    style: _extends({}, styles.chatSettingsColumnStyle, props.chatSettingsColumnStyle)\n  }, renderChatSettings()), React.createElement(Button, {\n    onClick: props.onMobileChatListClick,\n    className: \"ce-mobile-chat-list-button\",\n    style: _extends({}, styles.chatListMobileButtonStyle, {\n      display: isMobile ? 'inherit' : 'none'\n    }, props.chatListMobileButtonStyle)\n  }, React.createElement(UnorderedListOutlined, null)), isMobile && props.isMobileChatListOpen && renderChatList(), React.createElement(Button, {\n    onClick: props.onMobileChatSettingsClick,\n    className: \"ce-mobile-chat-settings-button\",\n    style: _extends({}, styles.chatSettingsMobileButtonStyle, {\n      display: isMobile ? 'inherit' : 'none'\n    }, props.chatSettingsMobileButtonStyle)\n  }, React.createElement(SettingOutlined, null)), isMobile && props.isMobileChatSettingsOpen && renderChatSettings());\n};\nvar chatCountIterator = 20;\nvar messageCountIterator = 50;\nvar sortChats = function sortChats(chats) {\n  return chats.sort(function (a, b) {\n    var aDate = a.last_message && a.last_message.created ? getDateTime(a.last_message.created) : getDateTime(a.created);\n    var bDate = b.last_message && b.last_message.created ? getDateTime(b.last_message.created) : getDateTime(b.created);\n    return new Date(bDate).getTime() - new Date(aDate).getTime();\n  });\n};\nvar sortMessages = function sortMessages(messages) {\n  return messages.sort(function (a, b) {\n    return new Date(b.created).getTime() - new Date(a.created).getTime();\n  });\n};\nvar useMultiChatLogic = function useMultiChatLogic(projectId, username, secret, httpUrl) {\n  var host = httpUrl ? httpUrl : 'https://api.chatengine.io';\n  var headers = {\n    'Public-Key': projectId,\n    'User-Name': username,\n    'User-Secret': secret\n  }; // Data\n\n  var _useState = useState(),\n    activeChatId = _useState[0],\n    setActiveChatId = _useState[1];\n  var _useState2 = useState([]),\n    chats = _useState2[0],\n    setChats = _useState2[1];\n  var _useState3 = useState([]),\n    messages = _useState3[0],\n    setMessages = _useState3[1];\n  var _useState4 = useState([]),\n    peopleToInvite = _useState4[0],\n    setPeopleToInvite = _useState4[1]; // State\n\n  var _useState5 = useState(false),\n    hasMoreChats = _useState5[0],\n    setHasMoreChats = _useState5[1];\n  var _useState6 = useState(false),\n    hasMoreMessages = _useState6[0],\n    setHasMoreMessages = _useState6[1];\n  var _useState7 = useState(false),\n    isChatFeedAtBottom = _useState7[0],\n    setIsChatFeedAtBottom = _useState7[1];\n  var _useState8 = useState(true),\n    isChatListLoading = _useState8[0],\n    setIsChatListLoading = _useState8[1];\n  var _useState9 = useState(true),\n    isChatFeedLoading = _useState9[0],\n    setIsChatFeedLoading = _useState9[1];\n  var _useState10 = useState(true),\n    isChatSettingsLoading = _useState10[0],\n    setIsChatSettingsLoading = _useState10[1];\n  var _useState11 = useState(false),\n    isMobileChatListOpen = _useState11[0],\n    setIsMobileChatListOpen = _useState11[1];\n  var _useState12 = useState(false),\n    isMobileChatSettingsOpen = _useState12[0],\n    setIsMobileChatSettingsOpen = _useState12[1]; // Subscribe to Chat & Message Count\n\n  var chatCountRef = useRef(0);\n  chatCountRef.current = chats.length;\n  var messageCountRef = useRef(0);\n  messageCountRef.current = messages.length;\n  var chat = chats.find(function (chat) {\n    return chat.id === activeChatId;\n  }); // Fetch data on mount\n\n  var didMountRef = useRef(false);\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      fetchMultiChatData();\n    }\n  }, []);\n  useEffect(function () {\n    var chat = chats.find(function (chat) {\n      return chat.id === activeChatId;\n    });\n    var chatPerson = chat == null ? void 0 : chat.people.find(function (chatPerson) {\n      return chatPerson.person.username === username;\n    });\n    if (activeChatId && chat != null && chat.last_message.id &&\n    // If there is a message\n    chat.last_message.id !== (chatPerson == null ? void 0 : chatPerson.last_read) && isChatFeedAtBottom) {\n      readMessage(host, headers, activeChatId, chat.last_message.id, function () {});\n    }\n  }, [chats, activeChatId, isChatFeedAtBottom]);\n  function fetchMultiChatData() {\n    return _fetchMultiChatData.apply(this, arguments);\n  }\n  function _fetchMultiChatData() {\n    _fetchMultiChatData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var now;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              now = new Date().toISOString().replace('T', ' ').replace('Z', Math.floor(Math.random() * 1000) + \"+00:00\");\n              getChatsBefore(host, headers, now, chatCountRef.current > 0 ? chatCountRef.current : chatCountIterator, function (chats) {\n                onGetChats(chats);\n                var currentChat = activeChatId;\n                if (!activeChatId && chats.length > 0) {\n                  currentChat = chats[0].id;\n                }\n                currentChat ? onChatCardClick(currentChat) : setIsChatFeedLoading(false);\n              });\n              return _context.abrupt(\"return\");\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchMultiChatData.apply(this, arguments);\n  }\n  function onGetChats(_x) {\n    return _onGetChats.apply(this, arguments);\n  }\n  function _onGetChats() {\n    _onGetChats = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(chats) {\n      var sortedChats;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (chats === void 0) {\n                chats = [];\n              }\n              setHasMoreChats(chats.length >= chatCountRef.current + chatCountIterator);\n              sortedChats = sortChats(chats);\n              setChats(sortedChats);\n              setIsChatListLoading(false);\n              return _context2.abrupt(\"return\");\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onGetChats.apply(this, arguments);\n  }\n  function onNewChat(_x2) {\n    return _onNewChat.apply(this, arguments);\n  }\n  function _onNewChat() {\n    _onNewChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(chat) {\n      var newChats;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              newChats = [chat].concat(chats ? chats : []);\n              setChats(newChats);\n              return _context3.abrupt(\"return\");\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _onNewChat.apply(this, arguments);\n  }\n  function onEditChat(_x3) {\n    return _onEditChat.apply(this, arguments);\n  }\n  function _onEditChat() {\n    _onEditChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(newChat) {\n      var otherChats, newChats, sortedChats;\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              otherChats = chats ? chats.filter(function (chat) {\n                return chat.id !== newChat.id;\n              }) : [];\n              newChats = [newChat].concat(otherChats);\n              sortedChats = sortChats(newChats);\n              setChats(sortedChats);\n              return _context4.abrupt(\"return\");\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _onEditChat.apply(this, arguments);\n  }\n  function onDeleteChat(_x4) {\n    return _onDeleteChat.apply(this, arguments);\n  }\n  function _onDeleteChat() {\n    _onDeleteChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(oldChat) {\n      var newChats;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              newChats = chats ? chats.filter(function (chat) {\n                return chat.id !== oldChat.id;\n              }) : [];\n              setChats(newChats);\n              if (newChats.length > 0 && activeChatId === oldChat.id) onChatCardClick(newChats[0].id);\n              return _context5.abrupt(\"return\");\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _onDeleteChat.apply(this, arguments);\n  }\n  function onGetMessages(_x5, _x6) {\n    return _onGetMessages.apply(this, arguments);\n  }\n  function _onGetMessages() {\n    _onGetMessages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(chatId, messages) {\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              setHasMoreMessages(messages.length >= messageCountRef.current + messageCountIterator);\n              setMessages(messages);\n              return _context6.abrupt(\"return\");\n            case 4:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _onGetMessages.apply(this, arguments);\n  }\n  function onNewMessage(_x7, _x8) {\n    return _onNewMessage.apply(this, arguments);\n  }\n  function _onNewMessage() {\n    _onNewMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(chatId, newMessage) {\n      var otherMessages, newMessages, sortedMessages;\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              if (activeChatId === chatId) {\n                otherMessages = messages ? messages.filter(function (message) {\n                  return message.created !== newMessage.created;\n                }) : [];\n                newMessages = otherMessages.concat(newMessage);\n                sortedMessages = sortMessages(newMessages);\n                setMessages(sortedMessages);\n                if (isChatFeedAtBottom) {\n                  animateScroll.scrollToBottom({\n                    duration: 333,\n                    containerId: \"ce-message-list-\" + activeChatId\n                  });\n                }\n              }\n              return _context7.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _onNewMessage.apply(this, arguments);\n  }\n  function onEditMessage(_x9, _x10) {\n    return _onEditMessage.apply(this, arguments);\n  }\n  function _onEditMessage() {\n    _onEditMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(chatId, newMessage) {\n      var otherMessages, newMessages, sortedMessages;\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              if (chatId === activeChatId) {\n                otherMessages = messages ? messages.filter(function (message) {\n                  return message.id !== newMessage.id;\n                }) : [];\n                newMessages = [newMessage].concat(otherMessages);\n                sortedMessages = sortMessages(newMessages);\n                setMessages(sortedMessages);\n              }\n              return _context8.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n    return _onEditMessage.apply(this, arguments);\n  }\n  function onDeleteMessage(_x11, _x12) {\n    return _onDeleteMessage.apply(this, arguments);\n  }\n  function _onDeleteMessage() {\n    _onDeleteMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(chatId, oldMessage) {\n      var newMessages;\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              if (chatId === activeChatId) {\n                newMessages = messages ? messages.filter(function (message) {\n                  return message.id !== oldMessage.id;\n                }) : [];\n                setMessages(newMessages);\n              }\n              return _context9.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    return _onDeleteMessage.apply(this, arguments);\n  }\n  function onConnect() {\n    return _onConnect.apply(this, arguments);\n  }\n  function _onConnect() {\n    _onConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              fetchMultiChatData();\n              return _context10.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n    return _onConnect.apply(this, arguments);\n  }\n  function onAuthFail() {\n    return _onAuthFail.apply(this, arguments);\n  }\n  function _onAuthFail() {\n    _onAuthFail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {\n      return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n    return _onAuthFail.apply(this, arguments);\n  }\n  function onChatFormSubmit(_x13) {\n    return _onChatFormSubmit.apply(this, arguments);\n  }\n  function _onChatFormSubmit() {\n    _onChatFormSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(title) {\n      return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              newChat(host, headers, title, function (chat) {\n                onNewChat(chat);\n                onChatCardClick(chat.id);\n              });\n              return _context12.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n    return _onChatFormSubmit.apply(this, arguments);\n  }\n  function onChatCardClick(_x14) {\n    return _onChatCardClick.apply(this, arguments);\n  }\n  function _onChatCardClick() {\n    _onChatCardClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(newActiveChatId) {\n      return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              if (newActiveChatId !== activeChatId) {\n                setIsChatFeedLoading(true);\n                setIsChatSettingsLoading(true);\n              }\n              setActiveChatId(newActiveChatId);\n              setIsMobileChatListOpen(false);\n              getMessages(host, headers, newActiveChatId, messageCountIterator, function (chatId, messages) {\n                onGetMessages(chatId, messages);\n                setIsChatFeedLoading(false);\n                setIsChatSettingsLoading(false);\n                animateScroll.scrollToBottom({\n                  duration: 0,\n                  containerId: \"ce-message-list-\" + activeChatId\n                });\n              });\n              getPeopleToInvite(host, headers, newActiveChatId, setPeopleToInvite);\n              return _context13.abrupt(\"return\");\n            case 6:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n    return _onChatCardClick.apply(this, arguments);\n  }\n  function onChatLoaderShow() {\n    return _onChatLoaderShow.apply(this, arguments);\n  }\n  function _onChatLoaderShow() {\n    _onChatLoaderShow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n      var now;\n      return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              now = new Date().toISOString().replace('T', ' ').replace('Z', \"0000+00:00\");\n              getChatsBefore(host, headers, now, chatCountRef.current + chatCountIterator, onGetChats);\n              return _context14.abrupt(\"return\");\n            case 3:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n    return _onChatLoaderShow.apply(this, arguments);\n  }\n  function onMessageFormSubmit(_x15) {\n    return _onMessageFormSubmit.apply(this, arguments);\n  }\n  function _onMessageFormSubmit() {\n    _onMessageFormSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(message) {\n      var newMessages;\n      return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n              newMessages = messages == null ? void 0 : messages.concat(message);\n              setMessages(newMessages);\n              newMessage(host, headers, activeChatId, message, function () {});\n              setTimeout(function () {\n                animateScroll.scrollToBottom({\n                  duration: 333,\n                  containerId: \"ce-message-list-\" + activeChatId\n                });\n              }, 100);\n              return _context15.abrupt(\"return\");\n            case 5:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15);\n    }));\n    return _onMessageFormSubmit.apply(this, arguments);\n  }\n  function onInvitePersonClick(_x16) {\n    return _onInvitePersonClick.apply(this, arguments);\n  }\n  function _onInvitePersonClick() {\n    _onInvitePersonClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(person) {\n      return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n              activeChatId && invitePerson(host, headers, activeChatId, person.username, function () {\n                return onChatCardClick(activeChatId);\n              });\n            case 1:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16);\n    }));\n    return _onInvitePersonClick.apply(this, arguments);\n  }\n  function onRemovePersonClick(_x17) {\n    return _onRemovePersonClick.apply(this, arguments);\n  }\n  function _onRemovePersonClick() {\n    _onRemovePersonClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17(person) {\n      return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n        while (1) {\n          switch (_context17.prev = _context17.next) {\n            case 0:\n              activeChatId && removePerson(host, headers, activeChatId, person.username, function () {\n                return onChatCardClick(activeChatId);\n              });\n              return _context17.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context17.stop();\n          }\n        }\n      }, _callee17);\n    }));\n    return _onRemovePersonClick.apply(this, arguments);\n  }\n  function onDeleteChatClick(_x18) {\n    return _onDeleteChatClick.apply(this, arguments);\n  }\n  function _onDeleteChatClick() {\n    _onDeleteChatClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(chat) {\n      return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n        while (1) {\n          switch (_context18.prev = _context18.next) {\n            case 0:\n              deleteChat(host, headers, chat.id, onDeleteChat);\n              return _context18.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context18.stop();\n          }\n        }\n      }, _callee18);\n    }));\n    return _onDeleteChatClick.apply(this, arguments);\n  }\n  function onBottomMessageShow() {\n    return _onBottomMessageShow.apply(this, arguments);\n  }\n  function _onBottomMessageShow() {\n    _onBottomMessageShow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19() {\n      return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n        while (1) {\n          switch (_context19.prev = _context19.next) {\n            case 0:\n              setIsChatFeedAtBottom(true);\n              return _context19.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context19.stop();\n          }\n        }\n      }, _callee19);\n    }));\n    return _onBottomMessageShow.apply(this, arguments);\n  }\n  function onBottomMessageHide() {\n    return _onBottomMessageHide.apply(this, arguments);\n  }\n  function _onBottomMessageHide() {\n    _onBottomMessageHide = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20() {\n      return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n        while (1) {\n          switch (_context20.prev = _context20.next) {\n            case 0:\n              setIsChatFeedAtBottom(false);\n              return _context20.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context20.stop();\n          }\n        }\n      }, _callee20);\n    }));\n    return _onBottomMessageHide.apply(this, arguments);\n  }\n  function onMessageLoaderShow() {\n    return _onMessageLoaderShow.apply(this, arguments);\n  }\n  function _onMessageLoaderShow() {\n    _onMessageLoaderShow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee21() {\n      var scrollContainerId, messageListId, currentElement, currentHeight;\n      return _regeneratorRuntime().wrap(function _callee21$(_context21) {\n        while (1) {\n          switch (_context21.prev = _context21.next) {\n            case 0:\n              scrollContainerId = \"ce-message-list-\" + activeChatId;\n              messageListId = \"ce-message-list-content-\" + activeChatId;\n              currentElement = document.getElementById(messageListId);\n              currentHeight = currentElement ? currentElement.clientHeight : 0;\n              activeChatId && getMessages(host, headers, activeChatId, messageCountRef.current + messageCountIterator, function (chatId, messages) {\n                onGetMessages(chatId, messages);\n                setTimeout(function () {\n                  var element = document.getElementById(messageListId);\n                  if (element) {\n                    animateScroll.scrollTo(element.clientHeight - currentHeight, {\n                      duration: 333,\n                      containerId: scrollContainerId\n                    });\n                  }\n                }, 1000);\n              });\n              return _context21.abrupt(\"return\");\n            case 6:\n            case \"end\":\n              return _context21.stop();\n          }\n        }\n      }, _callee21);\n    }));\n    return _onMessageLoaderShow.apply(this, arguments);\n  }\n  function onMessageLoaderHide() {\n    return _onMessageLoaderHide.apply(this, arguments);\n  }\n  function _onMessageLoaderHide() {\n    _onMessageLoaderHide = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee22() {\n      return _regeneratorRuntime().wrap(function _callee22$(_context22) {\n        while (1) {\n          switch (_context22.prev = _context22.next) {\n            case 0:\n              return _context22.abrupt(\"return\");\n            case 1:\n            case \"end\":\n              return _context22.stop();\n          }\n        }\n      }, _callee22);\n    }));\n    return _onMessageLoaderHide.apply(this, arguments);\n  }\n  function onIsTyping(_x19, _x20) {\n    return _onIsTyping.apply(this, arguments);\n  }\n  function _onIsTyping() {\n    _onIsTyping = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee23(id, person) {\n      return _regeneratorRuntime().wrap(function _callee23$(_context23) {\n        while (1) {\n          switch (_context23.prev = _context23.next) {\n            case 0:\n              return _context23.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context23.stop();\n          }\n        }\n      }, _callee23);\n    }));\n    return _onIsTyping.apply(this, arguments);\n  }\n  function onMobileChatListClick() {\n    return _onMobileChatListClick.apply(this, arguments);\n  }\n  function _onMobileChatListClick() {\n    _onMobileChatListClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee24() {\n      return _regeneratorRuntime().wrap(function _callee24$(_context24) {\n        while (1) {\n          switch (_context24.prev = _context24.next) {\n            case 0:\n              setIsMobileChatListOpen(true);\n              return _context24.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context24.stop();\n          }\n        }\n      }, _callee24);\n    }));\n    return _onMobileChatListClick.apply(this, arguments);\n  }\n  function onMobileChatSettingsClick() {\n    return _onMobileChatSettingsClick.apply(this, arguments);\n  }\n  function _onMobileChatSettingsClick() {\n    _onMobileChatSettingsClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee25() {\n      return _regeneratorRuntime().wrap(function _callee25$(_context25) {\n        while (1) {\n          switch (_context25.prev = _context25.next) {\n            case 0:\n              setIsMobileChatSettingsOpen(true);\n              return _context25.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context25.stop();\n          }\n        }\n      }, _callee25);\n    }));\n    return _onMobileChatSettingsClick.apply(this, arguments);\n  }\n  function onCloseMobileChatSettingsClick() {\n    return _onCloseMobileChatSettingsClick.apply(this, arguments);\n  }\n  function _onCloseMobileChatSettingsClick() {\n    _onCloseMobileChatSettingsClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee26() {\n      return _regeneratorRuntime().wrap(function _callee26$(_context26) {\n        while (1) {\n          switch (_context26.prev = _context26.next) {\n            case 0:\n              setIsMobileChatSettingsOpen(false);\n              return _context26.abrupt(\"return\");\n            case 2:\n            case \"end\":\n              return _context26.stop();\n          }\n        }\n      }, _callee26);\n    }));\n    return _onCloseMobileChatSettingsClick.apply(this, arguments);\n  }\n  return {\n    // Socket Hooks\n    onConnect: onConnect,\n    onAuthFail: onAuthFail,\n    onGetChats: onGetChats,\n    onNewChat: onNewChat,\n    onEditChat: onEditChat,\n    onDeleteChat: onDeleteChat,\n    onGetMessages: onGetMessages,\n    onNewMessage: onNewMessage,\n    onEditMessage: onEditMessage,\n    onDeleteMessage: onDeleteMessage,\n    onIsTyping: onIsTyping,\n    // Auth Data\n    projectId: projectId,\n    username: username,\n    // file deepcode ignore HardcodedNonCryptoSecret: <not a secret>\n    secret: secret,\n    httpUrl: httpUrl,\n    wsUrl: httpUrl && httpUrl.replace('http', 'ws'),\n    // Chat Data\n    chats: chats,\n    setChats: setChats,\n    messages: messages,\n    setMessages: setMessages,\n    peopleToInvite: peopleToInvite,\n    setPeopleToInvite: setPeopleToInvite,\n    // Chat State\n    activeChatId: activeChatId,\n    setActiveChatId: setActiveChatId,\n    chat: chat,\n    hasMoreChats: hasMoreChats,\n    setHasMoreChats: setHasMoreChats,\n    hasMoreMessages: hasMoreMessages,\n    setHasMoreMessages: setHasMoreMessages,\n    isChatFeedAtBottom: isChatFeedAtBottom,\n    setIsChatFeedAtBottom: setIsChatFeedAtBottom,\n    isChatListLoading: isChatListLoading,\n    setIsChatListLoading: setIsChatListLoading,\n    isChatFeedLoading: isChatFeedLoading,\n    setIsChatFeedLoading: setIsChatFeedLoading,\n    isChatSettingsLoading: isChatSettingsLoading,\n    setIsChatSettingsLoading: setIsChatSettingsLoading,\n    isMobileChatListOpen: isMobileChatListOpen,\n    setIsMobileChatListOpen: setIsMobileChatListOpen,\n    isMobileChatSettingsOpen: isMobileChatSettingsOpen,\n    setIsMobileChatSettingsOpen: setIsMobileChatSettingsOpen,\n    // Component Hooks\n    onChatFormSubmit: onChatFormSubmit,\n    onChatCardClick: onChatCardClick,\n    onChatLoaderShow: onChatLoaderShow,\n    onMessageLoaderShow: onMessageLoaderShow,\n    onMessageLoaderHide: onMessageLoaderHide,\n    onBottomMessageShow: onBottomMessageShow,\n    onBottomMessageHide: onBottomMessageHide,\n    onMessageFormSubmit: onMessageFormSubmit,\n    onInvitePersonClick: onInvitePersonClick,\n    onRemovePersonClick: onRemovePersonClick,\n    onDeleteChatClick: onDeleteChatClick,\n    onMobileChatListClick: onMobileChatListClick,\n    onMobileChatSettingsClick: onMobileChatSettingsClick,\n    onCloseMobileChatSettingsClick: onCloseMobileChatSettingsClick\n  };\n};\nvar messageCountIterator$1 = 50;\nvar sortMessages$1 = function sortMessages(messages) {\n  return messages.sort(function (a, b) {\n    return new Date(b.created).getTime() - new Date(a.created).getTime();\n  });\n};\nvar useSingleChatLogic = function useSingleChatLogic(projectId, chatId, chatAccessKey, httpUrl) {\n  var host = httpUrl ? httpUrl : 'https://api.chatengine.io';\n  var headers = {\n    'Public-Key': projectId,\n    'Chat-ID': chatId,\n    'Access-Key': chatAccessKey\n  }; // Data\n\n  var _useState = useState(),\n    activeChatId = _useState[0],\n    setActiveChatId = _useState[1];\n  var _useState2 = useState(),\n    chat = _useState2[0],\n    setChat = _useState2[1];\n  var _useState3 = useState([]),\n    messages = _useState3[0],\n    setMessages = _useState3[1];\n  var _useState4 = useState([]),\n    peopleToInvite = _useState4[0],\n    setPeopleToInvite = _useState4[1]; // State\n\n  var _useState5 = useState(false),\n    hasMoreChats = _useState5[0],\n    setHasMoreChats = _useState5[1];\n  var _useState6 = useState(false),\n    hasMoreMessages = _useState6[0],\n    setHasMoreMessages = _useState6[1];\n  var _useState7 = useState(false),\n    isChatFeedAtBottom = _useState7[0],\n    setIsChatFeedAtBottom = _useState7[1];\n  var _useState8 = useState(true),\n    isChatFeedLoading = _useState8[0],\n    setIsChatFeedLoading = _useState8[1]; // Subscribe to Chat & Message Count\n\n  var chatCountRef = useRef(0);\n  chatCountRef.current = chat ? 1 : 0;\n  var messageCountRef = useRef(0);\n  messageCountRef.current = messages.length; // Fetch data on mount\n\n  var didMountRef = useRef(false);\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      fetchSingleChatData();\n    }\n  }, []);\n  function fetchSingleChatData() {\n    return _fetchSingleChatData.apply(this, arguments);\n  }\n  function _fetchSingleChatData() {\n    _fetchSingleChatData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              getChat(host, headers, chatId, function (chat) {\n                setChat(chat);\n                onChatCardClick(chat.id);\n              });\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchSingleChatData.apply(this, arguments);\n  }\n  function onEditChat(_x) {\n    return _onEditChat.apply(this, arguments);\n  }\n  function _onEditChat() {\n    _onEditChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(chat) {\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setChat(chat);\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onEditChat.apply(this, arguments);\n  }\n  function onDeleteChat() {\n    return _onDeleteChat.apply(this, arguments);\n  }\n  function _onDeleteChat() {\n    _onDeleteChat = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setChat(undefined);\n              setActiveChatId(undefined);\n            case 2:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _onDeleteChat.apply(this, arguments);\n  }\n  function onGetMessages(_x2, _x3) {\n    return _onGetMessages.apply(this, arguments);\n  }\n  function _onGetMessages() {\n    _onGetMessages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(chatId, messages) {\n      return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setHasMoreMessages(messages.length >= messageCountRef.current + messageCountIterator$1);\n              setMessages(messages);\n              setIsChatFeedLoading(false);\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _onGetMessages.apply(this, arguments);\n  }\n  function onNewMessage(_x4, _x5) {\n    return _onNewMessage.apply(this, arguments);\n  }\n  function _onNewMessage() {\n    _onNewMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(chatId, newMessage) {\n      var otherMessages, newMessages, sortedMessages;\n      return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (activeChatId === chatId) {\n                otherMessages = messages ? messages.filter(function (message) {\n                  return message.created !== newMessage.created;\n                }) : [];\n                newMessages = otherMessages.concat(newMessage);\n                sortedMessages = sortMessages$1(newMessages);\n                setMessages(sortedMessages);\n                if (isChatFeedAtBottom) {\n                  animateScroll.scrollToBottom({\n                    duration: 333,\n                    containerId: \"ce-message-list-\" + activeChatId\n                  });\n                }\n              }\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _onNewMessage.apply(this, arguments);\n  }\n  function onEditMessage(_x6, _x7) {\n    return _onEditMessage.apply(this, arguments);\n  }\n  function _onEditMessage() {\n    _onEditMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(chatId, newMessage) {\n      var otherMessages, newMessages, sortedMessages;\n      return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (chatId === activeChatId) {\n                otherMessages = messages ? messages.filter(function (message) {\n                  return message.id !== newMessage.id;\n                }) : [];\n                newMessages = [newMessage].concat(otherMessages);\n                sortedMessages = sortMessages$1(newMessages);\n                setMessages(sortedMessages);\n              }\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n    return _onEditMessage.apply(this, arguments);\n  }\n  function onDeleteMessage(_x8, _x9) {\n    return _onDeleteMessage.apply(this, arguments);\n  }\n  function _onDeleteMessage() {\n    _onDeleteMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(chatId, oldMessage) {\n      var newMessages;\n      return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              if (chatId === activeChatId) {\n                newMessages = messages ? messages.filter(function (message) {\n                  return message.id !== oldMessage.id;\n                }) : [];\n                setMessages(newMessages);\n              }\n            case 1:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n    return _onDeleteMessage.apply(this, arguments);\n  }\n  function onConnect() {\n    return _onConnect.apply(this, arguments);\n  }\n  function _onConnect() {\n    _onConnect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {\n      return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              fetchSingleChatData();\n            case 1:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n    return _onConnect.apply(this, arguments);\n  }\n  function onAuthFail() {\n    return _onAuthFail.apply(this, arguments);\n  }\n  function _onAuthFail() {\n    _onAuthFail = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n      return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9);\n    }));\n    return _onAuthFail.apply(this, arguments);\n  }\n  function onChatCardClick(_x10) {\n    return _onChatCardClick.apply(this, arguments);\n  }\n  function _onChatCardClick() {\n    _onChatCardClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(activeChatId) {\n      return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              setActiveChatId(activeChatId);\n              getMessages(host, headers, activeChatId, messageCountIterator$1, function (chatId, messages) {\n                onGetMessages(chatId, messages);\n                animateScroll.scrollToBottom({\n                  duration: 0,\n                  containerId: \"ce-message-list-\" + activeChatId\n                });\n              });\n            case 2:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10);\n    }));\n    return _onChatCardClick.apply(this, arguments);\n  }\n  function onMessageFormSubmit(_x11) {\n    return _onMessageFormSubmit.apply(this, arguments);\n  }\n  function _onMessageFormSubmit() {\n    _onMessageFormSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(message) {\n      var newMessages;\n      return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n        while (1) {\n          switch (_context11.prev = _context11.next) {\n            case 0:\n              newMessages = messages == null ? void 0 : messages.concat(message);\n              setMessages(newMessages);\n              newMessage(host, headers, activeChatId, message, function () {});\n              setTimeout(function () {\n                animateScroll.scrollToBottom({\n                  duration: 333,\n                  containerId: \"ce-message-list-\" + activeChatId\n                });\n              }, 100);\n            case 4:\n            case \"end\":\n              return _context11.stop();\n          }\n        }\n      }, _callee11);\n    }));\n    return _onMessageFormSubmit.apply(this, arguments);\n  }\n  function onBottomMessageShow() {\n    return _onBottomMessageShow.apply(this, arguments);\n  }\n  function _onBottomMessageShow() {\n    _onBottomMessageShow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {\n      return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n        while (1) {\n          switch (_context12.prev = _context12.next) {\n            case 0:\n              setIsChatFeedAtBottom(true);\n            case 1:\n            case \"end\":\n              return _context12.stop();\n          }\n        }\n      }, _callee12);\n    }));\n    return _onBottomMessageShow.apply(this, arguments);\n  }\n  function onBottomMessageHide() {\n    return _onBottomMessageHide.apply(this, arguments);\n  }\n  function _onBottomMessageHide() {\n    _onBottomMessageHide = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13() {\n      return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              setIsChatFeedAtBottom(false);\n            case 1:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee13);\n    }));\n    return _onBottomMessageHide.apply(this, arguments);\n  }\n  function onMessageLoaderShow() {\n    return _onMessageLoaderShow.apply(this, arguments);\n  }\n  function _onMessageLoaderShow() {\n    _onMessageLoaderShow = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14() {\n      var scrollContainerId, messageListId, currentElement, currentHeight;\n      return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n        while (1) {\n          switch (_context14.prev = _context14.next) {\n            case 0:\n              scrollContainerId = \"ce-message-list-\" + activeChatId;\n              messageListId = \"ce-message-list-content-\" + activeChatId;\n              currentElement = document.getElementById(messageListId);\n              currentHeight = currentElement ? currentElement.clientHeight : 0;\n              activeChatId && getMessages(host, headers, activeChatId, messageCountRef.current + messageCountIterator$1, function (chatId, messages) {\n                onGetMessages(chatId, messages);\n                setTimeout(function () {\n                  var element = document.getElementById(messageListId);\n                  if (element) {\n                    animateScroll.scrollTo(element.clientHeight - currentHeight, {\n                      duration: 333,\n                      containerId: scrollContainerId\n                    });\n                  }\n                }, 1000);\n              });\n            case 5:\n            case \"end\":\n              return _context14.stop();\n          }\n        }\n      }, _callee14);\n    }));\n    return _onMessageLoaderShow.apply(this, arguments);\n  }\n  function onMessageLoaderHide() {\n    return _onMessageLoaderHide.apply(this, arguments);\n  }\n  function _onMessageLoaderHide() {\n    _onMessageLoaderHide = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15() {\n      return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n        while (1) {\n          switch (_context15.prev = _context15.next) {\n            case 0:\n            case \"end\":\n              return _context15.stop();\n          }\n        }\n      }, _callee15);\n    }));\n    return _onMessageLoaderHide.apply(this, arguments);\n  }\n  function onIsTyping(_x12, _x13) {\n    return _onIsTyping.apply(this, arguments);\n  }\n  function _onIsTyping() {\n    _onIsTyping = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(id, person) {\n      return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n        while (1) {\n          switch (_context16.prev = _context16.next) {\n            case 0:\n            case 1:\n            case \"end\":\n              return _context16.stop();\n          }\n        }\n      }, _callee16);\n    }));\n    return _onIsTyping.apply(this, arguments);\n  }\n  return {\n    // Socket Hooks\n    onConnect: onConnect,\n    onAuthFail: onAuthFail,\n    onEditChat: onEditChat,\n    onDeleteChat: onDeleteChat,\n    onGetMessages: onGetMessages,\n    onNewMessage: onNewMessage,\n    onEditMessage: onEditMessage,\n    onDeleteMessage: onDeleteMessage,\n    onIsTyping: onIsTyping,\n    // Auth Data\n    projectId: projectId,\n    chatId: chatId,\n    chatAccessKey: chatAccessKey,\n    httpUrl: httpUrl,\n    wsUrl: httpUrl && httpUrl.replace('http', 'ws'),\n    // Chat Data\n    activeChatId: activeChatId,\n    setActiveChatId: setActiveChatId,\n    chat: chat,\n    messages: messages,\n    setMessages: setMessages,\n    peopleToInvite: peopleToInvite,\n    setPeopleToInvite: setPeopleToInvite,\n    // Chat State\n    hasMoreChats: hasMoreChats,\n    setHasMoreChats: setHasMoreChats,\n    hasMoreMessages: hasMoreMessages,\n    setHasMoreMessages: setHasMoreMessages,\n    isChatFeedAtBottom: isChatFeedAtBottom,\n    setIsChatFeedAtBottom: setIsChatFeedAtBottom,\n    isChatFeedLoading: isChatFeedLoading,\n    setIsChatFeedLoading: setIsChatFeedLoading,\n    // Component Hooks\n    onChatCardClick: onChatCardClick,\n    onMessageLoaderShow: onMessageLoaderShow,\n    onMessageLoaderHide: onMessageLoaderHide,\n    onBottomMessageShow: onBottomMessageShow,\n    onBottomMessageHide: onBottomMessageHide,\n    onMessageFormSubmit: onMessageFormSubmit\n  };\n};\nvar ChildSocket = function ChildSocket(props) {\n  var sessionToken = props.sessionToken;\n  var onMessage = function onMessage(event) {\n    var eventJSON = JSON.parse(event);\n    if (eventJSON.action === 'new_chat') {\n      props.onNewChat && props.onNewChat(eventJSON.data);\n    } else if (eventJSON.action === 'edit_chat' || eventJSON.action === 'add_person' || eventJSON.action === 'remove_person') {\n      props.onEditChat && props.onEditChat(eventJSON.data);\n    } else if (eventJSON.action === 'delete_chat') {\n      props.onDeleteChat && props.onDeleteChat(eventJSON.data);\n    } else if (eventJSON.action === 'new_message') {\n      var _eventJSON$data = eventJSON.data,\n        id = _eventJSON$data.id,\n        message = _eventJSON$data.message;\n      props.onNewMessage && props.onNewMessage(id, message);\n    } else if (eventJSON.action === 'edit_message') {\n      var _eventJSON$data2 = eventJSON.data,\n        _id = _eventJSON$data2.id,\n        _message = _eventJSON$data2.message;\n      props.onEditMessage && props.onEditMessage(_id, _message);\n    } else if (eventJSON.action === 'delete_message') {\n      var _eventJSON$data3 = eventJSON.data,\n        _id2 = _eventJSON$data3.id,\n        _message2 = _eventJSON$data3.message;\n      props.onDeleteMessage && props.onDeleteMessage(_id2, _message2);\n    } else if (eventJSON.action === 'is_typing') {\n      var _eventJSON$data4 = eventJSON.data,\n        _id3 = _eventJSON$data4.id,\n        person = _eventJSON$data4.person;\n      props.onIsTyping && props.onIsTyping(_id3, person);\n    }\n  };\n  if (!sessionToken) return React.createElement(\"div\", null);\n  var wsUrl = props.wsUrl ? props.wsUrl : 'wss://api.chatengine.io';\n  return React.createElement(WebSocket, {\n    url: wsUrl + \"/person_v4/?session_token=\" + sessionToken,\n    reconnect: true,\n    reconnectIntervalInMilliSeconds: 3000,\n    onOpen: props.onConnect,\n    onError: props.onError,\n    onMessage: onMessage,\n    onClose: function onClose() {\n      props.onClose && props.onClose();\n      props.onRefresh && props.onRefresh();\n    }\n  });\n};\nvar getSessionToken = function getSessionToken(host, headers, callback, error) {\n  axios.get(host + \"/users/me/session/\", {\n    headers: headers\n  }).then(function (response) {\n    return callback(response.data.token);\n  })[\"catch\"](function () {\n    return error();\n  });\n};\nvar MultiChatSocket = function MultiChatSocket(props) {\n  var didMountRef = useRef(false);\n  var _useState = useState(false),\n    isHidden = _useState[0],\n    setIsHidden = _useState[1];\n  var _useState2 = useState(undefined),\n    sessionToken = _useState2[0],\n    setToken = _useState2[1];\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      var host = props.httpUrl ? props.httpUrl : 'https://api.chatengine.io';\n      var headers = {\n        'Public-Key': props.projectId,\n        'User-Name': props.username,\n        'User-Secret': props.secret\n      };\n      getSessionToken(host, headers, function (token) {\n        return setToken(token);\n      }, function () {\n        console.log(\"Your login credentials were not correct: \\n\\n              Project ID: \" + props.projectId + \" \\n\\n              Username: \" + props.username + \" \\n\\n              Secret: \" + props.secret + \"\\n\\n              Double check these credentials to make sure they're correct.\\n\\n              If all three are correct, try resetting the username and secret in the Online Dashboard or Private API.\");\n        props.onAuthFail && props.onAuthFail();\n      });\n    }\n  }, []);\n  function reRender() {\n    return _reRender.apply(this, arguments);\n  }\n  function _reRender() {\n    _reRender = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsHidden(true);\n              setTimeout(function () {\n                return setIsHidden(false);\n              }, 100);\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _reRender.apply(this, arguments);\n  }\n  if (isHidden && sessionToken) return React.createElement(\"div\", null);\n  return React.createElement(ChildSocket, {\n    projectId: props.projectId,\n    username: props.username,\n    secret: props.secret,\n    sessionToken: sessionToken,\n    wsUrl: props.wsUrl,\n    onRefresh: reRender,\n    onConnect: props.onConnect,\n    onError: props.onError,\n    onClose: props.onClose,\n    onNewChat: props.onNewChat,\n    onEditChat: props.onEditChat,\n    onDeleteChat: props.onDeleteChat,\n    onNewMessage: props.onNewMessage,\n    onEditMessage: props.onEditMessage,\n    onDeleteMessage: props.onDeleteMessage,\n    onIsTyping: props.onIsTyping\n  });\n};\nvar socketRef = undefined;\nvar pingIntervalId;\nvar timeIntervalId;\nvar pingInterval = 4000;\nvar minLag = 15 * 1000;\nvar ChildSocket$1 = function ChildSocket(props) {\n  var _useState = useState(Date.now()),\n    now = _useState[0],\n    setNow = _useState[1];\n  var _useState2 = useState(Date.now() + minLag),\n    shouldPongBy = _useState2[0],\n    setShouldPongBy = _useState2[1];\n  var projectId = props.projectId,\n    chatId = props.chatId,\n    chatAccessKey = props.chatAccessKey;\n  useEffect(function () {\n    if (now > shouldPongBy) {\n      props.onRefresh && props.onRefresh();\n      setShouldPongBy(Date.now() + minLag);\n    }\n  }, [now, shouldPongBy]);\n  useEffect(function () {\n    return function () {\n      clearInterval(pingIntervalId);\n      clearInterval(timeIntervalId);\n    };\n  }, []);\n  var onConnect = function onConnect() {\n    pingIntervalId = setInterval(function () {\n      try {\n        socketRef.sendMessage(JSON.stringify('ping'));\n      } catch (e) {\n        console.log('Ping error', e);\n      }\n    }, pingInterval);\n    timeIntervalId = setInterval(function () {\n      return setNow(Date.now());\n    }, 1000);\n    props.onConnect && props.onConnect();\n  };\n  var onMessage = function onMessage(event) {\n    var eventJSON = JSON.parse(event);\n    if (eventJSON.action === 'pong') {\n      setShouldPongBy(Date.now() + minLag);\n    } else if (eventJSON.action === 'login_error') {\n      console.log(\"Your chat auth credentials were not correct: \\n\\n                Project ID: \" + projectId + \" \\n\\n                Chat ID: \" + chatId + \" \\n\\n                Chat Access Key: \" + chatAccessKey + \"\\n\\n                Double check these credentials to make sure they're correct.\\n\\n                If all three are correct, try resetting the username and secret in the Online Dashboard or Private API.\");\n      props.onAuthFail && props.onAuthFail();\n    } else if (eventJSON.action === 'edit_chat' || eventJSON.action === 'add_person' || eventJSON.action === 'remove_person') {\n      props.onEditChat && props.onEditChat(eventJSON.data);\n    } else if (eventJSON.action === 'delete_chat') {\n      props.onDeleteChat && props.onDeleteChat(eventJSON.data);\n    } else if (eventJSON.action === 'new_message') {\n      var _eventJSON$data = eventJSON.data,\n        id = _eventJSON$data.id,\n        message = _eventJSON$data.message;\n      props.onNewMessage && props.onNewMessage(id, message);\n    } else if (eventJSON.action === 'edit_message') {\n      var _eventJSON$data2 = eventJSON.data,\n        _id = _eventJSON$data2.id,\n        _message = _eventJSON$data2.message;\n      props.onEditMessage && props.onEditMessage(_id, _message);\n    } else if (eventJSON.action === 'delete_message') {\n      var _eventJSON$data3 = eventJSON.data,\n        _id2 = _eventJSON$data3.id,\n        _message2 = _eventJSON$data3.message;\n      props.onDeleteMessage && props.onDeleteMessage(_id2, _message2);\n    } else if (eventJSON.action === 'is_typing') {\n      var _eventJSON$data4 = eventJSON.data,\n        _id3 = _eventJSON$data4.id,\n        person = _eventJSON$data4.person;\n      props.onIsTyping && props.onIsTyping(_id3, person);\n    }\n  };\n  var wsUrl = props.wsUrl ? props.wsUrl : 'wss://api.chatengine.io';\n  return React.createElement(WebSocket, {\n    url: wsUrl + \"/chat/?projectID=\" + projectId + \"&chatID=\" + chatId + \"&accessKey=\" + chatAccessKey,\n    reconnect: true,\n    reconnectIntervalInMilliSeconds: 3000,\n    childRef: function childRef(ref) {\n      return socketRef = ref;\n    },\n    onOpen: onConnect,\n    onError: props.onError,\n    onMessage: onMessage,\n    onClose: function onClose() {\n      props.onClose && props.onClose();\n      props.onRefresh && props.onRefresh();\n    }\n  });\n};\nvar SingleChatSocket = function SingleChatSocket(props) {\n  var didMountRef = useRef(false);\n  var _useState = useState(false),\n    isHidden = _useState[0],\n    setIsHidden = _useState[1];\n  useEffect(function () {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n    }\n  }, []);\n  function reRender() {\n    return _reRender.apply(this, arguments);\n  }\n  function _reRender() {\n    _reRender = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsHidden(true);\n              setTimeout(function () {\n                return setIsHidden(false);\n              }, 100);\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _reRender.apply(this, arguments);\n  }\n  if (isHidden) return React.createElement(\"div\", null);\n  return React.createElement(ChildSocket$1, {\n    projectId: props.projectId,\n    chatId: props.chatId,\n    chatAccessKey: props.chatAccessKey,\n    wsUrl: props.wsUrl,\n    onRefresh: reRender,\n    onConnect: props.onConnect,\n    onAuthFail: props.onAuthFail,\n    onError: props.onError,\n    onClose: props.onClose,\n    onEditChat: props.onEditChat,\n    onDeleteChat: props.onDeleteChat,\n    onNewMessage: props.onNewMessage,\n    onEditMessage: props.onEditMessage,\n    onDeleteMessage: props.onDeleteMessage,\n    onIsTyping: props.onIsTyping\n  });\n};\nexport { Autocomplete, Avatar, Button, ChatAvatars, ChatCard, ChatFeed, ChatForm, ChatHeader, ChatList, ChatSettings, Dot, Dropdown, File, Image, Input, MessageForm, MessageList, MultiChatSocket, MultiChatWindow, OptionsSettings, PeopleSettings, PhotosSettings, RenderTrigger, SingleChatSocket, Spinner, deleteChat, formatDateTime, formatTime, getChat, getChatsBefore, getDateTime, getMessages, getOrCreateChat, getPeopleToInvite, invitePerson, newChat, newMessage, readMessage, removePerson, useMultiChatLogic, useSingleChatLogic };","map":{"version":3,"mappings":"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","names":["getMessages","host","headers","chatId","messageCount","callback","axios","get","then","response","data","error","console","log","newMessage","message","formdata","FormData","attachments","length","i","append","blob","file","text","created","sender_username","JSON","stringify","post","readMessage","messageId","patch","last_read","getChat","deleteChat","getChatsBefore","before","chatCount","put","getOrCreateChat","newChat","title","getPeopleToInvite","invitePerson","username","removePerson","styles","style","position","height","chatListColumnStyle","overflowY","chatFeedColumnStyle","borderRight","borderLeft","chatSettingsColumnStyle","chatListMobileButtonStyle","top","left","chatSettingsMobileButtonStyle","right","width","maxHeight","overflowX","backgroundColor","loadingMoreChatsStyle","fontFamily","textAlign","margin","paddingTop","paddingBottom","borderRadius","titleStyle","fontSize","fontWeight","inputStyle","buttonStyle","color","border","outline","cursor","padding","transition","WebkitTransition","MozTransition","hoveredStyle","opacity","Button","props","type","useState","hovered","setHovered","getTypeStyle","primaryStyle","dangerStyle","typeStyle","React","onClick","className","onMouseEnter","onMouseLeave","children","boxSizing","focusStyle","Input","didMountRef","useRef","currentValue","setCurrentValue","focused","setFocused","useEffect","current","defaultValue","event","target","value","onChange","autoFocus","placeholder","label","e","onFocus","onBlur","ChatForm","selected","setSelected","setValue","onSubmit","preventDefault","onFormSubmit","renderChatForm","visibility","colors","stringToNumber","str","sum","charCodeAt","stringToColor","backgroundRepeat","backgroundPosition","backgroundSize","lineHeight","statusStyle","Avatar","localAvatar","setLocalAvatar","avatarUrl","substring","toUpperCase","newAvatar","split","avatarUrlStyle","backgroundImage","display","isOnline","undefined","activeStyle","avatarStyle","whiteSpace","overflow","notificationStyle","subtitleStyle","bottom","timeStampStyle","loadingBarStyle","ChatCard","description","timeStamp","isLoading","hasNotificationStyle","hasNotification","renderChatCard","isActive","renderAvatar","avatarUsername","id","dangerouslySetInnerHTML","__html","RenderTrigger","useOnScreen","ref","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","onShow","onHide","observe","disconnect","getDateTime","date","timezoneOffset","replace","year","substr","month","day","hour","minute","second","d","Date","setHours","getHours","formatTime","dateTime","time","toLocaleString","slice","formatDateTime","Spinner","viewBox","focusable","readLastMessage","chat","people","some","chatPerson","person","last_message","renderLoading","map","_","key","getDescription","ChatList","activeChatId","renderChats","chats","index","otherPerson","find","is_direct_chat","toString","onChatCardClick","sender","_chat$last_message$se","avatar","renderChatList","onChatFormSubmit","hasMoreChats","onChatLoaderShow","chatHeaderStyle","messageListStyle","messageFormStyle","zIndex","mobileOptionStyle","setConfiguration","maxScreenClass","gutterWidth","ChatHeader","renderChatHeader","Row","Col","xs","sm","messageStyle","theirStyles","senderUsernameStyle","paddingLeft","attachmentsStyle","bodyStyle","timeTagStyle","marginLeft","bubbleStyle","overflowWrap","maxWidth","readsStyle","readStyle","myStyles","marginRight","Dot","isVisible","DateTime","offset","marginBottom","images","isImage","fileName","dotSplit","indexOf","toLowerCase","getFileName","fileUrl","slashSplit","nameAndHash","urlOrLoading","url","File","isHovered","setIsHovered","window","open","minHeight","minWidth","objectFit","Image","loadingUrl","src","alt","Message","lastMessage","nextMessage","isSending","isMyMessage","showDateTime","topRadius","bottomRadius","borderStyle","sendingStyle","isLastMessage","renderAttachments","renderImage","attachment","attachmentsImageStyle","attachmentsFileStyle","renderReads","chatPeople","renderMessage","dateTimeStyle","MessageList","messages","messagesObject","mapKeys","keys","Object","sort","renderMessages","lastKey","nextKey","lastDate","thisDate","onBottomMessageShow","onBottomMessageHide","renderMessageList","_props$chat","_props$chat2","hasMoreMessages","onMessageLoaderShow","onMessageLoaderHide","font","paddingRight","resize","sendButtonStyle","draftAttachmentStyle","draftAttachmentRemoveStyle","draftImageStyle","draftFileStyle","iconStyle","AttachmentInput","hoverStyle","onSelect","files","onSelectFiles","encType","htmlFor","multiple","MessageForm","iter","setIter","setHeight","buttonHover","setButtonHover","setAttachments","textarea","document","getElementById","Math","min","scrollHeight","toISOString","floor","random","localAttachments","name","custom_json","onKeyDown","onRemove","newAttachments","splice","Array","from","URL","createObjectURL","renderMessageForm","rows","attachmentInputStyle","attachmentInputIconStyle","gifStyle","textStyle","WelcomeGif","renderWelcomeGif","formattedDateTime","ChatFeed","renderChatFeed","onMessageFormSubmit","chatTitleStyle","oneAvatarStyle","avatarOne","twoAvatarsStyle","avatarTwo","threeAvatarsStyle","avatarThree","ChatAvatars","users","getStyle","getPeopleToRender","isDirectChat","topPeople","propsStyle","renderChatAvatars","usernameStyle","deleteButtonStyle","optionStyle","addMemberStyle","addMemberInputStyle","closeStyle","optionsStyle","emptyEvent","getOptions","options","maxVisibleOptions","filter","option","Autocomplete","showOptions","setShowOptions","addEventListener","handleClickOutside","removeEventListener","contains","renderOptions","max","renderOption","borderTop","barStyle","barHoveredStyle","bodyExpandedStyle","Dropdown","expanded","setExpanded","transform","fill","PeopleSettings","peopleToInvite","renderChatPeople","is_online","canDelete","onRemovePersonClick","renderChatPeopleOption","onInvitePersonClick","renderPeopleSettings","imageWrapperStyle","imagePaddingStyle","imageStyle","PhotosSettings","renderImages","renderPhotosSettings","deleteChatButtonStyle","OptionsSettings","renderOptionsSettings","onDeleteChatClick","ChatSettings","renderChatSettings","admin","peopleSettingsStyle","photosSettingsStyle","optionsSettingsStyle","MultiChatWindow","innerWidth","isMobile","setIsMobile","handleResize","isChatListLoading","isChatSettingsLoading","chatAvatarsProps","onCloseMobileChatSettingsClick","CloseOutlined","isChatFeedLoading","onMobileChatListClick","UnorderedListOutlined","isMobileChatListOpen","onMobileChatSettingsClick","SettingOutlined","isMobileChatSettingsOpen","chatCountIterator","messageCountIterator","sortChats","a","b","aDate","bDate","getTime","sortMessages","useMultiChatLogic","projectId","secret","httpUrl","setActiveChatId","setChats","setMessages","setPeopleToInvite","setHasMoreChats","setHasMoreMessages","isChatFeedAtBottom","setIsChatFeedAtBottom","setIsChatListLoading","setIsChatFeedLoading","setIsChatSettingsLoading","setIsMobileChatListOpen","setIsMobileChatSettingsOpen","chatCountRef","messageCountRef","fetchMultiChatData","now","onGetChats","currentChat","sortedChats","onNewChat","newChats","concat","onEditChat","otherChats","onDeleteChat","oldChat","onGetMessages","onNewMessage","otherMessages","newMessages","sortedMessages","animateScroll","scrollToBottom","duration","containerId","onEditMessage","onDeleteMessage","oldMessage","onConnect","onAuthFail","newActiveChatId","setTimeout","scrollContainerId","messageListId","currentElement","currentHeight","clientHeight","element","scrollTo","onIsTyping","wsUrl","useSingleChatLogic","chatAccessKey","setChat","fetchSingleChatData","ChildSocket","sessionToken","onMessage","eventJSON","parse","action","WebSocket","reconnect","reconnectIntervalInMilliSeconds","onOpen","onError","onClose","onRefresh","getSessionToken","token","MultiChatSocket","isHidden","setIsHidden","setToken","reRender","socketRef","pingIntervalId","timeIntervalId","pingInterval","minLag","setNow","shouldPongBy","setShouldPongBy","clearInterval","setInterval","sendMessage","childRef","SingleChatSocket"],"sources":["/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/messages/getMessages.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/messages/newMessage.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/messages/readMessage.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/chats/getChat.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/chats/deleteChat.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/chats/getChatsBefore.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/chats/getOrCreateChat.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/chats/newChat.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/people/getPeopleToInvite.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/people/invitePerson.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/actions/people/removePerson.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/ChatForm/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Button/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Button/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Input/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Input/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/ChatForm/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/util/colorMapping.ts","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Avatar/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Avatar/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/ChatCard/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/ChatCard/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/RenderTrigger/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/RenderTrigger/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/util/dateTime.ts","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Spinner/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Spinner/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatList/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/ChatHeader/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/ChatHeader/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/Message/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Dot/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Dot/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/Message/DateTime/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/Message/DateTime/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/File/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/util/file.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/File/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Image/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Image/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/Message/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageList/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageForm/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageForm/AttachmentInput/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageForm/AttachmentInput/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/MessageForm/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/WelcomeGif/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/WelcomeGif/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatFeed/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/ChatAvatars/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/ChatAvatars/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/PeopleSettings/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Autocomplete/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Autocomplete/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Dropdown/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/Components/Dropdown/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/PeopleSettings/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/PhotosSettings/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/PhotosSettings/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/OptionsSettings/styles.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/OptionsSettings/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/ChatSettings/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/components/MultiChatWindow/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/hooks/useMultiChatLogic.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/hooks/useSingleChatLogic.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/sockets/MultiChatSocket/childSocket.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/sockets/MultiChatSocket/index.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/sockets/SingleChatSocket/childSocket.tsx","/Users/vigneshgr/workspace/pract/fullstack-chat/client-react/node_modules/react-chat-engine-advanced/src/sockets/SingleChatSocket/index.tsx"],"sourcesContent":["import {\n  MessageObject,\n  UserAuthHeaders,\n  ChatAuthHeaders,\n} from '../../interfaces';\n\nimport axios from 'axios';\n\ntype GetMessages = (\n  host: string,\n  headers: UserAuthHeaders | ChatAuthHeaders,\n  chatId: number,\n  messageCount: number,\n  callback: (chatId: number, messages: MessageObject[]) => void\n) => void;\n\nexport const getMessages: GetMessages = (\n  host,\n  headers,\n  chatId,\n  messageCount,\n  callback\n) => {\n  axios\n    .get(`${host}/chats/${chatId}/messages/latest/${messageCount}/`, {\n      headers,\n    })\n    .then((response) => {\n      // props.onGetMessages && props.onGetMessages(chatId, response.data)\n      callback(chatId, response.data);\n    })\n    .catch((error) => {\n      console.log('Fetch Latest Messages Error', error);\n    });\n};\n","import _ from 'lodash';\nimport axios from 'axios';\n\nimport {\n  MessageObject,\n  ChatAuthHeaders,\n  UserAuthHeaders,\n} from '../../interfaces';\n\ntype NewMessage = (\n  host: string,\n  headers: UserAuthHeaders | ChatAuthHeaders,\n  chatId: number | undefined,\n  message: MessageObject,\n  callback: (message: MessageObject) => void\n) => void;\n\nexport const newMessage: NewMessage = (\n  host,\n  headers,\n  chatId,\n  message,\n  callback\n) => {\n  if (!chatId) return;\n\n  const formdata = new FormData();\n  if (message.attachments.length > 0) {\n    for (let i = 0; i < message.attachments.length; i++) {\n      formdata.append(\n        'attachments',\n        message.attachments[i].blob as Blob,\n        message.attachments[i].file as string\n      );\n    }\n  }\n  message.text !== null && formdata.append('text', message.text);\n  formdata.append('created', message.created);\n  formdata.append('sender_username', message.sender_username);\n  formdata.append('custom_json', JSON.stringify({}));\n\n  axios\n    .post(`${host}/chats/${chatId}/messages/`, formdata, { headers })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('New Message Error', error);\n    });\n};\n","import axios from 'axios';\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype ReadMessages = (\n  host: string,\n  headers: UserAuthHeaders,\n  chatId: number,\n  messageCount: number,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const readMessage: ReadMessages = (\n  host,\n  headers,\n  chatId,\n  messageId,\n  callback\n) => {\n  axios\n    .patch(\n      `${host}/chats/${chatId}/people/`,\n      { last_read: messageId },\n      { headers }\n    )\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Read Message Error', error);\n    });\n};\n","import axios from 'axios';\n\nimport { ChatObject, ChatAuthHeaders, UserAuthHeaders } from '../../interfaces';\n\ntype GetChat = (\n  host: string,\n  headers: UserAuthHeaders | ChatAuthHeaders,\n  chatId: number | string,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const getChat: GetChat = (host, headers, chatId, callback) => {\n  axios\n    .get(`${host}/chats/${chatId}/`, {\n      headers,\n    })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Get Chat Error', error);\n    });\n};\n","import axios from 'axios';\n\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype DeleteChat = (\n  host: string,\n  headers: UserAuthHeaders,\n  chatId: number | string,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const deleteChat: DeleteChat = (host, headers, chatId, callback) => {\n  axios\n    .delete(`${host}/chats/${chatId}/`, {\n      headers,\n    })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Delete Chat Error', error);\n    });\n};\n","import _ from 'lodash';\nimport axios from 'axios';\n\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype GetChatsBefore = (\n  host: string,\n  headers: UserAuthHeaders,\n  before: string,\n  chatCount: number,\n  callback: (chats: Array<ChatObject>) => void\n) => void;\n\nexport const getChatsBefore: GetChatsBefore = (\n  host,\n  headers,\n  before,\n  chatCount,\n  callback\n) => {\n  axios\n    .put(`${host}/chats/latest/${chatCount}/`, { before }, { headers })\n    .then((response) => {\n      // props.onGetChats && props.onGetChats(response.data);\n      callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Fetch Chats Before Error', error);\n    });\n};\n","import axios from 'axios';\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ninterface NewChat {\n  is_direct_chat?: boolean;\n  usernames: string[];\n}\n\nexport const getOrCreateChat = (\n  host: string = 'https://api.chatengine.io',\n  headers: UserAuthHeaders,\n  data: NewChat,\n  callback: (chat: ChatObject) => void\n) => {\n  axios\n    .put(`${host}/chats/`, data, {\n      headers,\n    })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Get or Create Chat Error', error);\n    });\n};\n","import _ from 'lodash';\nimport axios from 'axios';\n\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype NewChat = (\n  host: string,\n  headers: UserAuthHeaders,\n  title: string | undefined,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const newChat: NewChat = (host, headers, title, callback) => {\n  if (!title) return;\n\n  axios\n    .post(`${host}/chats/`, { title }, { headers })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('New Chat Error', error);\n    });\n};\n","import axios from 'axios';\n\nimport { PersonObject, UserAuthHeaders } from '../../interfaces';\n\ntype GetPeopleToInvite = (\n  host: string,\n  headers: UserAuthHeaders,\n  chatId: number,\n  callback: (peopleToInvite: PersonObject[]) => void\n) => void;\n\nexport const getPeopleToInvite: GetPeopleToInvite = (\n  host,\n  headers,\n  chatId,\n  callback\n) => {\n  axios\n    .get(`${host}/chats/${chatId}/others/`, { headers })\n\n    .then((response) => {\n      // props.onGetOtherPeople && props.onGetOtherPeople(chatId, response.data)\n      callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Fetch People to Invite Error', error);\n    });\n};\n","import axios from 'axios';\n\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype InvitePerson = (\n  host: string,\n  headers: UserAuthHeaders,\n  chatId: number,\n  username: string,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const invitePerson: InvitePerson = (\n  host,\n  headers,\n  chatId,\n  username,\n  callback\n) => {\n  axios\n    .post(`${host}/chats/${chatId}/people/`, { username }, { headers })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Invite Person Error', error);\n    });\n};\n","import axios from 'axios';\n\nimport { ChatObject, UserAuthHeaders } from '../../interfaces';\n\ntype RemovePerson = (\n  host: string,\n  headers: UserAuthHeaders,\n  chatId: number,\n  username: string,\n  callback: (chat: ChatObject) => void\n) => void;\n\nexport const removePerson: RemovePerson = (\n  host,\n  headers,\n  chatId,\n  username,\n  callback\n) => {\n  axios\n    .put(`${host}/chats/${chatId}/people/`, { username }, { headers })\n\n    .then((response) => {\n      callback && callback(response.data);\n    })\n\n    .catch((error) => {\n      console.log('Remove Person Error', error);\n    });\n};\n","export interface ChatEngineStyles {\n  style?: React.CSSProperties;\n  chatListColumnStyle?: React.CSSProperties;\n  chatFeedColumnStyle?: React.CSSProperties;\n  chatSettingsColumnStyle?: React.CSSProperties;\n  chatListMobileButtonStyle?: React.CSSProperties;\n  chatSettingsMobileButtonStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatEngineStyles = {\n  style: { position: 'relative', height: '100%' },\n  chatListColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll',\n  },\n  chatFeedColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll',\n    borderRight: '1px solid #afafaf',\n    borderLeft: '1px solid #afafaf',\n  },\n  chatSettingsColumnStyle: {\n    height: '100%',\n    overflowY: 'scroll',\n  },\n  chatListMobileButtonStyle: {\n    position: 'absolute',\n    top: '12px',\n    left: '12px',\n  },\n  chatSettingsMobileButtonStyle: {\n    position: 'absolute',\n    top: '12px',\n    right: '12px',\n  },\n};\n","export interface ChatListStyles {\n  style?: React.CSSProperties;\n  loadingMoreChatsStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatListStyles = {\n  style: {\n    width: '100%',\n    height: '100%',\n    maxHeight: '100vh',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    backgroundColor: 'white',\n  },\n  loadingMoreChatsStyle: {\n    fontFamily: 'Avenir',\n    textAlign: 'center',\n    backgroundColor: '#e2e2e2',\n    margin: '4px',\n    paddingTop: '14px',\n    paddingBottom: '14px',\n    borderRadius: '4px',\n  },\n};\n","export interface ChatFormStyles {\n  style?: React.CSSProperties;\n  titleStyle?: React.CSSProperties;\n  inputStyle?: React.CSSProperties;\n  buttonStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatFormStyles = {\n  style: {\n    position: 'relative',\n    height: '64px',\n    width: '100%',\n    backgroundColor: 'white',\n  },\n  titleStyle: {\n    // Position\n    position: 'absolute',\n    top: '16px',\n    left: '14px',\n    // Size\n    fontSize: '26px',\n    // Style\n    fontFamily: 'Avenir',\n    fontWeight: 600,\n  },\n  inputStyle: {\n    // Position\n    position: 'absolute',\n    top: '15px',\n    left: '14px',\n    // Size\n    width: 'calc(100% - 28px)',\n  },\n  buttonStyle: {\n    // Position\n    position: 'absolute',\n    top: '15px',\n    right: '14px',\n    // Style\n    fontFamily: 'Avenir',\n    fontWeight: 600,\n  },\n};\n","export interface ButtonStyles {\n  style?: React.CSSProperties;\n  hoveredStyle?: React.CSSProperties;\n}\n\nexport const styles: ButtonStyles = {\n  style: {\n    fontFamily: 'Avenir',\n    color: '#1890ff',\n    border: '1px solid #1890ff',\n    outline: 'none',\n    height: '36px',\n    fontSize: '15px',\n    cursor: 'pointer',\n    padding: '8px 16px',\n    borderRadius: '33px',\n    backgroundColor: 'white',\n    transition: 'all .44s ease',\n    WebkitTransition: 'all .44s ease',\n    MozTransition: 'all .44s ease',\n  },\n  hoveredStyle: { opacity: '0.73' },\n};\n","import React, { useState } from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const Button = (props: Props) => {\n  const { type = 'default' } = props;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n\n  const getTypeStyle = () => {\n    if (type == 'primary') {\n      return primaryStyle;\n    } else if (type === 'danger') {\n      return dangerStyle;\n    } else {\n      return {} as React.CSSProperties;\n    }\n  };\n\n  const typeStyle = getTypeStyle();\n\n  return (\n    <button\n      onClick={props.onClick}\n      className={`ce-${type}-button ${props.className}`}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      style={{\n        // Default\n        ...styles.style,\n        ...typeStyle,\n        // State\n        ...(hovered ? styles.hoveredStyle : {}),\n        // Props\n        ...props.style,\n        // Props + State\n        ...(hovered ? props.hoveredStyle : {}),\n      }}\n    >\n      {props.children}\n    </button>\n  );\n};\n\nconst primaryStyle = {\n  color: 'white',\n  border: 'none',\n  backgroundColor: '#1890ff',\n} as React.CSSProperties;\n\nconst dangerStyle = {\n  color: '#f5222d',\n  backgroundColor: 'white',\n  border: '1px solid #f5222d',\n} as React.CSSProperties;\n","export interface InputStyles {\n  style?: React.CSSProperties;\n  focusStyle?: React.CSSProperties;\n}\n\nexport const styles: InputStyles = {\n  style: {\n    fontFamily: 'Avenir',\n    height: '36px',\n    fontSize: '15px',\n    outline: 'none',\n    borderRadius: '24px',\n    border: '1px solid #d9d9d9',\n    padding: '0px 12px',\n    boxSizing: 'border-box',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  focusStyle: {\n    border: '1px solid #1890ff',\n  },\n};\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const Input = (props: Props) => {\n  const didMountRef = useRef<boolean>(false);\n  const [currentValue, setCurrentValue] = useState<string>('');\n  const [focused, setFocused] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n\n      if (props.defaultValue) {\n        const event = {\n          target: { value: currentValue },\n        } as React.ChangeEvent<HTMLInputElement>;\n        props.onChange && props.onChange(event);\n        setCurrentValue(props.defaultValue);\n      }\n    }\n  });\n\n  return (\n    <input\n      autoFocus={props.autoFocus}\n      className={`ce-input ce-text-input ${props.className}`}\n      placeholder={props.label}\n      value={typeof props.value === 'string' ? props.value : currentValue}\n      onChange={(e) => {\n        setCurrentValue(e.target.value);\n        props.onChange && props.onChange(e);\n      }}\n      onFocus={(e) => {\n        setFocused(true);\n        props.onFocus && props.onFocus(e);\n      }}\n      onBlur={(e) => {\n        setFocused(false);\n        props.onBlur && props.onBlur(e);\n      }}\n      style={{\n        ...styles.style,\n        ...(focused ? styles.focusStyle : {}),\n        ...props.style,\n        ...(focused ? props.focusStyle : {}),\n      }}\n    />\n  );\n};\n","import React, { useState } from 'react';\n\nimport { ChatFormProps } from './props';\nimport { styles } from './styles';\n\nimport { Button } from '../../../Components/Button';\nimport { Input } from '../../../Components/Input';\n\nexport const ChatForm: React.FC<ChatFormProps> = (props: ChatFormProps) => {\n  const [selected, setSelected] = useState<boolean>(false);\n  const [value, setValue] = useState<string>('');\n\n  const onSubmit = (event: React.SyntheticEvent) => {\n    event.preventDefault();\n    props.onFormSubmit && props.onFormSubmit(value);\n    setValue('');\n  };\n\n  const onChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setValue(event.target.value);\n  };\n\n  if (props.renderChatForm) {\n    return <>{props.renderChatForm(props)}</>;\n  }\n\n  return (\n    <div\n      className=\"ce-chat-form\"\n      style={{\n        ...styles.style,\n        ...props.style,\n      }}\n    >\n      <span\n        className=\"ce-chat-form-title\"\n        style={{\n          ...styles.titleStyle,\n          ...props.titleStyle,\n        }}\n      >\n        My Chats\n      </span>\n\n      <Button\n        style={{\n          ...styles.buttonStyle,\n          ...props.buttonStyle,\n        }}\n        className=\"ce-chat-form-button\"\n        onClick={() => setSelected(true)}\n      >\n        +\n      </Button>\n\n      <form className=\"ce-chat-form-html-form\" onSubmit={onSubmit}>\n        <Input\n          autoFocus\n          value={value}\n          label=\"Chat Title\"\n          className=\"ce-chat-form-input\"\n          style={{\n            ...styles.inputStyle,\n            ...{ visibility: selected ? 'visible' : 'hidden' },\n            ...props.inputStyle,\n          }}\n          onChange={onChange}\n          onBlur={() => setSelected(false)}\n        />\n      </form>\n    </div>\n  );\n};\n","const colors = [\n  '#D64045',\n  '#5B3000',\n  '#00CC99',\n  '#467599',\n  '#1D3354',\n  '#8F250C',\n  '#6153CC',\n  '#961D4E',\n  '#A29F15',\n  '#0CAADC',\n  '#FF5154',\n  '#FA7921',\n  '#688E26',\n  '#550527',\n  '#A10702',\n  '#FF1053',\n  '#6C6EA0',\n  '#100B00',\n]\n\nconst stringToNumber = (str: string) => {\n  let sum = 0\n  for (var i = 0; i < str.length; i++) {\n    sum += str.charCodeAt(i);\n  }\n  return sum\n}\n\nexport const stringToColor = (str: string | undefined) => {\n  if (!str) {\n    return 'black'\n  } else {\n    return colors[stringToNumber(str) % colors.length]\n  }\n}","export interface AvatarStyles {\n  style?: React.CSSProperties;\n  statusStyle?: React.CSSProperties;\n}\n\nexport const styles: AvatarStyles = {\n  style: {\n    // Position\n    position: 'relative',\n    // Size\n    width: '44px',\n    height: '44px',\n    // Style\n    borderRadius: '50%',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center',\n    backgroundSize: '48px',\n    // Text Style\n    color: 'white',\n    textAlign: 'center',\n    fontFamily: 'Avenir',\n    fontSize: '15px',\n    lineHeight: '44px',\n    fontWeight: 600,\n  },\n  statusStyle: {\n    // Position\n    position: 'absolute',\n    top: '0px',\n    right: '0px',\n    // Style\n    width: '8px',\n    height: '8px',\n    borderRadius: '100%',\n    border: '2px solid white',\n  },\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { stringToColor } from '../../util/colorMapping';\n\nimport { Props } from './props';\n\nimport { styles } from './styles';\n\nexport const Avatar = (props: Props) => {\n  // Save Copy of URL to avoid flickering\n  const [localAvatar, setLocalAvatar] = useState<string>('');\n  const { username = '', avatarUrl = '' } = props;\n\n  const text = username ? username.substring(0, 2).toUpperCase() : '';\n  const color = stringToColor(username);\n\n  useEffect(() => {\n    const newAvatar = avatarUrl !== null ? avatarUrl : '';\n    if (newAvatar.split('?')[0] !== localAvatar.split('?')[0]) {\n      setLocalAvatar(newAvatar);\n    }\n  });\n\n  const avatarUrlStyle = {\n    backgroundColor: localAvatar.length > 0 ? '#FFFFFF' : color,\n    backgroundImage: localAvatar.length > 0 && `url(${localAvatar})`,\n  } as React.CSSProperties;\n\n  return (\n    <div\n      className={`ce-avatar ${props.className}`}\n      onClick={props.onClick}\n      style={{\n        ...styles.style,\n        ...avatarUrlStyle,\n        ...props.style,\n      }}\n    >\n      {localAvatar.length === 0 && text}\n\n      <div\n        className=\"ce-avatar-status\"\n        style={{\n          ...styles.statusStyle,\n          ...{\n            display: props.isOnline === undefined ? 'none' : 'auto',\n            backgroundColor: props.isOnline ? '#52c41a' : '#f5222d',\n          },\n          ...props.statusStyle,\n        }}\n      />\n    </div>\n  );\n};\n","export interface ChatCardStyle {\n  style?: React.CSSProperties;\n  hoveredStyle?: React.CSSProperties;\n  activeStyle?: React.CSSProperties;\n  avatarStyle?: React.CSSProperties;\n  titleStyle?: React.CSSProperties;\n  notificationStyle?: React.CSSProperties;\n  subtitleStyle?: React.CSSProperties;\n  timeStampStyle?: React.CSSProperties;\n  loadingBarStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatCardStyle = {\n  style: {\n    position: 'relative',\n    height: '76px',\n    borderRadius: '12px',\n    cursor: 'pointer',\n    transition: 'all .44s ease',\n    WebkitTransition: 'all .44s ease',\n    MozTransition: 'all .44s ease',\n  },\n  hoveredStyle: {\n    backgroundColor: '#f5f5f5',\n    border: '0px solid white',\n  },\n  activeStyle: {\n    backgroundColor: '#d9d9d9',\n    border: '0px solid white',\n  },\n  avatarStyle: { position: 'absolute', top: '16px', left: '12px' },\n  titleStyle: {\n    // Position\n    position: 'absolute',\n    top: '12px',\n    left: '68px',\n    // Size\n    width: 'calc(100% - 68px - 32px)',\n    // Font\n    fontWeight: 500,\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir',\n  },\n  notificationStyle: {\n    // Position\n    position: 'absolute',\n    top: 'calc(12px + 6px)',\n    right: '12px',\n    // Style\n    width: '12px',\n    height: '12px',\n    borderRadius: '6px',\n    backgroundColor: '#1890ff',\n    float: 'right',\n  },\n  subtitleStyle: {\n    // Position\n    position: 'absolute',\n    bottom: '12px',\n    left: '68px',\n    // Size\n    width: 'calc(70% - 68px)',\n    // Style\n    color: 'rgba(153, 153, 153, 1)',\n    fontSize: '14px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir',\n  },\n  timeStampStyle: {\n    // Position\n    position: 'absolute',\n    bottom: '12px',\n    right: '12px',\n    // Size\n    width: '20%',\n    // Style\n    textAlign: 'right',\n    color: 'rgba(153, 153, 153, 1)',\n    fontSize: '14px',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    fontFamily: 'Avenir',\n  },\n  loadingBarStyle: {\n    borderRadius: '4px',\n    backgroundColor: '#e2e2e2',\n    color: '#e2e2e2',\n  },\n};\n","import React, { useState } from 'react';\n\nimport { Avatar } from '../../../Components/Avatar';\n\nimport { stringToColor } from '../../../util/colorMapping';\n\nimport { ChatCardProps } from './props';\nimport { styles } from './styles';\n\nexport const ChatCard: React.FC<ChatCardProps> = (props: ChatCardProps) => {\n  const { title = '', description = '', timeStamp = '' } = props;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n\n  const loadingBarStyle: React.CSSProperties = props.isLoading\n    ? { ...styles.loadingBarStyle, ...props.loadingBarStyle }\n    : {};\n\n  const hasNotificationStyle: React.CSSProperties = props.hasNotification\n    ? {}\n    : { display: 'none' };\n\n  if (props.renderChatCard) {\n    return <>{props.renderChatCard(props)}</>;\n  }\n\n  return (\n    <div\n      onClick={props.onClick}\n      onMouseEnter={() => setHovered(true)}\n      onMouseLeave={() => setHovered(false)}\n      style={{\n        // Default\n        ...styles.style,\n        // State\n        ...(hovered ? styles.hoveredStyle : {}),\n        ...(props.isActive ? styles.activeStyle : {}),\n        // Props\n        ...props.style,\n        // Props + State\n        ...(hovered ? props.hoveredStyle : {}),\n        ...(props.isActive ? props.activeStyle : {}),\n      }}\n      className={`\n        ce-chat-card \n        ${props.isActive && 'ce-active-chat-card'} \n        ${hovered && 'ce-hovered-chat-card'}\n      `}\n    >\n      {props.renderAvatar ? (\n        props.renderAvatar(props)\n      ) : (\n        <Avatar\n          username={props.avatarUsername}\n          avatarUrl={props.avatarUrl}\n          className=\"ce-chat-card-avatar\"\n          style={{\n            ...styles.avatarStyle,\n            ...{\n              backgroundColor: props.isLoading\n                ? '#e2e2e2'\n                : stringToColor(props.avatarUsername),\n            },\n            ...props.avatarStyle,\n          }}\n        />\n      )}\n\n      <div\n        className={`ce-chat-card-title ${\n          props.isLoading && 'ce-chat-card-title-loading ce-chat-card-loading'\n        }`}\n        style={{\n          ...styles.titleStyle,\n          ...loadingBarStyle,\n          ...props.titleStyle,\n        }}\n        id={`ce-chat-card-title-${title}`}\n      >\n        {props.isLoading ? '.' : title}\n      </div>\n\n      <div\n        className={`ce-chat-card-unread ${\n          props.isLoading && 'ce-chat-card-unread-loading ce-chat-card-loading'\n        }`}\n        style={{\n          ...styles.notificationStyle,\n          ...hasNotificationStyle,\n          ...loadingBarStyle,\n          ...props.notificationStyle,\n        }}\n      />\n\n      <div\n        className={`ce-chat-card-subtitle ${\n          props.isLoading &&\n          'ce-chat-card-subtitle-loading ce-chat-card-loading'\n        }`}\n        style={{\n          ...styles.subtitleStyle,\n          ...loadingBarStyle,\n          ...props.subtitleStyle,\n        }}\n      >\n        <div\n          className={`ce-chat-card-subtitle-html ${\n            props.isLoading &&\n            'ce-chat-card-subtitle-html-loading ce-chat-card-loading'\n          }`}\n          dangerouslySetInnerHTML={{\n            __html: props.isLoading ? '.' : description,\n          }}\n        />\n        <style>{`p {margin-block-start: 0px; margin-block-end: 0px;}`}</style>\n      </div>\n\n      <div\n        className={`ce-chat-card-time-stamp ${\n          props.isLoading &&\n          'ce-chat-card-time-stamp-loading ce-chat-card-loading'\n        }`}\n        style={{\n          ...styles.timeStampStyle,\n          ...loadingBarStyle,\n          ...props.timeStampStyle,\n        }}\n      >\n        {props.isLoading ? '.' : timeStamp}\n      </div>\n    </div>\n  );\n};\n","export interface RenderTriggerStyles {\n  style?: React.CSSProperties;\n}\n\nexport const styles: RenderTriggerStyles = {\n  style: {\n    fontFamily: 'Avenir',\n  },\n};\n","import React, { useState, useRef, useEffect } from 'react';\n\nimport { Props } from './props';\n\nimport { styles } from './styles';\n\nexport const RenderTrigger: React.FC<Props> = (props: Props) => {\n  const { children = 'Loading...' } = props;\n\n  const useOnScreen = (ref: React.RefObject<HTMLDivElement>) => {\n    const [isIntersecting, setIntersecting] = useState(false);\n\n    const observer = new IntersectionObserver(([entry]) => {\n      setIntersecting(entry.isIntersecting);\n      if (entry.isIntersecting) {\n        props.onShow && props.onShow();\n      } else {\n        props.onHide && props.onHide();\n      }\n    });\n\n    useEffect(() => {\n      observer.observe(ref.current as Element);\n      return () => observer.disconnect();\n    }, []);\n\n    return isIntersecting;\n  };\n\n  const ref = useRef<HTMLDivElement>(null);\n  ref !== null && useOnScreen(ref);\n\n  return (\n    <div\n      ref={ref}\n      style={{ ...styles.style, ...props.style }}\n      className=\"ce-chat-loader\"\n    >\n      {children}\n    </div>\n  );\n};\n","export const getDateTime = (date: string, timezoneOffset: number = 0) => {\n  date = date.replace(/ /g, 'T');\n\n  const year = date.substr(0, 4);\n  const month = date.substr(5, 2);\n  const day = date.substr(8, 2);\n  const hour = date.substr(11, 2);\n  const minute = date.substr(14, 2);\n  const second = date.substr(17, 2);\n\n  var d = new Date(`${year}-${month}-${day}T${hour}:${minute}:${second}`);\n  d.setHours(d.getHours() + timezoneOffset);\n  return d;\n};\n\nexport function formatTime(dateTime: Date) {\n  var time = dateTime.toLocaleString('en-US');\n  return time.split(' ')[1].slice(0, -3) + ' ' + time.slice(-2);\n}\n\nexport function formatDateTime(dateTime: Date) {\n  return dateTime.toLocaleString('en-US')\n}\n","export interface SpinnerStyles {\n  style?: React.CSSProperties;\n}\n\nexport const styles: SpinnerStyles = {\n  style: { width: '1em', height: '1em' },\n};\n","import React from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const Spinner: React.FC<Props> = (props: Props) => {\n  return (\n    <svg\n      viewBox=\"0 0 1024 1024\"\n      focusable=\"false\"\n      aria-hidden=\"true\"\n      className=\"ce-spinner\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <path d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z\"></path>\n\n      <style>{`\n      .ce-spinner {\n        animation-name: spin;\n        animation-duration: 950ms;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear; \n      }\n      @keyframes spin {\n        from { transform:rotate(0deg); }\n        to { transform:rotate(360deg); }\n      }\n      `}</style>\n    </svg>\n  );\n};\n","import React from 'react';\n\nimport { ChatListProps } from './props';\nimport { styles } from './styles';\n\nimport { ChatForm } from './ChatForm';\nimport { ChatCard } from './ChatCard';\n\nimport { RenderTrigger } from '../../Components/RenderTrigger';\n\nimport { ChatObject } from '../../../interfaces';\nimport { getDateTime } from '../../util/dateTime';\n\nimport { Spinner } from '../../Components/Spinner';\n\nconst readLastMessage = (username: string, chat: ChatObject) => {\n  return chat.people.some(\n    (chatPerson) =>\n      chatPerson.person.username === username &&\n      chatPerson.last_read === chat.last_message.id\n  );\n};\nconst renderLoading = () => {\n  return [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1].map((_, i) => {\n    return <ChatCard key={`chat_${i}`} isLoading={true} />;\n  });\n};\n\nconst getDescription = (chat: ChatObject): string => {\n  if (!chat.last_message.id) {\n    return 'Say hello!';\n  }\n  if (chat.last_message.text === null) {\n    return `${chat.last_message.attachments.length} attachments`;\n  }\n  return chat.last_message.text;\n};\n\nexport const ChatList: React.FC<ChatListProps> = (props: ChatListProps) => {\n  const { activeChatId = -1 } = props;\n\n  const renderChats = (chats: Array<ChatObject>) => {\n    return chats.map((chat, index) => {\n      const otherPerson =\n        chat &&\n        chat.people.find((person) => person.person.username !== props.username);\n      const title = !chat\n        ? ''\n        : chat.is_direct_chat && otherPerson\n        ? otherPerson.person.username\n        : chat.title;\n      const timeStamp = getDateTime(chat.created, props.timezoneOffset)\n        .toString()\n        .substr(4, 6);\n      const hasNotification = props.username\n        ? !readLastMessage(props.username, chat)\n        : false;\n\n      return (\n        <ChatCard\n          key={`chat_${index}`}\n          chat={chat}\n          title={title}\n          description={getDescription(chat)}\n          timeStamp={timeStamp}\n          isActive={activeChatId === chat.id}\n          hasNotification={hasNotification}\n          onClick={() =>\n            props.onChatCardClick && props.onChatCardClick(chat.id)\n          }\n          avatarUsername={chat.last_message.sender?.username}\n          avatarUrl={\n            chat.last_message.sender\n              ? chat.last_message.sender.avatar\n              : 'https://chat-engine-assets.s3.amazonaws.com/empty-chat-thumb.png'\n          }\n          renderChatCard={props.renderChatCard}\n        />\n      );\n    });\n  };\n\n  if (props.renderChatList) {\n    return <>{props.renderChatList(props)}</>;\n  }\n\n  return (\n    <div\n      className=\"ce-chat-list\"\n      style={{\n        // Default\n        ...styles.style,\n        // State\n        ...(props.isLoading ? { overflowY: 'hidden' } : {}),\n        // Props\n        ...props.style,\n      }}\n    >\n      <ChatForm\n        onFormSubmit={props.onChatFormSubmit}\n        renderChatForm={props.renderChatForm}\n      />\n\n      {props.isLoading ? renderLoading() : renderChats(props.chats)}\n\n      {props.hasMoreChats && (\n        <RenderTrigger\n          onShow={props.onChatLoaderShow}\n          style={{\n            ...styles.loadingMoreChatsStyle,\n            ...props.loadingMoreChatsStyle,\n          }}\n          children={<Spinner />}\n        />\n      )}\n    </div>\n  );\n};\n","export interface ChatFeedStyles {\n  style?: React.CSSProperties;\n  chatHeaderStyle?: React.CSSProperties;\n  messageListStyle?: React.CSSProperties;\n  messageFormStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatFeedStyles = {\n  style: {\n    height: '100%',\n    position: 'relative',\n    backgroundColor: 'white',\n  },\n  chatHeaderStyle: {},\n  messageListStyle: {\n    height: 'calc(100% - 85px - 48px)',\n    overflowY: 'scroll',\n    overflowX: 'hidden',\n    position: 'relative',\n    backgroundColor: 'white',\n  },\n  messageFormStyle: {\n    width: '100%',\n    position: 'absolute',\n    bottom: '0px',\n  },\n};\n","export interface ChatHeaderStyles {\n  style?: React.CSSProperties;\n  titleStyle?: React.CSSProperties;\n  subtitleStyle?: React.CSSProperties;\n  mobileOptionStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatHeaderStyles = {\n  style: {\n    width: '100%',\n    zIndex: 1,\n    backgroundColor: 'rgb(256, 256, 256, 0.92)',\n    padding: '18px 0px',\n    textAlign: 'center',\n    color: 'rgb(24, 144, 255)',\n    overflowX: 'hidden',\n  },\n  titleStyle: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    fontSize: '24px',\n    fontWeight: 600,\n  },\n  subtitleStyle: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    fontSize: '12px',\n  },\n  mobileOptionStyle: {\n    width: '100%',\n    top: '32px',\n    textAlign: 'center',\n    color: 'rgb(24, 144, 255)',\n    overflow: 'hidden',\n  },\n};\n","import React from 'react';\n\nimport { ChatHeaderProps } from './props';\nimport { styles } from './styles';\n\nimport { Row, Col, setConfiguration } from 'react-grid-system';\n\nsetConfiguration({ maxScreenClass: 'xl', gutterWidth: 0 });\n\nexport const ChatHeader: React.FC<ChatHeaderProps> = (\n  props: ChatHeaderProps\n) => {\n  const { id = '', title = '', description = '' } = props;\n\n  if (props.renderChatHeader) {\n    return <>{props.renderChatHeader(props)}</>;\n  }\n\n  return (\n    <Row className=\"ce-chat-header\" style={{ ...styles.style, ...props.style }}>\n      <Col\n        xs={2}\n        sm={0}\n        className=\"ce-chat-header-mobile-option\"\n        style={{\n          ...styles.mobileOptionStyle,\n          ...{ left: '6px' },\n          ...props.mobileOptionStyle,\n        }}\n      ></Col>\n\n      <div\n        id={`ce-chat-feed-title-${id}`}\n        className=\"ce-chat-header-title\"\n        style={{\n          ...styles.titleStyle,\n          ...props.titleStyle,\n        }}\n      >\n        {title}\n      </div>\n\n      <div\n        className=\"ce-chat-header-subtitle\"\n        style={{\n          ...styles.subtitleStyle,\n          ...props.subtitleStyle,\n        }}\n      >\n        {description}\n      </div>\n\n      <Col\n        xs={2}\n        sm={0}\n        className=\"ce-chat-header-mobile-option\"\n        style={{\n          ...styles.mobileOptionStyle,\n          ...{ right: '6px' },\n          ...props.mobileOptionStyle,\n        }}\n      ></Col>\n    </Row>\n  );\n};\n","export interface MessageListStyles {\n  style?: React.CSSProperties;\n  messageStyle?: React.CSSProperties;\n}\n\nexport const styles: MessageListStyles = {\n  style: {},\n  messageStyle: {},\n};\n","export interface MessageStyle {\n  style?: React.CSSProperties;\n  dateTimeStyle?: React.CSSProperties;\n  senderUsernameStyle?: React.CSSProperties;\n  attachmentsStyle?: React.CSSProperties;\n  attachmentsImageStyle?: React.CSSProperties;\n  attachmentsFileStyle?: React.CSSProperties;\n  bodyStyle?: React.CSSProperties;\n  timeTagStyle?: React.CSSProperties;\n  bubbleStyle?: React.CSSProperties;\n  readsStyle?: React.CSSProperties;\n  readStyle?: React.CSSProperties;\n  avatarStyle?: React.CSSProperties;\n}\n\nexport const theirStyles: MessageStyle = {\n  style: { width: '100%', position: 'relative' },\n  senderUsernameStyle: {\n    width: 'calc(100% - 64px)',\n    fontFamily: 'Avenir',\n    paddingLeft: '62px',\n    paddingBottom: '2px',\n    color: 'rgba(0, 0, 0, .40)',\n    fontSize: '15px',\n  },\n  attachmentsStyle: {\n    display: 'auto',\n    paddingLeft: '48px',\n    width: 'calc(100% - 48px)',\n  },\n  bodyStyle: {\n    position: 'relative',\n    width: 'calc(100% - 2px)',\n  },\n  timeTagStyle: {\n    marginLeft: '4px',\n    fontSize: '14px',\n    fontFamily: 'Avenir',\n    color: 'rgba(0, 0, 0, 0.4)',\n    // CSS Transitions\n    transition: 'all .15s ease',\n    WebkitTransition: 'all .15s ease',\n    MozTransition: 'all .15s ease',\n  },\n  bubbleStyle: {\n    cursor: 'pointer',\n    display: 'inline-block',\n    color: 'black',\n    padding: '12px',\n    marginLeft: '48px',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    whiteSpace: 'pre-line',\n    backgroundColor: '#f1f0f0',\n    overflowWrap: 'anywhere',\n    maxWidth: 'calc(100% - 100px - 48px)',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  readsStyle: {\n    marginLeft: '48px',\n    width: 'calc(100% - 50px)',\n  },\n  readStyle: {\n    marginLeft: '4px',\n    float: 'left',\n  },\n  avatarStyle: {\n    position: 'absolute',\n    bottom: '0px',\n    left: '2px',\n  },\n};\n\nexport const myStyles: MessageStyle = {\n  style: {\n    width: '100%',\n    textAlign: 'right',\n  },\n  senderUsernameStyle: {\n    display: 'none',\n  },\n  attachmentsStyle: {\n    display: 'auto',\n    marginLeft: '48px',\n    width: 'calc(100% - 48px)',\n  },\n  bodyStyle: {\n    position: 'relative',\n    width: 'calc(100% - 2px)',\n  },\n  timeTagStyle: {\n    marginRight: '4px',\n    fontSize: '14px',\n    fontFamily: 'Avenir',\n    color: 'rgb(24, 144, 255)',\n    // CSS Transitions\n    transition: 'all .15s ease',\n    WebkitTransition: 'all .15s ease',\n    MozTransition: 'all .15s ease',\n  },\n  bubbleStyle: {\n    color: 'white',\n    display: 'inline-block',\n    backgroundColor: '#1890ff',\n    cursor: 'pointer',\n    textAlign: 'left',\n    // Stay right but render text\n    padding: '12px',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    whiteSpace: 'pre-line',\n    overflowWrap: 'anywhere',\n    maxWidth: 'calc(100% - 100px)',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  readsStyle: { width: '100%' },\n  readStyle: { float: 'right', marginLeft: '4px' },\n  avatarStyle: { display: 'none' },\n};\n","export interface DotStyles {\n  style?: React.CSSProperties;\n}\n\nexport const styles: DotStyles = {\n  style: {\n    borderRadius: '13px',\n    textAlign: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundPosition: 'center',\n    backgroundSize: '14px',\n    // CSS Transitions\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n};\n","import React, { useEffect, useState } from 'react';\nimport { stringToColor } from '../../util/colorMapping';\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const Dot = (props: Props) => {\n  const [localAvatar, setLocalAvatar] = useState<string>('');\n  const { username = '', isVisible = true, avatarUrl = '' } = props;\n\n  const color = stringToColor(username);\n\n  useEffect(() => {\n    const newAvatar = avatarUrl !== null ? avatarUrl : '';\n    if (newAvatar.split('?')[0] !== localAvatar.split('?')[0]) {\n      setLocalAvatar(newAvatar);\n    }\n  });\n\n  return (\n    <div\n      className=\"ce-avatar-dot\"\n      style={{\n        ...styles.style,\n        ...{\n          backgroundColor: localAvatar.length > 0 ? 'white' : color,\n          backgroundImage: localAvatar.length > 0 ? `url(${localAvatar})` : '',\n          width: isVisible ? '13px' : '0px',\n          height: isVisible ? '13px' : '0px',\n        },\n        ...props.style,\n      }}\n    />\n  );\n};\n","export interface DateTimeStyles {\n  style?: React.CSSProperties;\n}\n\nexport const styles: DateTimeStyles = {\n  style: {\n    width: '100%',\n    fontFamily: 'Avenir',\n    textAlign: 'center',\n    paddingTop: '4px',\n    paddingBottom: '10px',\n    fontSize: '15px',\n    color: 'rgba(0, 0, 0, .40)',\n  },\n};\n","import React from 'react';\n\nimport { DateTimeProps } from './props';\nimport { styles } from './styles';\n\nimport { formatDateTime, getDateTime } from '../../../../../util/dateTime';\n\nexport const DateTime: React.FC<DateTimeProps> = (props: DateTimeProps) => {\n  const { offset = 0 } = props;\n\n  return (\n    <div\n      className=\"ce-message-date-text\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      {formatDateTime(getDateTime(props.created, offset))}\n    </div>\n  );\n};\n","export interface FileStyles {\n  style?: React.CSSProperties;\n  hoveredStyle?: React.CSSProperties;\n}\n\nexport const styles: FileStyles = {\n  style: {\n    cursor: 'pointer',\n    fontFamily: 'Avenir',\n    padding: '12px',\n    borderRadius: '14px',\n    display: 'inline-block',\n    marginRight: '2px',\n    marginBottom: '4px',\n    color: '#434343',\n    backgroundColor: 'white',\n    border: '1px solid #434343',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  hoveredStyle: { border: '1px solid #1890ff' },\n};\n","const images = ['jpg', 'jpeg', 'png', 'gif', 'tiff'];\n\nexport const isImage = (fileName: string) => {\n  const dotSplit = fileName.split('.');\n  return (\n    dotSplit.length > 0 &&\n    images.indexOf(dotSplit[dotSplit.length - 1].toLowerCase()) !== -1\n  );\n};\n\nexport const getFileName = (fileUrl: string) => {\n  const slashSplit = fileUrl.split('/');\n  const nameAndHash = slashSplit[slashSplit.length - 1];\n  return nameAndHash.split('?')[0];\n};\n\nexport const isImageFromFilePath = (fileUrl: string) => {\n  return isImage(getFileName(fileUrl));\n};\n","import React, { useState } from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nimport { getFileName } from '../../util/file';\n\nconst urlOrLoading = (url: string | undefined) => {\n  return url ? getFileName(url) : 'Loading...';\n};\n\nexport const File: React.FC<Props> = (props: Props) => {\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n\n  return (\n    <div\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      onClick={() => props.url && window.open(props.url)}\n      style={{\n        // Default\n        ...styles.style,\n        ...(!props.url ? { border: '1px solid grey' } : {}),\n        // State\n        ...(isHovered ? styles.hoveredStyle : {}),\n        // Props\n        ...props.style,\n        // Props + State\n        ...(isHovered ? props.hoveredStyle : {}),\n      }}\n      className={`ce-file ${props.className}`}\n    >\n      {props.fileName ? props.fileName : `📄 ${urlOrLoading(props.url)}`}\n    </div>\n  );\n};\n","export interface ImageStyles {\n  style?: React.CSSProperties;\n  hoveredStyle?: React.CSSProperties;\n}\n\nexport const styles: ImageStyles = {\n  style: {\n    cursor: 'pointer',\n    height: '30vw',\n    width: '30vw',\n    maxHeight: '200px',\n    maxWidth: '200px',\n    minHeight: '100px',\n    minWidth: '100px',\n    padding: '2px',\n    objectFit: 'cover',\n    borderRadius: '0.3em',\n    backgroundColor: 'white',\n    border: '1px solid #434343',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  hoveredStyle: { border: '1px solid #1890ff' },\n};\n","import React, { useState } from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const Image: React.FC<Props> = (props: Props) => {\n  const { url } = props;\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n  const loadingUrl = 'https://chat-engine-assets.s3.amazonaws.com/loading.gif';\n\n  return (\n    <img\n      onMouseEnter={() => setIsHovered(true)}\n      onMouseLeave={() => setIsHovered(false)}\n      src={url ? url : loadingUrl}\n      alt={url ? url : loadingUrl}\n      onClick={() => url && window.open(url)}\n      style={{\n        // Default\n        ...styles.style,\n        // State\n        ...(isHovered ? styles.hoveredStyle : {}),\n        // Props\n        ...props.style,\n        // Props + State\n        ...(isHovered ? props.hoveredStyle : {}),\n      }}\n      className={`ce-image ${props.className}`}\n    />\n  );\n};\n","import React, { useState } from 'react';\n\nimport { MessageProps } from './props';\nimport { myStyles, theirStyles } from './styles';\n\nimport { Dot } from '../../../../Components/Dot';\nimport { Avatar } from '../../../../Components/Avatar';\n\nimport { DateTime } from './DateTime';\n\nimport { File } from '../../../../Components/File';\nimport { Image } from '../../../../Components/Image';\n\nimport { isImage, getFileName } from '../../../../util/file';\nimport { formatTime, getDateTime } from '../../../../util/dateTime';\n\nexport const Message: React.FC<MessageProps> = (props: MessageProps) => {\n  const {\n    lastMessage = null,\n    message,\n    nextMessage = null,\n    chat = null,\n    isSending = false,\n    isMyMessage = false,\n    showDateTime = false,\n  } = props;\n\n  const [hovered, setHovered] = useState<boolean>(false);\n\n  const styles = isMyMessage ? myStyles : theirStyles;\n\n  const topRadius =\n    !lastMessage || lastMessage.sender_username !== message.sender_username\n      ? '1.3em'\n      : '0.3em';\n  const bottomRadius =\n    !nextMessage || nextMessage.sender_username !== message.sender_username\n      ? '1.3em'\n      : '0.3em';\n  const borderStyle = {\n    borderRadius: isMyMessage\n      ? `1.3em ${topRadius} ${bottomRadius} 1.3em`\n      : `${topRadius} 1.3em 1.3em ${bottomRadius}`,\n  };\n  const sendingStyle = isSending ? { backgroundColor: '#40a9ff' } : {};\n  const isLastMessage =\n    !nextMessage || nextMessage.sender_username !== message.sender_username;\n\n  const paddingBottom =\n    !nextMessage || nextMessage.sender_username !== message.sender_username\n      ? '12px'\n      : '2px';\n\n  const text: string =\n    message.text !== null\n      ? message.text.replace(/<a /g, `<a style=\"color: 'white';\" `)\n      : '';\n\n  const renderAttachments = (renderImage: boolean) => {\n    const attachments =\n      message && message.attachments ? message.attachments : [];\n\n    return attachments.map((attachment, index) => {\n      const fileName = getFileName(attachment.file);\n\n      if (renderImage && isImage(fileName)) {\n        return (\n          <Image\n            key={`attachment_${index}`}\n            url={\n              attachment.file !== null && !props.isSending\n                ? attachment.file\n                : undefined\n            }\n            style={{\n              ...styles.attachmentsImageStyle,\n              ...props.attachmentsImageStyle,\n            }}\n            className=\"ce-message-image\"\n          />\n        );\n      } else if (!renderImage && !isImage(fileName)) {\n        return (\n          <File\n            key={`attachment_${index}`}\n            url={\n              attachment.file !== null && !props.isSending\n                ? attachment.file\n                : undefined\n            }\n            style={{\n              ...styles.attachmentsFileStyle,\n              ...props.attachmentsFileStyle,\n            }}\n            className=\"ce-message-file\"\n          />\n        );\n      } else {\n        return <div key={`attachment_${index}`} />;\n      }\n    });\n  };\n\n  const renderReads = () => {\n    const chatPeople = chat !== null ? chat.people : [];\n    return chatPeople.map((chatPerson, index) => {\n      return (\n        <Dot\n          key={`read_${index}`}\n          avatarUrl={chatPerson.person.avatar}\n          username={chatPerson.person.username}\n          isVisible={message.id === chatPerson.last_read}\n          style={{\n            ...styles.readStyle,\n            ...props.readStyle,\n          }}\n        />\n      );\n    });\n  };\n\n  if (props.renderMessage) {\n    return <>{props.renderMessage(props)}</>;\n  }\n\n  return (\n    <div\n      className={`ce-${isMyMessage ? 'my' : 'their'}-message`}\n      style={{\n        ...styles.style,\n        ...{ paddingBottom },\n        ...props.style,\n      }}\n    >\n      {showDateTime && (\n        <DateTime\n          created={message.created}\n          style={{\n            ...styles.dateTimeStyle,\n            ...props.dateTimeStyle,\n          }}\n        />\n      )}\n\n      {(lastMessage === null ||\n        lastMessage.sender_username !== message.sender_username) && (\n        <div\n          style={{\n            ...styles.senderUsernameStyle,\n            ...props.senderUsernameStyle,\n          }}\n          className={`ce-${\n            isMyMessage ? 'my' : 'their'\n          }-message-sender-username`}\n        >\n          {message.sender_username}\n        </div>\n      )}\n\n      <div\n        style={{\n          ...styles.attachmentsStyle,\n          ...props.attachmentsStyle,\n        }}\n        className={`\n          ce-${isMyMessage ? 'my' : 'their'}-message-attachments \n          ce-${isMyMessage ? 'my' : 'their'}-message-images\n        `}\n      >\n        {renderAttachments(true)}\n      </div>\n\n      <div\n        style={{\n          ...styles.attachmentsStyle,\n          ...props.attachmentsStyle,\n        }}\n        className={`\n            ce-${isMyMessage ? 'my' : 'their'}-message-attachments \n            ce-${isMyMessage ? 'my' : 'their'}-message-files\n          `}\n      >\n        {renderAttachments(false)}\n      </div>\n\n      {message.text !== null && (\n        <div\n          onMouseEnter={() => setHovered(true)}\n          onMouseLeave={() => setHovered(false)}\n          style={{\n            ...styles.bodyStyle,\n            ...props.bodyStyle,\n          }}\n        >\n          {isMyMessage && (\n            <span\n              className=\"ce-my-message-timestamp\"\n              style={{\n                ...styles.timeTagStyle,\n                ...{ opacity: hovered ? '1' : '0' },\n                ...props.timeTagStyle,\n              }}\n            >\n              {formatTime(\n                getDateTime(message.created, props.timezoneOffset) as Date\n              )}\n            </span>\n          )}\n\n          <div\n            className={`\n              ce-${isMyMessage ? 'my' : 'their'}-message-body\n              ${isSending && 'ce-my-message-sending-body'}\n            `}\n            style={{\n              ...styles.bubbleStyle,\n              ...borderStyle,\n              ...sendingStyle,\n              ...props.bubbleStyle,\n            }}\n            dangerouslySetInnerHTML={{ __html: text }}\n          />\n          <style>{`p {margin-block-start: 0px; margin-block-end: 0px;}`}</style>\n\n          {!isMyMessage && (\n            <span\n              className=\"ce-their-message-timestamp\"\n              style={{\n                ...styles.timeTagStyle,\n                ...{ opacity: hovered ? '1' : '0' },\n                ...props.timeTagStyle,\n              }}\n            >\n              {formatTime(\n                getDateTime(message.created, props.timezoneOffset) as Date\n              )}\n            </span>\n          )}\n\n          <Avatar\n            username={message.sender_username}\n            style={{\n              ...styles.avatarStyle,\n              ...(isLastMessage ? {} : { display: 'none' }),\n              ...props.avatarStyle,\n            }}\n            avatarUrl={\n              message.sender &&\n              message.sender !== null &&\n              message.sender.avatar !== null\n                ? message.sender.avatar\n                : undefined\n            }\n          />\n        </div>\n      )}\n\n      <div\n        style={{\n          ...styles.readsStyle,\n          ...props.readsStyle,\n        }}\n        className={`ce-${isMyMessage ? 'my' : 'their'}-reads-row`}\n      >\n        {renderReads()}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { MessageListProps } from './props';\nimport { styles } from './styles';\n\nimport { Message } from './Message';\n\nimport { RenderTrigger } from '../../../Components/RenderTrigger';\nimport { Spinner } from '../../../Components/Spinner';\n\nimport _ from 'lodash';\n\nexport const MessageList: React.FC<MessageListProps> = (\n  props: MessageListProps\n) => {\n  const { messages = [] } = props;\n\n  const messagesObject = _.mapKeys(messages, 'created');\n  const keys = Object.keys(messagesObject).sort();\n\n  const date = (date: string) => {\n    return date ? date.substr(0, 10) : null;\n  };\n\n  const renderMessages = (keys: Array<string>) => {\n    return keys.map((key, index) => {\n      const message = messagesObject[key];\n      const lastKey = index === 0 ? '' : keys[index - 1];\n      const nextKey: string = index === keys.length - 1 ? '' : keys[index + 1];\n\n      const lastDate = lastKey !== '' ? date(lastKey) : undefined;\n      const thisDate = key !== '' ? date(key) : undefined;\n\n      const showDateTime: boolean = !lastDate || lastDate !== thisDate;\n      const isMyMessage: boolean = props.username === message.sender_username;\n\n      return (\n        <div key={`message_${index}`} id={`ce-message-${message.id}`}>\n          {index === keys.length - 1 && (\n            <RenderTrigger\n              onShow={props.onBottomMessageShow}\n              onHide={props.onBottomMessageHide}\n              children=\"\"\n            />\n          )}\n\n          <Message\n            chat={props.chat}\n            message={message}\n            lastMessage={messagesObject[lastKey]}\n            nextMessage={messagesObject[nextKey]}\n            timezoneOffset={props.timezoneOffset}\n            isMyMessage={isMyMessage}\n            isSending={!message.id}\n            showDateTime={showDateTime}\n            renderMessage={props.renderMessage}\n            style={{ ...styles.messageStyle, ...props.messageStyle }}\n          />\n        </div>\n      );\n    });\n  };\n\n  if (props.renderMessageList) {\n    return <>{props.renderMessageList(props)}</>;\n  }\n\n  return (\n    // Used for scrolling\n    <div\n      className=\"ce-message-list\"\n      id={`ce-message-list-${props.chat?.id}`}\n      style={{ ...styles.style, ...props.style }}\n    >\n      {/* used for finding Feed Height */}\n      <div\n        className=\"ce-message-list-content\"\n        id={`ce-message-list-content-${props.chat?.id}`}\n      >\n        {props.hasMoreMessages && (\n          <RenderTrigger\n            onShow={props.onMessageLoaderShow}\n            onHide={props.onMessageLoaderHide}\n            children={\n              <Spinner\n                style={{\n                  position: 'relative',\n                  left: 'calc(50% - 0.625em)',\n                  width: '1.25em',\n                  height: '1.25em',\n                  font: 'red',\n                }}\n              />\n            }\n          />\n        )}\n\n        {renderMessages(keys)}\n      </div>\n    </div>\n  );\n};\n","export interface MessageFormStyles {\n  style?: React.CSSProperties;\n  inputStyle?: React.CSSProperties;\n  sendButtonStyle?: React.CSSProperties;\n  attachmentInputStyle?: React.CSSProperties;\n  attachmentInputIconStyle?: React.CSSProperties;\n  draftAttachmentStyle?: React.CSSProperties;\n  draftAttachmentRemoveStyle?: React.CSSProperties;\n  draftImageStyle?: React.CSSProperties;\n  draftFileStyle?: React.CSSProperties;\n}\n\nexport const styles: MessageFormStyles = {\n  style: {\n    paddingTop: '4px',\n  },\n  inputStyle: {\n    border: '1px solid white',\n    width: 'calc(100% - 24px - 116px)',\n    outline: 'none',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    paddingLeft: '12px',\n    paddingRight: '12px',\n    resize: 'none',\n    overflowX: 'hidden',\n    // Tweak Position\n    position: 'relative',\n    top: '6px',\n  },\n  sendButtonStyle: {\n    cursor: 'pointer',\n    fontFamily: 'Avenir',\n    display: 'inline-block',\n    borderRadius: '8px',\n    padding: '6px 12px',\n    color: 'white',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n    // Tweak Position\n    position: 'relative',\n    bottom: '6px',\n  },\n  draftAttachmentStyle: {\n    padding: '6px',\n    display: 'inline-block',\n    position: 'relative',\n  },\n  draftAttachmentRemoveStyle: {\n    position: 'absolute',\n    top: '-6px',\n    right: '-6px',\n    width: '30px',\n    height: '30px',\n    color: '#40a9ff',\n    backgroundColor: 'white',\n    border: '1px solid rgb(67, 67, 67)',\n    borderRadius: '50%',\n    cursor: 'pointer',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n  },\n  draftImageStyle: {\n    padding: '6px',\n    height: '60px',\n    width: '60px',\n  },\n  draftFileStyle: {},\n};\n","export interface AttachmentInputStyles {\n  style?: React.CSSProperties;\n  iconStyle?: React.CSSProperties;\n}\n\nexport const styles: AttachmentInputStyles = {\n  style: {\n    height: '0px',\n    display: 'inline',\n    padding: '6px 12px',\n    position: 'relative',\n    bottom: '6px',\n  },\n  iconStyle: {\n    backgroundColor: 'white',\n    border: '1px solid white',\n    cursor: 'pointer',\n  },\n};\n","import React, { useState } from 'react';\n\nimport { Props } from './props';\nimport { styles } from './styles';\n\nexport const AttachmentInput: React.FC<Props> = (props: Props) => {\n  const [hovered, setHovered] = useState<boolean>(false);\n  const hoverStyle: React.CSSProperties = { color: hovered ? '#06c' : '#444' };\n\n  const onSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    const target = e.target as HTMLInputElement;\n    const files = target.files;\n    props.onSelectFiles && props.onSelectFiles(files);\n  };\n\n  return (\n    <form\n      className=\"ce-attachment-input\"\n      encType=\"multipart/form-data\"\n      style={{\n        ...styles.style,\n        ...props.style,\n      }}\n    >\n      <label htmlFor=\"files\" id=\"ce-upload-document-button\">\n        <span\n          className=\"ce-attachment-icon\"\n          onMouseEnter={() => setHovered(true)}\n          onMouseLeave={() => setHovered(false)}\n          style={{\n            ...styles.iconStyle,\n            ...hoverStyle,\n            ...props.iconStyle,\n          }}\n          onClick={() => {}} // Prevents redirect in StorybookJS\n        >\n          📎\n        </span>\n      </label>\n\n      <input\n        multiple\n        id=\"files\"\n        style={{ visibility: 'hidden', height: '0px', width: '0px' }}\n        type=\"file\"\n        onChange={onSelect}\n      />\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { MessageFormProps } from './props';\nimport { styles } from './styles';\n\nimport { AttachmentInput } from './AttachmentInput';\n\nimport { File } from '../../../Components/File';\nimport { Image } from '../../../Components/Image';\n\nimport { isImage } from '../../../util/file';\nimport { MessageObject, AttachmentObject } from '../../../../interfaces';\n\nexport const MessageForm: React.FC<MessageFormProps> = (\n  props: MessageFormProps\n) => {\n  const { label = '' } = props;\n\n  const [iter, setIter] = useState(0); // Forces attachments update\n  const [value, setValue] = useState<string>('');\n  const [height, setHeight] = useState<number>(0);\n  const [buttonHover, setButtonHover] = useState<boolean>(false);\n  const [attachments, setAttachments] = useState<Array<File>>([]);\n\n  useEffect(() => resize(), []);\n\n  const resize = () => {\n    var textarea = document.getElementById('msg-textarea');\n    if (textarea !== null) {\n      textarea.style.height = '';\n      textarea.style.height = Math.min(textarea.scrollHeight, 150) + 'px';\n      setHeight(Math.min(textarea.scrollHeight, 150));\n    }\n  };\n\n  const onChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setValue(e.target.value);\n    props.onChange && props.onChange(e);\n    resize();\n  };\n\n  const onSubmit = () => {\n    const created = new Date()\n      .toISOString()\n      .replace('T', ' ')\n      .replace('Z', `${Math.floor(Math.random() * 1000)}+00:00`);\n    const localAttachments: AttachmentObject[] = attachments.map(\n      (attachment) => {\n        return {\n          id: -1,\n          created: new Date().toString(),\n          file: attachment.name,\n          blob: attachment,\n        };\n      }\n    );\n\n    const message: MessageObject = {\n      attachments: localAttachments,\n      text: value,\n      sender_username: props.username ? props.username : '',\n      custom_json: {},\n      created,\n    };\n\n    props.onSubmit && props.onSubmit(message);\n\n    setValue('');\n    setAttachments([]);\n    resize();\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      if (value.length > 0) {\n        onSubmit();\n      }\n    }\n  };\n\n  const onRemove = (index: number) => {\n    if (attachments && attachments !== null) {\n      const newAttachments = attachments;\n      newAttachments.splice(index, 1);\n      setAttachments(newAttachments);\n      setIter(iter + 1);\n    }\n  };\n\n  const renderAttachments = (renderImage: boolean) => {\n    if (!attachments || attachments === null) return <div />;\n\n    return Array.from(attachments).map((attachment, index) => {\n      const url = URL.createObjectURL(attachment);\n\n      return (\n        <span\n          key={`draft-${index}`}\n          className=\"ce-draft-attachment-wrapper\"\n          style={{\n            ...styles.draftAttachmentStyle,\n            ...props.draftAttachmentStyle,\n          }}\n        >\n          {renderImage && isImage(attachment.name) && (\n            <Image\n              url={url}\n              style={{ ...styles.draftImageStyle, ...props.draftImageStyle }}\n              className=\"ce-draft-image\"\n            />\n          )}\n\n          {!renderImage && !isImage(attachment.name) && (\n            <File\n              url={url}\n              fileName={`📄 ${attachment.name}`}\n              style={{ ...styles.draftFileStyle, ...props.draftFileStyle }}\n              className=\"ce-draft-file\"\n            />\n          )}\n\n          {((!renderImage && !isImage(attachment.name)) ||\n            (renderImage && isImage(attachment.name))) && (\n            <button\n              className=\"ce-message-attachment-remove-btn\"\n              onClick={() => onRemove(index)}\n              style={{\n                ...styles.draftAttachmentRemoveStyle,\n                ...props.draftAttachmentRemoveStyle,\n              }}\n            >\n              ❌\n            </button>\n          )}\n        </span>\n      );\n    });\n  };\n\n  if (props.renderMessageForm) {\n    return <>{props.renderMessageForm(props)}</>;\n  }\n\n  return (\n    <div\n      id=\"ce-message-form\"\n      style={{ ...styles.style, ...props.style }}\n      className=\"ce-message-form\"\n    >\n      <div className=\"ce-message-form-attachments-row\">\n        {renderAttachments(true)}\n      </div>\n\n      <div className=\"ce-message-form-attachments-row\">\n        {renderAttachments(false)}\n      </div>\n\n      <textarea\n        id=\"msg-textarea\"\n        className=\"ce-message-form-input\"\n        value={value}\n        placeholder={label}\n        rows={1}\n        onKeyDown={onKeyDown}\n        onChange={onChange}\n        style={{\n          ...styles.inputStyle,\n          ...{ overflowY: height === 150 ? 'scroll' : 'hidden' },\n          ...props.inputStyle,\n        }}\n      />\n\n      <AttachmentInput\n        onSelectFiles={(files) => {\n          files !== null && setAttachments(Array.from(files));\n        }}\n        style={{\n          ...styles.attachmentInputStyle,\n          ...props.attachmentInputStyle,\n        }}\n        iconStyle={{\n          ...styles.attachmentInputIconStyle,\n          ...props.attachmentInputIconStyle,\n        }}\n      />\n\n      <div\n        id=\"ce-send-message-button\"\n        onMouseEnter={() => setButtonHover(true)}\n        onMouseLeave={() => setButtonHover(false)}\n        onClick={onSubmit}\n        style={{\n          ...styles.sendButtonStyle,\n          ...{ backgroundColor: buttonHover ? '#40a9ff' : '#1890ff' },\n          ...props.sendButtonStyle,\n        }}\n      >\n        Send\n      </div>\n    </div>\n  );\n};\n","export interface WelcomeGifStyles {\n  style?: React.CSSProperties;\n  gifStyle?: React.CSSProperties;\n  textStyle?: React.CSSProperties;\n}\n\nexport const styles: WelcomeGifStyles = {\n  style: {\n    width: '100%',\n    textAlign: 'center',\n  },\n  gifStyle: { width: '50%', maxWidth: '200px' },\n  textStyle: {\n    color: '#afafaf',\n    fontWeight: 600,\n    fontSize: '14px',\n    fontFamily: 'Avenir',\n  },\n};\n","import React from 'react';\nimport { WelcomeGifProps } from './props';\nimport { styles } from './styles';\n\nexport const WelcomeGif: React.FC<WelcomeGifProps> = (\n  props: WelcomeGifProps\n) => {\n  if (props.renderWelcomeGif) {\n    return <>{props.renderWelcomeGif(props)}</>;\n  }\n  return (\n    <div\n      className=\"ce-ice-breaker-wrapper\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <img\n        className=\"ce-ice-breaker-gif\"\n        style={{ ...styles.gifStyle, ...props.gifStyle }}\n        src=\"https://chat-engine-assets.s3.amazonaws.com/welcome_gifs/peace.gif\"\n        alt=\"chat-engine-ice-breaker\"\n      />\n\n      <div\n        className=\"ce-ice-breaker-text\"\n        style={{ ...styles.textStyle, ...props.textStyle }}\n      >\n        No messages here yet...\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { ChatFeedProps } from './props';\nimport { styles } from './styles';\n\nimport { ChatHeader } from './ChatHeader';\nimport { MessageList } from './MessageList';\nimport { MessageForm } from './MessageForm';\nimport { WelcomeGif } from './WelcomeGif';\n\nimport { getDateTime, formatDateTime } from '../../util/dateTime';\n\nimport { Spinner } from '../../Components/Spinner';\nimport { ChatObject } from '../../../interfaces';\n\nconst getDescription = (\n  chat: ChatObject | undefined,\n  timezoneOffset: number = 0\n) => {\n  if (!chat) {\n    return '⬅️ ⬅️ ⬅️';\n  } else if (\n    chat.last_message.created &&\n    chat.last_message.created.length > 0\n  ) {\n    const dateTime = getDateTime(chat.last_message.created, timezoneOffset);\n    const formattedDateTime = formatDateTime(dateTime);\n    return `Active ${formattedDateTime}`;\n  } else {\n    return 'Say hello!';\n  }\n};\n\nexport const ChatFeed: React.FC<ChatFeedProps> = (props: ChatFeedProps) => {\n  const { chat } = props;\n\n  const otherPerson =\n    chat &&\n    chat.people.find((person) => person.person.username !== props.username);\n\n  const title = props.isLoading ? (\n    <Spinner />\n  ) : !chat ? (\n    'Create a chat!'\n  ) : chat.is_direct_chat && otherPerson ? (\n    otherPerson.person.username\n  ) : (\n    chat.title\n  );\n\n  if (props.renderChatFeed) {\n    return <>{props.renderChatFeed(props)}</>;\n  }\n\n  return (\n    <div className=\"ce-chat-feed\" style={{ ...styles.style, ...props.style }}>\n      <ChatHeader\n        title={title}\n        description={\n          props.isLoading\n            ? 'Loading...'\n            : getDescription(chat, props.timezoneOffset)\n        }\n        renderChatHeader={props.renderChatHeader}\n        style={{\n          ...styles.chatHeaderStyle,\n          ...props.chatHeaderStyle,\n        }}\n      />\n\n      <MessageList\n        chat={chat}\n        messages={props.messages}\n        username={props.username}\n        timezoneOffset={props.timezoneOffset}\n        hasMoreMessages={props.hasMoreMessages}\n        onMessageLoaderShow={props.onMessageLoaderShow}\n        onMessageLoaderHide={props.onMessageLoaderHide}\n        onBottomMessageShow={props.onBottomMessageShow}\n        onBottomMessageHide={props.onBottomMessageHide}\n        renderMessageList={props.renderMessageList}\n        renderMessage={props.renderMessage}\n        style={{\n          ...styles.messageListStyle,\n          ...props.messageListStyle,\n        }}\n      />\n\n      {props.messages.length === 0 && !props.isLoading && (\n        <WelcomeGif\n          style={{\n            position: 'absolute',\n            top: 'calc(50% - 112px)',\n          }}\n        />\n      )}\n\n      <MessageForm\n        label=\"Send a message...\"\n        username={props.username}\n        onSubmit={props.onMessageFormSubmit}\n        renderMessageForm={props.renderMessageForm}\n        style={{\n          ...styles.messageFormStyle,\n          ...props.messageFormStyle,\n        }}\n      />\n    </div>\n  );\n};\n","export interface ChatSettingsStyles {\n  style?: React.CSSProperties;\n  chatTitleStyle?: React.CSSProperties;\n  peopleSettingsStyle?: React.CSSProperties;\n  photosSettingsStyle?: React.CSSProperties;\n  optionsSettingsStyle?: React.CSSProperties;\n}\n\nexport const styles: ChatSettingsStyles = {\n  style: { backgroundColor: 'white', width: '100%', height: '100%' },\n  chatTitleStyle: {\n    width: '100%',\n    textAlign: 'center',\n    fontFamily: 'Avenir',\n    fontSize: '18px',\n    fontWeight: 600,\n  },\n};\n","export interface AvatarsStyle {\n  avatarOne?: React.CSSProperties;\n  avatarTwo?: React.CSSProperties;\n  avatarThree?: React.CSSProperties;\n}\nexport interface ChatAvatarsStyle {\n  style?: React.CSSProperties;\n  oneAvatarStyle?: AvatarsStyle;\n  twoAvatarsStyle?: AvatarsStyle;\n  threeAvatarsStyle?: AvatarsStyle;\n}\n\nexport const styles: ChatAvatarsStyle = {\n  style: {\n    width: '100%',\n    paddingTop: '12px',\n    height: 'calc(44px + 14px)',\n  },\n  oneAvatarStyle: {\n    avatarOne: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px)',\n    },\n  },\n  twoAvatarsStyle: {\n    avatarOne: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 15px)',\n    },\n    avatarTwo: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 44px - 22px + 15px)',\n    },\n  },\n  threeAvatarsStyle: {\n    avatarOne: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 24px)',\n    },\n    avatarTwo: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 24px - 44px)',\n    },\n    avatarThree: {\n      float: 'left',\n      position: 'relative',\n      left: 'calc(50% - 22px - 44px - 44px + 24px)',\n    },\n  },\n};\n","import React from 'react';\n\nimport { ChatAvatarsProps } from './props';\nimport { styles, ChatAvatarsStyle, AvatarsStyle } from './styles';\n\nimport { Avatar } from '../../../Components/Avatar';\nimport { PersonObject } from '../../../../interfaces';\n\nexport const ChatAvatars: React.FC<ChatAvatarsProps> = (\n  props: ChatAvatarsProps\n) => {\n  const { users = [] } = props;\n\n  const getStyle = (\n    people: PersonObject[],\n    styles: ChatAvatarsStyle\n  ): AvatarsStyle => {\n    if (people.length === 1) {\n      return styles.oneAvatarStyle ? styles.oneAvatarStyle : {};\n    } else if (people.length === 2) {\n      return styles.twoAvatarsStyle ? styles.twoAvatarsStyle : {};\n    } else {\n      return styles.threeAvatarsStyle ? styles.threeAvatarsStyle : {};\n    }\n  };\n\n  const getPeopleToRender = (people: PersonObject[]): PersonObject[] => {\n    if (props.isDirectChat) {\n      const otherPerson = users.find(\n        (person) => person.username !== props.username\n      );\n      return otherPerson ? [otherPerson] : [];\n    }\n    return people.slice(0, 3);\n  };\n\n  const topPeople = getPeopleToRender(users);\n  const style = getStyle(users, styles);\n  const propsStyle = getStyle(users, props);\n\n  if (props.renderChatAvatars) {\n    return <>{props.renderChatAvatars(props)}</>;\n  }\n\n  return (\n    <div\n      className=\"ce-chat-avatars\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <Avatar\n        className=\"ce-chat-avatar-1\"\n        username={topPeople[0] ? topPeople[0].username : undefined}\n        avatarUrl={topPeople[0] ? topPeople[0].avatar : undefined}\n        style={{\n          ...style.avatarOne,\n          ...{ display: topPeople[0] ? 'inherit' : 'none' },\n          ...propsStyle.avatarOne,\n        }}\n      />\n\n      <Avatar\n        className=\"ce-chat-avatar-2\"\n        username={topPeople[1] ? topPeople[1].username : undefined}\n        avatarUrl={topPeople[1] ? topPeople[1].avatar : undefined}\n        style={{\n          ...style.avatarTwo,\n          ...{ display: topPeople[1] ? 'inherit' : 'none' },\n          ...propsStyle.avatarTwo,\n        }}\n      />\n\n      <Avatar\n        className=\"ce-chat-avatar-3\"\n        username={topPeople[2] ? topPeople[2].username : undefined}\n        avatarUrl={topPeople[2] ? topPeople[2].avatar : undefined}\n        style={{\n          ...style.avatarThree,\n          ...{ display: topPeople[2] ? 'inherit' : 'none' },\n          ...propsStyle.avatarThree,\n        }}\n      />\n    </div>\n  );\n};\n","export interface PeopleSettingsStyles {\n  style?: React.CSSProperties;\n  avatarStyle?: React.CSSProperties;\n  usernameStyle?: React.CSSProperties;\n  deleteButtonStyle?: React.CSSProperties;\n  optionStyle?: React.CSSProperties;\n  addMemberStyle?: React.CSSProperties;\n  addMemberInputStyle?: React.CSSProperties;\n}\n\nexport const styles: PeopleSettingsStyles = {\n  style: {},\n  avatarStyle: { position: 'absolute', left: '12px', top: '2px' },\n  usernameStyle: {\n    fontFamily: 'Avenir',\n    position: 'absolute',\n    left: '72px',\n    top: '12px',\n    width: 'calc(100% - 84px - 52px - 12px)',\n  },\n  deleteButtonStyle: { position: 'absolute', right: '12px', top: '8px' },\n  optionStyle: { fontFamily: 'Avenir', padding: '8px 12px', cursor: 'pointer' },\n  addMemberStyle: {\n    width: 'calc(100% - 12px - 12px)',\n    position: 'relative',\n    left: '12px',\n  },\n  addMemberInputStyle: { border: '1px solid rgb(24, 144, 255)' },\n};\n","export interface AutocompleteStyles {\n  style?: React.CSSProperties;\n  inputStyle?: React.CSSProperties;\n  closeStyle?: React.CSSProperties;\n  optionsStyle?: React.CSSProperties;\n}\n\nexport const styles: AutocompleteStyles = {\n  style: { position: 'relative' },\n  inputStyle: {\n    width: '100%',\n    height: '36px',\n    padding: '0px 12px',\n    boxSizing: 'border-box',\n    fontSize: '15px',\n    fontFamily: 'Avenir',\n    outline: 'none',\n    borderRadius: '24px',\n  },\n  closeStyle: {\n    cursor: 'pointer',\n    position: 'absolute',\n    top: '5px',\n    right: '12px',\n  },\n  optionsStyle: { overflow: 'hidden' },\n};\n","import React, { useEffect, useState, useRef } from 'react';\nimport { styles } from './styles';\nimport { Props } from './props';\n\nconst emptyEvent = {\n  target: { value: '' },\n} as React.ChangeEvent<HTMLInputElement>;\n\nconst getOptions = (\n  value: string,\n  options: Array<Object>,\n  maxVisibleOptions: number\n) => {\n  return options\n    .filter(\n      (option) =>\n        JSON.stringify(option).toLowerCase().indexOf(value.toLowerCase()) !== -1\n    )\n    .slice(0, maxVisibleOptions);\n};\n\nexport const Autocomplete: React.FC<Props> = (props: Props) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const didMountRef = useRef(false);\n  const [value, setValue] = useState<string>('');\n  const [showOptions, setShowOptions] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleClickOutside = (event: MouseEvent) => {\n    if (\n      event.target !== null &&\n      ref &&\n      ref.current !== null &&\n      !ref.current.contains(event.target as Node)\n    ) {\n      setShowOptions(false);\n    }\n  };\n\n  const onChange = (\n    event: React.ChangeEvent<HTMLInputElement>,\n    showOptions: boolean\n  ) => {\n    setValue(event.target.value);\n    setShowOptions(showOptions);\n    props.onChange && props.onChange(event);\n  };\n\n  const renderOptions = (value: string) => {\n    const max = props.maxVisibleOptions ? props.maxVisibleOptions : 3;\n    return getOptions(value, props.options, max).map((option, index) => {\n      return (\n        <div key={`option-${index}`}>\n          {props.renderOption ? props.renderOption(option) : option.toString()}\n        </div>\n      );\n    });\n  };\n\n  return (\n    <div\n      ref={ref}\n      className=\"ce-autocomplete\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <input\n        className=\"ce-autocomplete-input\"\n        value={value}\n        placeholder={props.label}\n        style={{ ...styles.inputStyle, ...props.inputStyle }}\n        onChange={(e) => onChange(e, true)}\n        onFocus={(e) => {\n          setShowOptions(true);\n          props.onFocus && props.onFocus(e);\n        }}\n      />\n\n      <div\n        className=\"ce-autocomplete-close\"\n        onClick={() => onChange(emptyEvent, true)}\n        style={{\n          ...styles.closeStyle,\n          ...{ display: value.length > 0 ? 'inline-block' : 'none' },\n          ...props.closeStyle,\n        }}\n      >\n        ❌\n      </div>\n\n      <div\n        style={{\n          ...styles.optionsStyle,\n          ...{ height: showOptions ? 'auto' : '0px' },\n          ...props.optionsStyle,\n        }}\n      >\n        {renderOptions(value)}\n      </div>\n    </div>\n  );\n};\n","export interface DropdownStyles {\n  style?: React.CSSProperties;\n  barStyle?: React.CSSProperties;\n  barHoveredStyle?: React.CSSProperties;\n  iconStyle?: React.CSSProperties;\n  bodyStyle?: React.CSSProperties;\n  bodyExpandedStyle?: React.CSSProperties;\n}\n\nexport const styles: DropdownStyles = {\n  style: { borderTop: '1px solid #f0f0f0' },\n  barStyle: {\n    position: 'relative',\n    cursor: 'pointer',\n    backgroundColor: 'white',\n    transition: 'all .33s ease',\n    WebkitTransition: 'all .33s ease',\n    MozTransition: 'all .33s ease',\n    fontFamily: 'Avenir',\n    fontSize: '17px',\n    padding: '12px',\n    fontWeight: 600,\n  },\n  barHoveredStyle: {\n    backgroundColor: '#f0f0f0',\n  },\n  iconStyle: {\n    position: 'absolute',\n    right: '12px',\n    bottom: '15px',\n    width: '1em',\n    height: '1em',\n    transition: `transform 100ms`,\n  },\n  bodyStyle: {\n    height: '0px',\n    overflow: 'hidden',\n    transition: 'all 1.33s ease',\n    WebkitTransition: 'all 1.33s ease',\n    MozTransition: 'all 1.33s ease',\n  },\n  bodyExpandedStyle: { height: 'auto' },\n};\n","import React, { useState } from 'react';\nimport { styles } from './styles';\nimport { Props } from './props';\n\nexport const Dropdown: React.FC<Props> = (props: Props) => {\n  const [hovered, setHovered] = useState<boolean>(false);\n  const [expanded, setExpanded] = useState<boolean>(false);\n\n  return (\n    <div\n      id={props.id}\n      className={`ce-dropdown ${props.className}`}\n      style={{ ...styles.style, ...props.style }}\n    >\n      <div\n        className=\"ce-dropdown-label\"\n        onMouseEnter={() => setHovered(true)}\n        onMouseLeave={() => setHovered(false)}\n        onClick={() => setExpanded(!expanded)}\n        style={{\n          ...styles.barStyle,\n          ...(hovered && styles.barHoveredStyle),\n          ...props.barStyle,\n          ...(hovered && props.barHoveredStyle),\n        }}\n      >\n        {props.label}\n\n        <svg\n          className=\"ce-dropdown-icon\"\n          style={{\n            ...styles.iconStyle,\n            ...(expanded\n              ? { transform: `rotate(-90deg)` }\n              : { transform: `rotate(0deg)` }),\n            ...props.iconStyle,\n          }}\n          viewBox=\"64 64 896 896\"\n          focusable=\"false\"\n          data-icon=\"left\"\n          fill=\"currentColor\"\n          aria-hidden=\"true\"\n        >\n          <path d=\"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z\"></path>\n        </svg>\n      </div>\n\n      <div\n        className=\"ce-dropdown-children\"\n        style={{\n          ...styles.bodyStyle,\n          ...(expanded && styles.bodyExpandedStyle),\n          ...props.bodyStyle,\n          ...(expanded && props.bodyExpandedStyle),\n        }}\n      >\n        {props.children}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nimport { PeopleSettingsProps } from './props';\nimport { styles } from './styles';\n\nimport { Avatar } from '../../../Components/Avatar';\nimport { Autocomplete } from '../../../Components/Autocomplete';\nimport { Button } from '../../../Components/Button';\nimport { Dropdown } from '../../../Components/Dropdown';\n\nimport { PersonObject, ChatPersonObject } from '../../../../interfaces';\n\nexport const PeopleSettings: React.FC<PeopleSettingsProps> = (\n  props: PeopleSettingsProps\n) => {\n  const { chat = { people: [] }, peopleToInvite = [] } = props;\n\n  const renderChatPeople = (chatPeople: Array<ChatPersonObject>) => {\n    return chatPeople.map((chatPerson, index) => {\n      const { person } = chatPerson;\n\n      return (\n        <div\n          key={`member-${index}`}\n          style={{ height: '52px', position: 'relative' }}\n        >\n          <Avatar\n            username={person.username}\n            avatarUrl={person.avatar}\n            isOnline={person.is_online}\n            style={{ ...styles.avatarStyle, ...props.avatarStyle }}\n          />\n\n          <div style={{ ...styles.usernameStyle, ...props.usernameStyle }}>\n            {person.username}\n          </div>\n\n          {props.canDelete && (\n            <Button\n              type=\"danger\"\n              className=\"ce-member-delete-button\"\n              onClick={() =>\n                props.onRemovePersonClick && props.onRemovePersonClick(person)\n              }\n              style={{\n                ...styles.deleteButtonStyle,\n                ...props.deleteButtonStyle,\n              }}\n            >\n              <svg\n                viewBox=\"64 64 896 896\"\n                focusable=\"false\"\n                data-icon=\"close\"\n                width=\"1em\"\n                height=\"1em\"\n                fill=\"currentColor\"\n                aria-hidden=\"true\"\n              >\n                <path d=\"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z\"></path>\n              </svg>\n            </Button>\n          )}\n        </div>\n      );\n    });\n  };\n\n  const renderChatPeopleOption = (option: object) => {\n    const person = option as PersonObject;\n    const { onInvitePersonClick } = props;\n    return (\n      <div\n        className=\"ce-add-member-option\"\n        style={{ ...styles.optionStyle, ...props.optionStyle }}\n        onClick={() => onInvitePersonClick && onInvitePersonClick(person)}\n      >\n        {person.username}\n      </div>\n    );\n  };\n\n  if (props.renderPeopleSettings) {\n    return <>{props.renderPeopleSettings(props)}</>;\n  }\n\n  return (\n    <Dropdown\n      id=\"ce-settings-people-dropdown\"\n      label=\"Members\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      {renderChatPeople(chat.people)}\n\n      <Autocomplete\n        label=\"Add Member\"\n        options={peopleToInvite}\n        renderOption={renderChatPeopleOption}\n        style={{ ...styles.addMemberStyle, ...props.addMemberStyle }}\n        inputStyle={{\n          ...styles.addMemberInputStyle,\n          ...props.addMemberInputStyle,\n        }}\n      />\n    </Dropdown>\n  );\n};\n","export interface PhotosSettingsStyles {\n  style?: React.CSSProperties;\n  imageWrapperStyle?: React.CSSProperties;\n  imagePaddingStyle?: React.CSSProperties;\n  imageStyle?: React.CSSProperties;\n}\n\nexport const styles: PhotosSettingsStyles = {\n  style: {},\n  imageWrapperStyle: {\n    position: 'relative',\n    width: '33.3%',\n    display: 'inline-block',\n    cursor: 'pointer',\n  },\n  imagePaddingStyle: { paddingTop: '100%' },\n  imageStyle: {\n    top: '0px',\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    objectFit: 'cover',\n    padding: '0px',\n    borderRadius: '0px',\n  },\n};\n","import React from 'react';\n\nimport { PhotosSettingsProps } from './props';\nimport { styles } from './styles';\n\nimport { Image } from '../../../Components/Image';\nimport { Dropdown } from '../../../Components/Dropdown';\nimport { AttachmentObject } from '../../../../interfaces';\nimport { isImage, getFileName } from '../../../util/file';\n\nexport const PhotosSettings: React.FC<PhotosSettingsProps> = (\n  props: PhotosSettingsProps\n) => {\n  const { chat = { attachments: [] } } = props;\n  const renderImages = (attachments: Array<AttachmentObject>) => {\n    return attachments.map((attachment, index) => {\n      const fileName = getFileName(attachment.file);\n      if (isImage(fileName)) {\n        return (\n          <div\n            key={`photo-${index}`}\n            style={{ ...styles.imageWrapperStyle, ...props.imageWrapperStyle }}\n          >\n            <div\n              style={{\n                ...styles.imagePaddingStyle,\n                ...props.imagePaddingStyle,\n              }}\n            />\n\n            <Image\n              key={`attachment_${index}`}\n              className=\"ce-settings-image\"\n              url={attachment.file !== null ? attachment.file : undefined}\n              style={{ ...styles.imageStyle, ...props.imageStyle }}\n            />\n          </div>\n        );\n      }\n      return <span key={`photo-${index}`} />;\n    });\n  };\n\n  if (props.renderPhotosSettings) {\n    return <>{props.renderPhotosSettings(props)}</>;\n  }\n\n  return (\n    <Dropdown\n      id=\"ce-settings-photos-dropdown\"\n      label=\"Photos\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      {renderImages(chat.attachments)}\n    </Dropdown>\n  );\n};\n","export interface OptionsSettingsStyles {\n  style?: React.CSSProperties;\n  deleteChatButtonStyle?: React.CSSProperties;\n}\n\nexport const styles: OptionsSettingsStyles = {\n  style: {},\n  deleteChatButtonStyle: {\n    width: 'calc(100% - 24px)',\n    position: 'relative',\n    left: '12px',\n  },\n};\n","import React from 'react';\n\nimport { OptionsSettingsProps } from './props';\nimport { styles } from './styles';\n\nimport { Button } from '../../../Components/Button';\nimport { Dropdown } from '../../../Components/Dropdown';\n\nexport const OptionsSettings: React.FC<OptionsSettingsProps> = (\n  props: OptionsSettingsProps\n) => {\n  if (props.renderOptionsSettings) {\n    return <>{props.renderOptionsSettings(props)}</>;\n  }\n\n  return (\n    <Dropdown\n      id=\"ce-settings-options-dropdown\"\n      label=\"Options\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <Button\n        type=\"danger\"\n        onClick={() =>\n          props.onDeleteChatClick &&\n          props.chat &&\n          props.onDeleteChatClick(props.chat)\n        }\n        style={{\n          ...styles.deleteChatButtonStyle,\n          ...props.deleteChatButtonStyle,\n        }}\n      >\n        Delete this Chat\n      </Button>\n    </Dropdown>\n  );\n};\n","import React from 'react';\n\nimport { ChatSettingsProps } from './props';\nimport { styles } from './styles';\n\nimport { ChatAvatars } from './ChatAvatars';\nimport { PeopleSettings } from './PeopleSettings';\nimport { PhotosSettings } from './PhotosSettings';\nimport { OptionsSettings } from './OptionsSettings';\n\nexport const ChatSettings: React.FC<ChatSettingsProps> = (\n  props: ChatSettingsProps\n) => {\n  const { chat } = props;\n\n  if (props.renderChatSettings) {\n    return <>{props.renderChatSettings(props)}</>;\n  }\n\n  const people = chat ? chat.people.map((chatPerson) => chatPerson.person) : [];\n\n  const otherPerson =\n    chat &&\n    chat.people.find((person) => person.person.username !== props.username);\n  const title =\n    props.isLoading || !chat\n      ? ''\n      : chat.is_direct_chat && otherPerson\n      ? otherPerson.person.username\n      : chat.title;\n\n  return (\n    <div\n      className=\"ce-chat-settings\"\n      style={{ ...styles.style, ...props.style }}\n    >\n      <ChatAvatars\n        users={people}\n        username={props.username}\n        renderChatAvatars={props.renderChatAvatars}\n      />\n\n      <div\n        className=\"ce-chat-settings-title\"\n        style={{ ...styles.chatTitleStyle, ...props.chatTitleStyle }}\n      >\n        {title}\n      </div>\n\n      <PeopleSettings\n        chat={chat}\n        peopleToInvite={props.peopleToInvite}\n        canDelete={chat && props.username === chat.admin.username}\n        onInvitePersonClick={props.onInvitePersonClick}\n        onRemovePersonClick={props.onRemovePersonClick}\n        renderPeopleSettings={props.renderPeopleSettings}\n        style={{ ...styles.peopleSettingsStyle, ...props.peopleSettingsStyle }}\n      />\n\n      <PhotosSettings\n        chat={chat}\n        renderPhotosSettings={props.renderPhotosSettings}\n        style={{ ...styles.photosSettingsStyle, ...props.photosSettingsStyle }}\n      />\n\n      <OptionsSettings\n        chat={chat}\n        onDeleteChatClick={props.onDeleteChatClick}\n        renderOptionsSettings={props.renderOptionsSettings}\n        style={{\n          ...styles.optionsSettingsStyle,\n          ...props.optionsSettingsStyle,\n        }}\n      />\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { MultiChatWindowProps } from './props';\nimport { styles } from './styles';\n\nimport { ChatList } from './ChatList';\nimport { ChatFeed } from './ChatFeed';\nimport { ChatSettings } from './ChatSettings';\nimport { ChatAvatars } from './ChatSettings/ChatAvatars';\nimport { ChatAvatarsProps } from './ChatSettings/ChatAvatars/props';\nimport { Button } from '../Components/Button';\n\nimport {\n  UnorderedListOutlined,\n  SettingOutlined,\n  CloseOutlined,\n} from '@ant-design/icons';\n\nimport { Row, Col } from 'react-grid-system';\nimport { setConfiguration } from 'react-grid-system';\n\nsetConfiguration({ maxScreenClass: 'xl', gutterWidth: 0 });\n\nexport const MultiChatWindow: React.FC<MultiChatWindowProps> = (\n  props: MultiChatWindowProps\n) => {\n  const { chats = [], activeChatId = -1, messages = [] } = props;\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 575);\n  const chat = chats.find((chat) => chat.id === activeChatId);\n\n  useEffect(() => {\n    function handleResize() {\n      setIsMobile(window.innerWidth < 575);\n    }\n    window.addEventListener('resize', handleResize);\n  });\n\n  const renderChatList = () => {\n    return (\n      <ChatList\n        chats={chats}\n        activeChatId={activeChatId}\n        username={props.username}\n        timezoneOffset={props.timezoneOffset}\n        isLoading={props.isChatListLoading}\n        hasMoreChats={props.hasMoreChats}\n        onChatFormSubmit={props.onChatFormSubmit}\n        onChatCardClick={props.onChatCardClick}\n        onChatLoaderShow={props.onChatLoaderShow}\n        renderChatList={props.renderChatList}\n        renderChatForm={props.renderChatForm}\n        renderChatCard={props.renderChatCard}\n        style={{\n          position: isMobile ? 'absolute' : 'inherit',\n          zIndex: isMobile ? 1 : 'inherit',\n        }}\n      />\n    );\n  };\n\n  const renderChatSettings = () => {\n    return (\n      <ChatSettings\n        chat={chat}\n        username={props.username}\n        peopleToInvite={props.peopleToInvite}\n        isLoading={props.isChatSettingsLoading}\n        onInvitePersonClick={props.onInvitePersonClick}\n        onRemovePersonClick={props.onRemovePersonClick}\n        onDeleteChatClick={props.onDeleteChatClick}\n        renderChatSettings={props.renderChatSettings}\n        renderChatAvatars={(chatAvatarsProps) =>\n          ((\n            <>\n              <ChatAvatars\n                {...chatAvatarsProps}\n                renderChatAvatars={props.renderChatAvatars}\n              />\n              {isMobile && (\n                <Button\n                  onClick={props.onCloseMobileChatSettingsClick}\n                  style={{ position: 'absolute', top: '12px', right: '12px' }}\n                >\n                  <CloseOutlined />\n                </Button>\n              )}\n            </>\n          ) as unknown) as React.FC<ChatAvatarsProps>\n        }\n        renderPeopleSettings={props.renderPeopleSettings}\n        renderPhotosSettings={props.renderPhotosSettings}\n        renderOptionsSettings={props.renderOptionsSettings}\n        style={{\n          position: isMobile ? 'absolute' : 'inherit',\n          zIndex: isMobile ? 1 : 'inherit',\n        }}\n      />\n    );\n  };\n\n  return (\n    <Row className=\"ce-chat-engine\" style={{ ...styles.style, ...props.style }}>\n      <Col\n        xs={0}\n        sm={3}\n        className=\"ce-chat-list-column\"\n        style={{ ...styles.chatListColumnStyle, ...props.chatListColumnStyle }}\n      >\n        {renderChatList()}\n      </Col>\n\n      <Col\n        xs={12}\n        sm={6}\n        className=\"ce-chat-feed-column\"\n        style={{ ...styles.chatFeedColumnStyle, ...props.chatFeedColumnStyle }}\n      >\n        <ChatFeed\n          chat={chat}\n          messages={messages}\n          username={props.username}\n          timezoneOffset={props.timezoneOffset}\n          isLoading={props.isChatFeedLoading}\n          hasMoreMessages={props.hasMoreMessages}\n          onMessageLoaderShow={props.onMessageLoaderShow}\n          onMessageLoaderHide={props.onMessageLoaderHide}\n          onBottomMessageShow={props.onBottomMessageShow}\n          onBottomMessageHide={props.onBottomMessageHide}\n          onMessageFormSubmit={props.onMessageFormSubmit}\n          renderChatFeed={props.renderChatFeed}\n          renderChatHeader={props.renderChatHeader}\n          renderMessageList={props.renderMessageList}\n          renderMessage={props.renderMessage}\n          renderWelcomeGif={props.renderWelcomeGif}\n          renderMessageForm={props.renderMessageForm}\n        />\n      </Col>\n\n      <Col\n        xs={0}\n        sm={3}\n        className=\"ce-chat-settings-column\"\n        style={{\n          ...styles.chatSettingsColumnStyle,\n          ...props.chatSettingsColumnStyle,\n        }}\n      >\n        {renderChatSettings()}\n      </Col>\n\n      <Button\n        onClick={props.onMobileChatListClick}\n        className=\"ce-mobile-chat-list-button\"\n        style={{\n          ...styles.chatListMobileButtonStyle,\n          ...{ display: isMobile ? 'inherit' : 'none' },\n          ...props.chatListMobileButtonStyle,\n        }}\n      >\n        <UnorderedListOutlined />\n      </Button>\n\n      {isMobile && props.isMobileChatListOpen && renderChatList()}\n\n      <Button\n        onClick={props.onMobileChatSettingsClick}\n        className=\"ce-mobile-chat-settings-button\"\n        style={{\n          ...styles.chatSettingsMobileButtonStyle,\n          ...{ display: isMobile ? 'inherit' : 'none' },\n          ...props.chatSettingsMobileButtonStyle,\n        }}\n      >\n        <SettingOutlined />\n      </Button>\n\n      {isMobile && props.isMobileChatSettingsOpen && renderChatSettings()}\n    </Row>\n  );\n};\n","import { useState, useEffect, useRef } from 'react';\n\nimport {\n  ChatObject,\n  MessageObject,\n  PersonObject,\n  UserAuthHeaders,\n} from '../interfaces';\nimport { getDateTime } from '../components/util/dateTime';\n\nimport {\n  getChatsBefore,\n  newChat,\n  deleteChat,\n  getPeopleToInvite,\n  invitePerson,\n  removePerson,\n  getMessages,\n  newMessage,\n  readMessage,\n} from '../actions';\n\nimport { animateScroll } from 'react-scroll';\n\nconst chatCountIterator = 20;\nconst messageCountIterator = 50;\n\nexport const sortChats = (chats: ChatObject[]) => {\n  return chats.sort((a: ChatObject, b: ChatObject) => {\n    const aDate =\n      a.last_message && a.last_message.created\n        ? getDateTime(a.last_message.created)\n        : getDateTime(a.created);\n    const bDate =\n      b.last_message && b.last_message.created\n        ? getDateTime(b.last_message.created)\n        : getDateTime(b.created);\n    return new Date(bDate).getTime() - new Date(aDate).getTime();\n  });\n};\n\nexport const sortMessages = (messages: MessageObject[]) => {\n  return messages.sort((a: MessageObject, b: MessageObject) => {\n    return new Date(b.created).getTime() - new Date(a.created).getTime();\n  });\n};\n\nexport const useMultiChatLogic = (\n  projectId: string,\n  username: string,\n  secret: string,\n  httpUrl?: string\n) => {\n  const host = httpUrl ? httpUrl : 'https://api.chatengine.io';\n  const headers: UserAuthHeaders = {\n    'Public-Key': projectId,\n    'User-Name': username,\n    'User-Secret': secret,\n  };\n\n  // Data\n  const [activeChatId, setActiveChatId] = useState<number | undefined>();\n  const [chats, setChats] = useState<ChatObject[]>([]);\n  const [messages, setMessages] = useState<MessageObject[]>([]);\n  const [peopleToInvite, setPeopleToInvite] = useState<PersonObject[]>([]);\n\n  // State\n  const [hasMoreChats, setHasMoreChats] = useState<boolean>(false);\n  const [hasMoreMessages, setHasMoreMessages] = useState<boolean>(false);\n  const [isChatFeedAtBottom, setIsChatFeedAtBottom] = useState<boolean>(false);\n  const [isChatListLoading, setIsChatListLoading] = useState<boolean>(true);\n  const [isChatFeedLoading, setIsChatFeedLoading] = useState<boolean>(true);\n  const [isChatSettingsLoading, setIsChatSettingsLoading] =\n    useState<boolean>(true);\n  const [isMobileChatListOpen, setIsMobileChatListOpen] =\n    useState<boolean>(false);\n  const [isMobileChatSettingsOpen, setIsMobileChatSettingsOpen] =\n    useState<boolean>(false);\n\n  // Subscribe to Chat & Message Count\n  const chatCountRef = useRef<number>(0);\n  chatCountRef.current = chats.length;\n  const messageCountRef = useRef<number>(0);\n  messageCountRef.current = messages.length;\n  const chat = chats.find((chat) => chat.id === activeChatId);\n\n  // Fetch data on mount\n  const didMountRef = useRef<boolean>(false);\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      fetchMultiChatData();\n    }\n  }, []);\n\n  useEffect(() => {\n    const chat = chats.find((chat) => chat.id === activeChatId);\n    const chatPerson = chat?.people.find(\n      (chatPerson) => chatPerson.person.username === username\n    );\n\n    if (\n      activeChatId &&\n      chat?.last_message.id && // If there is a message\n      chat.last_message.id !== chatPerson?.last_read &&\n      isChatFeedAtBottom\n    ) {\n      readMessage(host, headers, activeChatId, chat.last_message.id, () => {});\n    }\n  }, [chats, activeChatId, isChatFeedAtBottom]);\n\n  async function fetchMultiChatData() {\n    const now = new Date()\n      .toISOString()\n      .replace('T', ' ')\n      .replace('Z', `${Math.floor(Math.random() * 1000)}+00:00`);\n\n    getChatsBefore(\n      host,\n      headers,\n      now,\n      chatCountRef.current > 0 ? chatCountRef.current : chatCountIterator,\n      (chats) => {\n        onGetChats(chats);\n\n        let currentChat = activeChatId;\n        if (!activeChatId && chats.length > 0) {\n          currentChat = chats[0].id;\n        }\n\n        currentChat\n          ? onChatCardClick(currentChat)\n          : setIsChatFeedLoading(false);\n      }\n    );\n    return;\n  }\n\n  async function onGetChats(chats: ChatObject[] = []) {\n    setHasMoreChats(chats.length >= chatCountRef.current + chatCountIterator);\n\n    const sortedChats = sortChats(chats);\n\n    setChats(sortedChats);\n    setIsChatListLoading(false);\n    return;\n  }\n\n  async function onNewChat(chat: ChatObject) {\n    const newChats = [chat].concat(chats ? chats : []);\n\n    setChats(newChats);\n    return;\n  }\n\n  async function onEditChat(newChat: ChatObject) {\n    const otherChats = chats\n      ? chats.filter((chat) => chat.id !== newChat.id)\n      : [];\n    const newChats = [newChat].concat(otherChats);\n    const sortedChats = sortChats(newChats);\n\n    setChats(sortedChats);\n    return;\n  }\n\n  async function onDeleteChat(oldChat: ChatObject) {\n    const newChats = chats\n      ? chats.filter((chat) => chat.id !== oldChat.id)\n      : [];\n\n    setChats(newChats);\n\n    if (newChats.length > 0 && activeChatId === oldChat.id)\n      onChatCardClick(newChats[0].id);\n    return;\n  }\n\n  async function onGetMessages(chatId: number, messages: MessageObject[]) {\n    setHasMoreMessages(\n      messages.length >= messageCountRef.current + messageCountIterator\n    );\n    setMessages(messages);\n\n    void chatId;\n    return;\n  }\n\n  async function onNewMessage(chatId: number, newMessage: MessageObject) {\n    if (activeChatId === chatId) {\n      const otherMessages = messages\n        ? messages.filter((message) => message.created !== newMessage.created)\n        : [];\n      const newMessages = otherMessages.concat(newMessage);\n      const sortedMessages = sortMessages(newMessages);\n\n      setMessages(sortedMessages);\n      if (isChatFeedAtBottom) {\n        animateScroll.scrollToBottom({\n          duration: 333,\n          containerId: `ce-message-list-${activeChatId}`,\n        });\n      }\n    }\n    return;\n  }\n\n  async function onEditMessage(chatId: number, newMessage: MessageObject) {\n    if (chatId === activeChatId) {\n      const otherMessages = messages\n        ? messages.filter((message) => message.id !== newMessage.id)\n        : [];\n      const newMessages = [newMessage].concat(otherMessages);\n      const sortedMessages = sortMessages(newMessages);\n      setMessages(sortedMessages);\n    }\n    return;\n  }\n\n  async function onDeleteMessage(chatId: number, oldMessage: MessageObject) {\n    if (chatId === activeChatId) {\n      const newMessages = messages\n        ? messages.filter((message) => message.id !== oldMessage.id)\n        : [];\n      setMessages(newMessages);\n    }\n    return;\n  }\n\n  async function onConnect() {\n    fetchMultiChatData();\n    return;\n  }\n\n  async function onAuthFail() {}\n\n  async function onChatFormSubmit(title: string) {\n    newChat(host, headers, title, (chat) => {\n      onNewChat(chat);\n      onChatCardClick(chat.id);\n    });\n    return;\n  }\n\n  async function onChatCardClick(newActiveChatId: number) {\n    if (newActiveChatId !== activeChatId) {\n      setIsChatFeedLoading(true);\n      setIsChatSettingsLoading(true);\n    }\n\n    setActiveChatId(newActiveChatId);\n    setIsMobileChatListOpen(false);\n\n    getMessages(\n      host,\n      headers,\n      newActiveChatId,\n      messageCountIterator,\n      (chatId, messages) => {\n        onGetMessages(chatId, messages);\n\n        setIsChatFeedLoading(false);\n        setIsChatSettingsLoading(false);\n\n        animateScroll.scrollToBottom({\n          duration: 0,\n          containerId: `ce-message-list-${activeChatId}`,\n        });\n      }\n    );\n\n    getPeopleToInvite(host, headers, newActiveChatId, setPeopleToInvite);\n    return;\n  }\n\n  async function onChatLoaderShow() {\n    const now = new Date()\n      .toISOString()\n      .replace('T', ' ')\n      .replace('Z', `0000+00:00`);\n\n    getChatsBefore(\n      host,\n      headers,\n      now,\n      chatCountRef.current + chatCountIterator,\n      onGetChats\n    );\n    return;\n  }\n\n  async function onMessageFormSubmit(message: MessageObject) {\n    const newMessages = messages?.concat(message);\n    setMessages(newMessages);\n\n    newMessage(host, headers, activeChatId, message, () => {});\n\n    setTimeout(() => {\n      animateScroll.scrollToBottom({\n        duration: 333,\n        containerId: `ce-message-list-${activeChatId}`,\n      });\n    }, 100);\n    return;\n  }\n\n  async function onInvitePersonClick(person: PersonObject) {\n    activeChatId &&\n      invitePerson(host, headers, activeChatId, person.username, () =>\n        onChatCardClick(activeChatId)\n      );\n  }\n\n  async function onRemovePersonClick(person: PersonObject) {\n    activeChatId &&\n      removePerson(host, headers, activeChatId, person.username, () =>\n        onChatCardClick(activeChatId)\n      );\n    return;\n  }\n\n  async function onDeleteChatClick(chat: ChatObject) {\n    deleteChat(host, headers, chat.id, onDeleteChat);\n    return;\n  }\n\n  async function onBottomMessageShow() {\n    setIsChatFeedAtBottom(true);\n    return;\n  }\n\n  async function onBottomMessageHide() {\n    setIsChatFeedAtBottom(false);\n    return;\n  }\n\n  async function onMessageLoaderShow() {\n    const scrollContainerId = `ce-message-list-${activeChatId}`;\n    const messageListId = `ce-message-list-content-${activeChatId}`;\n\n    const currentElement = document.getElementById(messageListId);\n    let currentHeight = currentElement ? currentElement.clientHeight : 0;\n\n    activeChatId &&\n      getMessages(\n        host,\n        headers,\n        activeChatId,\n        messageCountRef.current + messageCountIterator,\n        (chatId, messages) => {\n          onGetMessages(chatId, messages);\n\n          setTimeout(() => {\n            const element = document.getElementById(messageListId);\n            if (element) {\n              animateScroll.scrollTo(element.clientHeight - currentHeight, {\n                duration: 333,\n                containerId: scrollContainerId,\n              });\n            }\n          }, 1000);\n        }\n      );\n    return;\n  }\n\n  async function onMessageLoaderHide() {\n    return;\n  }\n\n  async function onIsTyping(id: number, person: PersonObject) {\n    void id, person;\n    return;\n  }\n\n  async function onMobileChatListClick() {\n    setIsMobileChatListOpen(true);\n    return;\n  }\n\n  async function onMobileChatSettingsClick() {\n    setIsMobileChatSettingsOpen(true);\n    return;\n  }\n\n  async function onCloseMobileChatSettingsClick() {\n    setIsMobileChatSettingsOpen(false);\n    return;\n  }\n\n  return {\n    // Socket Hooks\n    onConnect,\n    onAuthFail,\n    onGetChats,\n    onNewChat,\n    onEditChat,\n    onDeleteChat,\n    onGetMessages,\n    onNewMessage,\n    onEditMessage,\n    onDeleteMessage,\n    onIsTyping,\n    // Auth Data\n    projectId,\n    username,\n    // file deepcode ignore HardcodedNonCryptoSecret: <not a secret>\n    secret,\n    httpUrl,\n    wsUrl: httpUrl && httpUrl.replace('http', 'ws'),\n    // Chat Data\n    chats,\n    setChats,\n    messages,\n    setMessages,\n    peopleToInvite,\n    setPeopleToInvite,\n    // Chat State\n    activeChatId,\n    setActiveChatId,\n    chat,\n    hasMoreChats,\n    setHasMoreChats,\n    hasMoreMessages,\n    setHasMoreMessages,\n    isChatFeedAtBottom,\n    setIsChatFeedAtBottom,\n    isChatListLoading,\n    setIsChatListLoading,\n    isChatFeedLoading,\n    setIsChatFeedLoading,\n    isChatSettingsLoading,\n    setIsChatSettingsLoading,\n    isMobileChatListOpen,\n    setIsMobileChatListOpen,\n    isMobileChatSettingsOpen,\n    setIsMobileChatSettingsOpen,\n    // Component Hooks\n    onChatFormSubmit,\n    onChatCardClick,\n    onChatLoaderShow,\n    onMessageLoaderShow,\n    onMessageLoaderHide,\n    onBottomMessageShow,\n    onBottomMessageHide,\n    onMessageFormSubmit,\n    onInvitePersonClick,\n    onRemovePersonClick,\n    onDeleteChatClick,\n    onMobileChatListClick,\n    onMobileChatSettingsClick,\n    onCloseMobileChatSettingsClick,\n  };\n};\n","import { useState, useEffect, useRef } from 'react';\n\nimport { ChatObject, MessageObject, PersonObject } from '../interfaces';\nimport { getDateTime } from '../components/util/dateTime';\n\nimport { getChat, getMessages, newMessage } from '../actions';\n\nimport { animateScroll } from 'react-scroll';\nimport { ChatAuthHeaders } from '../interfaces';\n\nconst messageCountIterator = 50;\n\nexport const sortChats = (chats: ChatObject[]) => {\n  return chats.sort((a: ChatObject, b: ChatObject) => {\n    const aDate =\n      a.last_message && a.last_message.created\n        ? getDateTime(a.last_message.created)\n        : getDateTime(a.created);\n    const bDate =\n      b.last_message && b.last_message.created\n        ? getDateTime(b.last_message.created)\n        : getDateTime(b.created);\n    return new Date(bDate).getTime() - new Date(aDate).getTime();\n  });\n};\n\nexport const sortMessages = (messages: MessageObject[]) => {\n  return messages.sort((a: MessageObject, b: MessageObject) => {\n    return new Date(b.created).getTime() - new Date(a.created).getTime();\n  });\n};\n\nexport const useSingleChatLogic = (\n  projectId: string,\n  chatId: string,\n  chatAccessKey: string,\n  httpUrl?: string\n) => {\n  const host = httpUrl ? httpUrl : 'https://api.chatengine.io';\n  const headers: ChatAuthHeaders = {\n    'Public-Key': projectId,\n    'Chat-ID': chatId,\n    'Access-Key': chatAccessKey,\n  };\n\n  // Data\n  const [activeChatId, setActiveChatId] = useState<number | undefined>();\n  const [chat, setChat] = useState<ChatObject | undefined>();\n  const [messages, setMessages] = useState<MessageObject[]>([]);\n  const [peopleToInvite, setPeopleToInvite] = useState<PersonObject[]>([]);\n\n  // State\n  const [hasMoreChats, setHasMoreChats] = useState<boolean>(false);\n  const [hasMoreMessages, setHasMoreMessages] = useState<boolean>(false);\n  const [isChatFeedAtBottom, setIsChatFeedAtBottom] = useState<boolean>(false);\n  const [isChatFeedLoading, setIsChatFeedLoading] = useState<boolean>(true);\n\n  // Subscribe to Chat & Message Count\n  const chatCountRef = useRef<number>(0);\n  chatCountRef.current = chat ? 1 : 0;\n  const messageCountRef = useRef<number>(0);\n  messageCountRef.current = messages.length;\n\n  // Fetch data on mount\n  const didMountRef = useRef<boolean>(false);\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n      fetchSingleChatData();\n    }\n  }, []);\n\n  async function fetchSingleChatData() {\n    getChat(host, headers, chatId, (chat) => {\n      setChat(chat);\n      onChatCardClick(chat.id);\n    });\n  }\n\n  async function onEditChat(chat: ChatObject) {\n    setChat(chat);\n  }\n\n  async function onDeleteChat() {\n    setChat(undefined);\n    setActiveChatId(undefined);\n  }\n\n  async function onGetMessages(chatId: number, messages: MessageObject[]) {\n    setHasMoreMessages(\n      messages.length >= messageCountRef.current + messageCountIterator\n    );\n    setMessages(messages);\n    setIsChatFeedLoading(false);\n    void chatId;\n  }\n\n  async function onNewMessage(chatId: number, newMessage: MessageObject) {\n    if (activeChatId === chatId) {\n      const otherMessages = messages\n        ? messages.filter((message) => message.created !== newMessage.created)\n        : [];\n      const newMessages = otherMessages.concat(newMessage);\n      const sortedMessages = sortMessages(newMessages);\n\n      setMessages(sortedMessages);\n      if (isChatFeedAtBottom) {\n        animateScroll.scrollToBottom({\n          duration: 333,\n          containerId: `ce-message-list-${activeChatId}`,\n        });\n      }\n    }\n  }\n\n  async function onEditMessage(chatId: number, newMessage: MessageObject) {\n    if (chatId === activeChatId) {\n      const otherMessages = messages\n        ? messages.filter((message) => message.id !== newMessage.id)\n        : [];\n      const newMessages = [newMessage].concat(otherMessages);\n      const sortedMessages = sortMessages(newMessages);\n      setMessages(sortedMessages);\n    }\n  }\n\n  async function onDeleteMessage(chatId: number, oldMessage: MessageObject) {\n    if (chatId === activeChatId) {\n      const newMessages = messages\n        ? messages.filter((message) => message.id !== oldMessage.id)\n        : [];\n      setMessages(newMessages);\n    }\n  }\n\n  async function onConnect() {\n    fetchSingleChatData();\n  }\n\n  async function onAuthFail() {}\n\n  async function onChatCardClick(activeChatId: number) {\n    setActiveChatId(activeChatId);\n\n    getMessages(\n      host,\n      headers,\n      activeChatId,\n      messageCountIterator,\n      (chatId, messages) => {\n        onGetMessages(chatId, messages);\n        animateScroll.scrollToBottom({\n          duration: 0,\n          containerId: `ce-message-list-${activeChatId}`,\n        });\n      }\n    );\n  }\n\n  async function onMessageFormSubmit(message: MessageObject) {\n    const newMessages = messages?.concat(message);\n    setMessages(newMessages);\n\n    newMessage(host, headers, activeChatId, message, () => {});\n\n    setTimeout(() => {\n      animateScroll.scrollToBottom({\n        duration: 333,\n        containerId: `ce-message-list-${activeChatId}`,\n      });\n    }, 100);\n  }\n\n  async function onBottomMessageShow() {\n    setIsChatFeedAtBottom(true);\n  }\n\n  async function onBottomMessageHide() {\n    setIsChatFeedAtBottom(false);\n  }\n\n  async function onMessageLoaderShow() {\n    const scrollContainerId = `ce-message-list-${activeChatId}`;\n    const messageListId = `ce-message-list-content-${activeChatId}`;\n\n    const currentElement = document.getElementById(messageListId);\n    let currentHeight = currentElement ? currentElement.clientHeight : 0;\n\n    activeChatId &&\n      getMessages(\n        host,\n        headers,\n        activeChatId,\n        messageCountRef.current + messageCountIterator,\n        (chatId, messages) => {\n          onGetMessages(chatId, messages);\n\n          setTimeout(() => {\n            const element = document.getElementById(messageListId);\n            if (element) {\n              animateScroll.scrollTo(element.clientHeight - currentHeight, {\n                duration: 333,\n                containerId: scrollContainerId,\n              });\n            }\n          }, 1000);\n        }\n      );\n  }\n\n  async function onMessageLoaderHide() {}\n\n  async function onIsTyping(id: number, person: PersonObject) {\n    void id, person;\n  }\n\n  return {\n    // Socket Hooks\n    onConnect,\n    onAuthFail,\n    onEditChat,\n    onDeleteChat,\n    onGetMessages,\n    onNewMessage,\n    onEditMessage,\n    onDeleteMessage,\n    onIsTyping,\n    // Auth Data\n    projectId,\n    chatId,\n    chatAccessKey,\n    httpUrl,\n    wsUrl: httpUrl && httpUrl.replace('http', 'ws'),\n    // Chat Data\n    activeChatId,\n    setActiveChatId,\n    chat,\n    messages,\n    setMessages,\n    peopleToInvite,\n    setPeopleToInvite,\n    // Chat State\n    hasMoreChats,\n    setHasMoreChats,\n    hasMoreMessages,\n    setHasMoreMessages,\n    isChatFeedAtBottom,\n    setIsChatFeedAtBottom,\n    isChatFeedLoading,\n    setIsChatFeedLoading,\n    // Component Hooks\n    onChatCardClick,\n    onMessageLoaderShow,\n    onMessageLoaderHide,\n    onBottomMessageShow,\n    onBottomMessageHide,\n    onMessageFormSubmit,\n  };\n};\n","import React from 'react';\n\nimport { Props } from './props';\n\nimport { WebSocket } from 'nextjs-websocket';\n\nexport const ChildSocket: React.FC<Props> = (props: Props) => {\n  const { sessionToken } = props;\n\n  const onMessage = (event: string) => {\n    const eventJSON = JSON.parse(event);\n    if (eventJSON.action === 'new_chat') {\n      props.onNewChat && props.onNewChat(eventJSON.data);\n    } else if (\n      eventJSON.action === 'edit_chat' ||\n      eventJSON.action === 'add_person' ||\n      eventJSON.action === 'remove_person'\n    ) {\n      props.onEditChat && props.onEditChat(eventJSON.data);\n    } else if (eventJSON.action === 'delete_chat') {\n      props.onDeleteChat && props.onDeleteChat(eventJSON.data);\n    } else if (eventJSON.action === 'new_message') {\n      const { id, message } = eventJSON.data;\n      props.onNewMessage && props.onNewMessage(id, message);\n    } else if (eventJSON.action === 'edit_message') {\n      const { id, message } = eventJSON.data;\n      props.onEditMessage && props.onEditMessage(id, message);\n    } else if (eventJSON.action === 'delete_message') {\n      const { id, message } = eventJSON.data;\n      props.onDeleteMessage && props.onDeleteMessage(id, message);\n    } else if (eventJSON.action === 'is_typing') {\n      const { id, person } = eventJSON.data;\n      props.onIsTyping && props.onIsTyping(id, person);\n    }\n  };\n\n  if (!sessionToken) return <div />;\n\n  const wsUrl = props.wsUrl ? props.wsUrl : 'wss://api.chatengine.io';\n\n  return (\n    <WebSocket\n      url={`${wsUrl}/person_v4/?session_token=${sessionToken}`}\n      reconnect={true}\n      reconnectIntervalInMilliSeconds={3000}\n      onOpen={props.onConnect}\n      onError={props.onError}\n      onMessage={onMessage}\n      onClose={() => {\n        props.onClose && props.onClose();\n        props.onRefresh && props.onRefresh();\n      }}\n    />\n  );\n};\n","import React, { useEffect, useState, useRef } from 'react';\n\nimport axios from 'axios';\n\nimport { Props } from './props';\n\nimport { ChildSocket } from './childSocket';\n\nimport { UserAuthHeaders } from '../../interfaces';\n\nconst getSessionToken = (\n  host: string,\n  headers: UserAuthHeaders,\n  callback: (token: string) => void,\n  error: () => void\n) => {\n  axios\n    .get(`${host}/users/me/session/`, { headers })\n    .then((response) => callback(response.data.token))\n    .catch(() => error());\n};\n\nexport const MultiChatSocket: React.FC<Props> = (props: Props) => {\n  const didMountRef = useRef(false);\n  const [isHidden, setIsHidden] = useState(false);\n  const [sessionToken, setToken] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n\n      const host = props.httpUrl ? props.httpUrl : 'https://api.chatengine.io';\n      const headers: UserAuthHeaders = {\n        'Public-Key': props.projectId,\n        'User-Name': props.username,\n        'User-Secret': props.secret,\n      };\n\n      getSessionToken(\n        host,\n        headers,\n        (token) => setToken(token),\n        () => {\n          console.log(\n            `Your login credentials were not correct: \\n\n              Project ID: ${props.projectId} \\n\n              Username: ${props.username} \\n\n              Secret: ${props.secret}\\n\n              Double check these credentials to make sure they're correct.\\n\n              If all three are correct, try resetting the username and secret in the Online Dashboard or Private API.`\n          );\n          props.onAuthFail && props.onAuthFail();\n        }\n      );\n    }\n  }, []);\n\n  async function reRender() {\n    setIsHidden(true);\n    setTimeout(() => setIsHidden(false), 100);\n  }\n\n  if (isHidden && sessionToken) return <div />;\n\n  return (\n    <ChildSocket\n      projectId={props.projectId}\n      username={props.username}\n      secret={props.secret}\n      sessionToken={sessionToken}\n      wsUrl={props.wsUrl}\n      onRefresh={reRender}\n      onConnect={props.onConnect}\n      onError={props.onError}\n      onClose={props.onClose}\n      onNewChat={props.onNewChat}\n      onEditChat={props.onEditChat}\n      onDeleteChat={props.onDeleteChat}\n      onNewMessage={props.onNewMessage}\n      onEditMessage={props.onEditMessage}\n      onDeleteMessage={props.onDeleteMessage}\n      onIsTyping={props.onIsTyping}\n    />\n  );\n};\n","import React, { useEffect, useState } from 'react';\n\nimport { Props } from './props';\n\nimport { WebSocket } from 'nextjs-websocket';\n\nlet socketRef: WebSocket = undefined;\nlet pingIntervalId: NodeJS.Timer;\nlet timeIntervalId: NodeJS.Timer;\n\nconst pingInterval = 4000;\nconst minLag = 15 * 1000;\n\nexport const ChildSocket: React.FC<Props> = (props: Props) => {\n  const [now, setNow] = useState(Date.now());\n  const [shouldPongBy, setShouldPongBy] = useState(Date.now() + minLag);\n\n  const { projectId, chatId, chatAccessKey } = props;\n\n  useEffect(() => {\n    if (now > shouldPongBy) {\n      props.onRefresh && props.onRefresh();\n      setShouldPongBy(Date.now() + minLag);\n    }\n  }, [now, shouldPongBy]);\n\n  useEffect(() => {\n    return () => {\n      clearInterval(pingIntervalId);\n      clearInterval(timeIntervalId);\n    };\n  }, []);\n\n  const onConnect = () => {\n    pingIntervalId = setInterval(() => {\n      try {\n        socketRef.sendMessage(JSON.stringify('ping'));\n      } catch (e) {\n        console.log('Ping error', e);\n      }\n    }, pingInterval);\n    timeIntervalId = setInterval(() => setNow(Date.now()), 1000);\n\n    props.onConnect && props.onConnect();\n  };\n\n  const onMessage = (event: string) => {\n    const eventJSON = JSON.parse(event);\n\n    if (eventJSON.action === 'pong') {\n      setShouldPongBy(Date.now() + minLag);\n    } else if (eventJSON.action === 'login_error') {\n      console.log(\n        `Your chat auth credentials were not correct: \\n\n                Project ID: ${projectId} \\n\n                Chat ID: ${chatId} \\n\n                Chat Access Key: ${chatAccessKey}\\n\n                Double check these credentials to make sure they're correct.\\n\n                If all three are correct, try resetting the username and secret in the Online Dashboard or Private API.`\n      );\n      props.onAuthFail && props.onAuthFail();\n    } else if (\n      eventJSON.action === 'edit_chat' ||\n      eventJSON.action === 'add_person' ||\n      eventJSON.action === 'remove_person'\n    ) {\n      props.onEditChat && props.onEditChat(eventJSON.data);\n    } else if (eventJSON.action === 'delete_chat') {\n      props.onDeleteChat && props.onDeleteChat(eventJSON.data);\n    } else if (eventJSON.action === 'new_message') {\n      const { id, message } = eventJSON.data;\n      props.onNewMessage && props.onNewMessage(id, message);\n    } else if (eventJSON.action === 'edit_message') {\n      const { id, message } = eventJSON.data;\n      props.onEditMessage && props.onEditMessage(id, message);\n    } else if (eventJSON.action === 'delete_message') {\n      const { id, message } = eventJSON.data;\n      props.onDeleteMessage && props.onDeleteMessage(id, message);\n    } else if (eventJSON.action === 'is_typing') {\n      const { id, person } = eventJSON.data;\n      props.onIsTyping && props.onIsTyping(id, person);\n    }\n  };\n\n  const wsUrl = props.wsUrl ? props.wsUrl : 'wss://api.chatengine.io';\n\n  return (\n    <WebSocket\n      url={`${wsUrl}/chat/?projectID=${projectId}&chatID=${chatId}&accessKey=${chatAccessKey}`}\n      reconnect={true}\n      reconnectIntervalInMilliSeconds={3000}\n      childRef={(ref: WebSocket) => (socketRef = ref)}\n      onOpen={onConnect}\n      onError={props.onError}\n      onMessage={onMessage}\n      onClose={() => {\n        props.onClose && props.onClose();\n        props.onRefresh && props.onRefresh();\n      }}\n    />\n  );\n};\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport { Props } from './props';\n\nimport { ChildSocket } from './childSocket';\n\nexport const SingleChatSocket: React.FC<Props> = (props: Props) => {\n  const didMountRef = useRef(false);\n  const [isHidden, setIsHidden] = useState(false);\n\n  useEffect(() => {\n    if (!didMountRef.current) {\n      didMountRef.current = true;\n    }\n  }, []);\n\n  async function reRender() {\n    setIsHidden(true);\n    setTimeout(() => setIsHidden(false), 100);\n  }\n\n  if (isHidden) return <div />;\n\n  return (\n    <ChildSocket\n      projectId={props.projectId}\n      chatId={props.chatId}\n      chatAccessKey={props.chatAccessKey}\n      wsUrl={props.wsUrl}\n      onRefresh={reRender}\n      onConnect={props.onConnect}\n      onAuthFail={props.onAuthFail}\n      onError={props.onError}\n      onClose={props.onClose}\n      onEditChat={props.onEditChat}\n      onDeleteChat={props.onDeleteChat}\n      onNewMessage={props.onNewMessage}\n      onEditMessage={props.onEditMessage}\n      onDeleteMessage={props.onDeleteMessage}\n      onIsTyping={props.onIsTyping}\n    />\n  );\n};\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}